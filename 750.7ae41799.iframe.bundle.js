"use strict";(self.webpackChunkcollaborative_input=self.webpackChunkcollaborative_input||[]).push([[750],{"./node_modules/@jsonjoy.com/json-pack/lib/JsonPackExtension.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonPackExtension=void 0;exports.JsonPackExtension=class JsonPackExtension{constructor(tag,val){this.tag=tag,this.val=val}}},"./node_modules/@jsonjoy.com/json-pack/lib/JsonPackValue.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonPackValue=void 0;exports.JsonPackValue=class JsonPackValue{constructor(val){this.val=val}}},"./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborDecoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CborDecoder=void 0;const CborDecoderBase_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborDecoderBase.js"),JsonPackValue_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/JsonPackValue.js");class CborDecoder extends CborDecoderBase_1.CborDecoderBase{readAsMap(){const octet=this.reader.u8(),minor=31&octet;if(5===octet>>5)return this.readMap(minor);throw 0}readMap(minor){const length=this.readMinorLen(minor);return length>=0?this.readMapRaw(length):this.readMapIndef()}readMapRaw(length){const map=new Map;for(let i=0;i<length;i++){const key=this.val(),value=this.val();map.set(key,value)}return map}readMapIndef(){const map=new Map;for(;255!==this.reader.peak();){const key=this.val();if(255===this.reader.peak())throw 7;const value=this.val();map.set(key,value)}return this.reader.x++,map}skipN(n){for(let i=0;i<n;i++)this.skipAny()}skipAny(){this.skipAnyRaw(this.reader.u8())}skipAnyRaw(octet){const minor=31&octet;switch(octet>>5){case 0:case 1:this.skipUNint(minor);break;case 2:this.skipBin(minor);break;case 3:this.skipStr(minor);break;case 4:this.skipArr(minor);break;case 5:this.skipObj(minor);break;case 7:this.skipTkn(minor);break;case 6:this.skipTag(minor)}}skipMinorLen(minor){if(minor<=23)return minor;switch(minor){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1;default:throw 1}}skipUNint(minor){if(!(minor<=23))switch(minor){case 24:return this.reader.skip(1);case 25:return this.reader.skip(2);case 26:return this.reader.skip(4);case 27:return this.reader.skip(8);default:throw 1}}skipBin(minor){const length=this.skipMinorLen(minor);if(length>=0)this.reader.skip(length);else{for(;255!==this.reader.peak();)this.skipBinChunk();this.reader.x++}}skipBinChunk(){const octet=this.reader.u8(),minor=31&octet;if(2!==octet>>5)throw 2;if(minor>27)throw 3;this.skipBin(minor)}skipStr(minor){const length=this.skipMinorLen(minor);if(length>=0)this.reader.skip(length);else{for(;255!==this.reader.peak();)this.skipStrChunk();this.reader.x++}}skipStrChunk(){const octet=this.reader.u8(),minor=31&octet;if(3!==octet>>5)throw 4;if(minor>27)throw 5;this.skipStr(minor)}skipArr(minor){const length=this.skipMinorLen(minor);if(length>=0)this.skipN(length);else{for(;255!==this.reader.peak();)this.skipAny();this.reader.x++}}skipObj(minor){const length=this.readMinorLen(minor);if(length>=0)return this.skipN(2*length);for(;255!==this.reader.peak();){if(this.skipAny(),255===this.reader.peak())throw 7;this.skipAny()}this.reader.x++}skipTag(minor){if(this.skipMinorLen(minor)<0)throw 1;this.skipAny()}skipTkn(minor){switch(minor){case 24:return void this.reader.skip(1);case 25:return void this.reader.skip(2);case 26:return void this.reader.skip(4);case 27:return void this.reader.skip(8)}if(!(minor<=23))throw 1}validate(value,offset=0,size=value.length){this.reader.reset(value),this.reader.x=offset;const start=offset;this.skipAny();if(this.reader.x-start!==size)throw 8}decodeLevel(value){return this.reader.reset(value),this.readLevel()}readLevel(){const octet=this.reader.u8(),minor=31&octet;switch(octet>>5){case 4:return this.readArrLevel(minor);case 5:return this.readObjLevel(minor);default:return super.readAnyRaw(octet)}}readPrimitiveOrVal(){switch(this.reader.peak()>>5){case 4:case 5:return this.readAsValue();default:return this.val()}}readAsValue(){const reader=this.reader,start=reader.x;this.skipAny();const end=reader.x;return new JsonPackValue_1.JsonPackValue(reader.uint8.subarray(start,end))}readObjLevel(minor){const length=this.readMinorLen(minor);return length>=0?this.readObjRawLevel(length):this.readObjIndefLevel()}readObjRawLevel(length){const obj={};for(let i=0;i<length;i++){const key=this.key(),value=this.readPrimitiveOrVal();obj[key]=value}return obj}readObjIndefLevel(){const obj={};for(;255!==this.reader.peak();){const key=this.key();if(255===this.reader.peak())throw 7;const value=this.readPrimitiveOrVal();obj[key]=value}return this.reader.x++,obj}readArrLevel(minor){const length=this.readMinorLen(minor);return length>=0?this.readArrRawLevel(length):this.readArrIndefLevel()}readArrRawLevel(length){const arr=[];for(let i=0;i<length;i++)arr.push(this.readPrimitiveOrVal());return arr}readArrIndefLevel(){const arr=[];for(;255!==this.reader.peak();)arr.push(this.readPrimitiveOrVal());return this.reader.x++,arr}readHdr(expectedMajor){const octet=this.reader.u8();if(octet>>5!==expectedMajor)throw 0;const minor=31&octet;if(minor<24)return minor;switch(minor){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1}throw 1}readStrHdr(){return this.readHdr(3)}readObjHdr(){return this.readHdr(5)}readArrHdr(){return this.readHdr(4)}findKey(key){const size=this.readObjHdr();for(let i=0;i<size;i++){if(this.key()===key)return this;this.skipAny()}throw 9}findIndex(index){if(index>=this.readArrHdr())throw 10;for(let i=0;i<index;i++)this.skipAny();return this}find(path){for(let i=0;i<path.length;i++){const segment=path[i];"string"==typeof segment?this.findKey(segment):this.findIndex(segment)}return this}}exports.CborDecoder=CborDecoder},"./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborDecoderBase.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CborDecoderBase=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),f16_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/f16.js"),JsonPackExtension_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/JsonPackExtension.js"),JsonPackValue_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/JsonPackValue.js"),Reader_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/Reader.js"),sharedCachedUtf8Decoder_1=tslib_1.__importDefault(__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/utf8/sharedCachedUtf8Decoder.js"));exports.CborDecoderBase=class CborDecoderBase{constructor(reader=new Reader_1.Reader,keyDecoder=sharedCachedUtf8Decoder_1.default){this.reader=reader,this.keyDecoder=keyDecoder}read(uint8){return this.reader.reset(uint8),this.val()}decode(uint8){return this.reader.reset(uint8),this.val()}val(){const octet=this.reader.u8(),major=octet>>5,minor=31&octet;return major<4?major<2?0===major?this.readUint(minor):this.readNint(minor):2===major?this.readBin(minor):this.readStr(minor):major<6?4===major?this.readArr(minor):this.readObj(minor):6===major?this.readTag(minor):this.readTkn(minor)}readAnyRaw(octet){const major=octet>>5,minor=31&octet;return major<4?major<2?0===major?this.readUint(minor):this.readNint(minor):2===major?this.readBin(minor):this.readStr(minor):major<6?4===major?this.readArr(minor):this.readObj(minor):6===major?this.readTag(minor):this.readTkn(minor)}readMinorLen(minor){if(minor<24)return minor;switch(minor){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1;default:throw 1}}readUint(minor){if(minor<25)return 24===minor?this.reader.u8():minor;if(minor<27)return 25===minor?this.reader.u16():this.reader.u32();{const num=this.reader.u64();return num>9007199254740991?num:Number(num)}}readNint(minor){if(minor<25)return 24===minor?-this.reader.u8()-1:-minor-1;if(minor<27)return 25===minor?-this.reader.u16()-1:-this.reader.u32()-1;{const num=this.reader.u64();return num>9007199254740990?-num-BigInt(1):-Number(num)-1}}readBin(minor){const reader=this.reader;if(minor<=23)return reader.buf(minor);switch(minor){case 24:return reader.buf(reader.u8());case 25:return reader.buf(reader.u16());case 26:return reader.buf(reader.u32());case 27:return reader.buf(Number(reader.u64()));case 31:{let size=0;const list=[];for(;255!==this.reader.peak();){const uint8=this.readBinChunk();size+=uint8.length,list.push(uint8)}this.reader.x++;const res=new Uint8Array(size);let offset=0;const length=list.length;for(let i=0;i<length;i++){const arr=list[i];res.set(arr,offset),offset+=arr.length}return res}default:throw 1}}readBinChunk(){const octet=this.reader.u8(),minor=31&octet;if(2!==octet>>5)throw 2;if(minor>27)throw 3;return this.readBin(minor)}readAsStr(){const octet=this.reader.u8(),minor=31&octet;if(3!==octet>>5)throw 11;return this.readStr(minor)}readStr(minor){const reader=this.reader;if(minor<=23)return reader.utf8(minor);switch(minor){case 24:return reader.utf8(reader.u8());case 25:return reader.utf8(reader.u16());case 26:return reader.utf8(reader.u32());case 27:return reader.utf8(Number(reader.u64()));case 31:{let str="";for(;255!==reader.peak();)str+=this.readStrChunk();return this.reader.x++,str}default:throw 1}}readStrLen(minor){if(minor<=23)return minor;switch(minor){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());default:throw 1}}readStrChunk(){const octet=this.reader.u8(),minor=31&octet;if(3!==octet>>5)throw 4;if(minor>27)throw 5;return this.readStr(minor)}readArr(minor){const length=this.readMinorLen(minor);return length>=0?this.readArrRaw(length):this.readArrIndef()}readArrRaw(length){const arr=[];for(let i=0;i<length;i++)arr.push(this.val());return arr}readArrIndef(){const arr=[];for(;255!==this.reader.peak();)arr.push(this.val());return this.reader.x++,arr}readObj(minor){if(minor<28){let length=minor;switch(minor){case 24:length=this.reader.u8();break;case 25:length=this.reader.u16();break;case 26:length=this.reader.u32();break;case 27:length=Number(this.reader.u64())}const obj={};for(let i=0;i<length;i++){const key=this.key();if("__proto__"===key)throw 6;const value=this.val();obj[key]=value}return obj}if(31===minor)return this.readObjIndef();throw 1}readObjRaw(length){const obj={};for(let i=0;i<length;i++){const key=this.key(),value=this.val();obj[key]=value}return obj}readObjIndef(){const obj={};for(;255!==this.reader.peak();){const key=this.key();if(255===this.reader.peak())throw 7;const value=this.val();obj[key]=value}return this.reader.x++,obj}key(){const octet=this.reader.u8(),minor=31&octet;if(3!==octet>>5)return String(this.readAnyRaw(octet));const length=this.readStrLen(minor);if(length>31)return this.reader.utf8(length);const key=this.keyDecoder.decode(this.reader.uint8,this.reader.x,length);return this.reader.skip(length),key}readTag(minor){if(minor<=23)return this.readTagRaw(minor);switch(minor){case 24:return this.readTagRaw(this.reader.u8());case 25:return this.readTagRaw(this.reader.u16());case 26:return this.readTagRaw(this.reader.u32());case 27:return this.readTagRaw(Number(this.reader.u64()));default:throw 1}}readTagRaw(tag){return new JsonPackExtension_1.JsonPackExtension(tag,this.val())}readTkn(minor){switch(minor){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 24:return new JsonPackValue_1.JsonPackValue(this.reader.u8());case 25:return this.f16();case 26:return this.reader.f32();case 27:return this.reader.f64()}if(minor<=23)return new JsonPackValue_1.JsonPackValue(minor);throw 1}f16(){return(0,f16_1.decodeF16)(this.reader.u16())}}},"./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborEncoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CborEncoder=void 0;const isFloat32_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/isFloat32.js"),JsonPackExtension_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/JsonPackExtension.js"),CborEncoderFast_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborEncoderFast.js"),JsonPackValue_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/JsonPackValue.js");class CborEncoder extends CborEncoderFast_1.CborEncoderFast{writeUnknown(value){this.writeNull()}writeAny(value){switch(typeof value){case"number":return this.writeNumber(value);case"string":return this.writeStr(value);case"boolean":return this.writer.u8(+value+244);case"object":if(!value)return this.writer.u8(246);switch(value.constructor){case Object:return this.writeObj(value);case Array:return this.writeArr(value);case Uint8Array:return this.writeBin(value);case Map:return this.writeMap(value);case JsonPackExtension_1.JsonPackExtension:return this.writeTag(value.tag,value.val);case JsonPackValue_1.JsonPackValue:const buf=value.val;return this.writer.buf(buf,buf.length);default:return value instanceof Uint8Array?this.writeBin(value):Array.isArray(value)?this.writeArr(value):value instanceof Map?this.writeMap(value):this.writeUnknown(value)}case"undefined":return this.writeUndef();case"bigint":return this.writeBigInt(value);default:return this.writeUnknown(value)}}writeFloat(float){(0,isFloat32_1.isFloat32)(float)?this.writer.u8f32(250,float):this.writer.u8f64(251,float)}writeMap(map){this.writeMapHdr(map.size),map.forEach((value,key)=>{this.writeAny(key),this.writeAny(value)})}writeUndef(){this.writer.u8(247)}}exports.CborEncoder=CborEncoder},"./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborEncoderFast.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CborEncoderFast=void 0;const Writer_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/Writer.js"),isSafeInteger=Number.isSafeInteger;exports.CborEncoderFast=class CborEncoderFast{constructor(writer=new Writer_1.Writer){this.writer=writer}encode(value){return this.writeAny(value),this.writer.flush()}encodeToSlice(value){return this.writeAny(value),this.writer.flushSlice()}writeAny(value){switch(typeof value){case"number":return this.writeNumber(value);case"string":return this.writeStr(value);case"boolean":return this.writer.u8(+value+244);case"object":if(!value)return this.writer.u8(246);return value.constructor===Array?this.writeArr(value):this.writeObj(value)}}writeCbor(){this.writer.u8u16(217,55799)}writeEnd(){this.writer.u8(255)}writeNull(){this.writer.u8(246)}writeBoolean(bool){bool?this.writer.u8(245):this.writer.u8(244)}writeNumber(num){isSafeInteger(num)?this.writeInteger(num):"bigint"==typeof num?this.writeBigInt(num):this.writeFloat(num)}writeBigInt(int){int>=0?this.writeBigUint(int):this.writeBigSint(int)}writeBigUint(uint){if(uint<=Number.MAX_SAFE_INTEGER)return this.writeUInteger(Number(uint));this.writer.u8u64(27,uint)}writeBigSint(int){if(int>=Number.MIN_SAFE_INTEGER)return this.encodeNint(Number(int));const uint=-BigInt(1)-int;this.writer.u8u64(59,uint)}writeInteger(int){int>=0?this.writeUInteger(int):this.encodeNint(int)}writeUInteger(uint){const writer=this.writer;writer.ensureCapacity(9);const uint8=writer.uint8;let x=writer.x;uint<=23?uint8[x++]=0+uint:uint<=255?(uint8[x++]=24,uint8[x++]=uint):uint<=65535?(uint8[x++]=25,writer.view.setUint16(x,uint),x+=2):uint<=4294967295?(uint8[x++]=26,writer.view.setUint32(x,uint),x+=4):(uint8[x++]=27,writer.view.setBigUint64(x,BigInt(uint)),x+=8),writer.x=x}encodeNumber(num){this.writeNumber(num)}encodeInteger(int){this.writeInteger(int)}encodeUint(uint){this.writeUInteger(uint)}encodeNint(int){const uint=-1-int,writer=this.writer;writer.ensureCapacity(9);const uint8=writer.uint8;let x=writer.x;uint<24?uint8[x++]=32+uint:uint<=255?(uint8[x++]=56,uint8[x++]=uint):uint<=65535?(uint8[x++]=57,writer.view.setUint16(x,uint),x+=2):uint<=4294967295?(uint8[x++]=58,writer.view.setUint32(x,uint),x+=4):(uint8[x++]=59,writer.view.setBigUint64(x,BigInt(uint)),x+=8),writer.x=x}writeFloat(float){this.writer.u8f64(251,float)}writeBin(buf){const length=buf.length;this.writeBinHdr(length),this.writer.buf(buf,length)}writeBinHdr(length){const writer=this.writer;length<=23?writer.u8(64+length):length<=255?writer.u16(22528+length):length<=65535?writer.u8u16(89,length):length<=4294967295?writer.u8u32(90,length):writer.u8u64(91,length)}writeStr(str){const writer=this.writer,maxSize=4*str.length;writer.ensureCapacity(5+maxSize);const uint8=writer.uint8;let lengthOffset=writer.x;maxSize<=23?writer.x++:maxSize<=255?(uint8[writer.x++]=120,lengthOffset=writer.x,writer.x++):maxSize<=65535?(uint8[writer.x++]=121,lengthOffset=writer.x,writer.x+=2):(uint8[writer.x++]=122,lengthOffset=writer.x,writer.x+=4);const bytesWritten=writer.utf8(str);maxSize<=23?uint8[lengthOffset]=96+bytesWritten:maxSize<=255?uint8[lengthOffset]=bytesWritten:maxSize<=65535?writer.view.setUint16(lengthOffset,bytesWritten):writer.view.setUint32(lengthOffset,bytesWritten)}writeStrHdr(length){const writer=this.writer;length<=23?writer.u8(96+length):length<=255?writer.u16(30720+length):length<=65535?writer.u8u16(121,length):writer.u8u32(122,length)}writeAsciiStr(str){this.writeStrHdr(str.length),this.writer.ascii(str)}writeArr(arr){const length=arr.length;this.writeArrHdr(length);for(let i=0;i<length;i++)this.writeAny(arr[i])}writeArrHdr(length){const writer=this.writer;length<=23?writer.u8(128+length):length<=255?writer.u16(38912+length):length<=65535?writer.u8u16(153,length):length<=4294967295?writer.u8u32(154,length):writer.u8u64(155,length)}writeObj(obj){const keys=Object.keys(obj),length=keys.length;this.writeObjHdr(length);for(let i=0;i<length;i++){const key=keys[i];this.writeStr(key),this.writeAny(obj[key])}}writeObjHdr(length){const writer=this.writer;length<=23?writer.u8(160+length):length<=255?writer.u16(47104+length):length<=65535?writer.u8u16(185,length):length<=4294967295?writer.u8u32(186,length):writer.u8u64(187,length)}writeMapHdr(length){this.writeObjHdr(length)}writeStartMap(){this.writer.u8(191)}writeTag(tag,value){this.writeTagHdr(tag),this.writeAny(value)}writeTagHdr(tag){const writer=this.writer;tag<=23?writer.u8(192+tag):tag<=255?writer.u16(55296+tag):tag<=65535?writer.u8u16(217,tag):tag<=4294967295?writer.u8u32(218,tag):writer.u8u64(219,tag)}writeTkn(value){const writer=this.writer;value<=23?writer.u8(224+value):value<=255&&writer.u16(63488+value)}writeStartStr(){this.writer.u8(127)}writeStrChunk(str){throw new Error("Not implemented")}writeEndStr(){throw new Error("Not implemented")}writeStartBin(){this.writer.u8(95)}writeBinChunk(buf){throw new Error("Not implemented")}writeEndBin(){throw new Error("Not implemented")}writeStartArr(){this.writer.u8(159)}writeArrChunk(item){throw new Error("Not implemented")}writeEndArr(){this.writer.u8(255)}writeStartObj(){this.writer.u8(191)}writeObjChunk(key,value){throw new Error("Not implemented")}writeEndObj(){this.writer.u8(255)}}},"./node_modules/@jsonjoy.com/json-pointer/lib/find.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.isObjectReference=exports.isArrayEnd=exports.isArrayReference=exports.find=void 0;const hasOwnProperty_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/hasOwnProperty.js"),{isArray}=Array;exports.find=(val,path)=>{const pathLength=path.length;if(!pathLength)return{val};let obj,key;for(let i=0;i<pathLength;i++)if(obj=val,key=path[i],isArray(obj)){const length=obj.length;if("-"===key)key=length;else if("string"==typeof key){const key2=~~key;if(""+key2!==key)throw new Error("INVALID_INDEX");if(key=key2,key<0)throw new Error("INVALID_INDEX")}val=obj[key]}else{if("object"!=typeof obj||!obj)throw new Error("NOT_FOUND");val=(0,hasOwnProperty_1.hasOwnProperty)(obj,key)?obj[key]:void 0}return{val,obj,key}};exports.isArrayReference=ref=>isArray(ref.obj)&&"number"==typeof ref.key;exports.isArrayEnd=ref=>ref.obj.length===ref.key;exports.isObjectReference=ref=>"object"==typeof ref.obj&&"string"==typeof ref.key},"./node_modules/@jsonjoy.com/json-pointer/lib/findByPointer/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__exportStar(__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/findByPointer/v5.js"),exports)},"./node_modules/@jsonjoy.com/json-pointer/lib/findByPointer/v5.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.findByPointer=void 0;const hasOwnProperty_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/hasOwnProperty.js"),util_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/util.js"),{isArray}=Array;exports.findByPointer=(pointer,val)=>{if(!pointer)return{val};let obj,key,indexOfSlash=0,indexAfterSlash=1;for(;indexOfSlash>-1;)if(indexOfSlash=pointer.indexOf("/",indexAfterSlash),key=indexOfSlash>-1?pointer.substring(indexAfterSlash,indexOfSlash):pointer.substring(indexAfterSlash),indexAfterSlash=indexOfSlash+1,obj=val,isArray(obj)){const length=obj.length;if("-"===key)key=length;else{const key2=~~key;if(""+key2!==key)throw new Error("INVALID_INDEX");if(key=key2,key<0)throw"INVALID_INDEX"}val=obj[key]}else{if("object"!=typeof obj||!obj)throw"NOT_FOUND";key=(0,util_1.unescapeComponent)(key),val=(0,hasOwnProperty_1.hasOwnProperty)(obj,key)?obj[key]:void 0}return{val,obj,key}}},"./node_modules/@jsonjoy.com/json-pointer/lib/get.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=void 0;const hasOwnProperty_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/hasOwnProperty.js");exports.get=(val,path)=>{const pathLength=path.length;let key;if(!pathLength)return val;for(let i=0;i<pathLength;i++)if(key=path[i],val instanceof Array){if("number"!=typeof key){if("-"===key)return;const key2=~~key;if(""+key2!==key)return;key=key2}val=val[key]}else{if("object"!=typeof val)return;if(!val||!(0,hasOwnProperty_1.hasOwnProperty)(val,key))return;val=val[key]}return val}},"./node_modules/@jsonjoy.com/json-pointer/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/types.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/util.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/validate.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/get.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/find.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/findByPointer/index.js"),exports)},"./node_modules/@jsonjoy.com/json-pointer/lib/types.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@jsonjoy.com/json-pointer/lib/util.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInteger=exports.isRoot=exports.toPath=void 0,exports.unescapeComponent=unescapeComponent,exports.escapeComponent=escapeComponent,exports.parseJsonPointer=parseJsonPointer,exports.formatJsonPointer=function formatJsonPointer(path){return(0,exports.isRoot)(path)?"":"/"+path.map(component=>escapeComponent(String(component))).join("/")},exports.isChild=function isChild(parent,child){if(parent.length>=child.length)return!1;for(let i=0;i<parent.length;i++)if(parent[i]!==child[i])return!1;return!0},exports.isPathEqual=function isPathEqual(p1,p2){if(p1.length!==p2.length)return!1;for(let i=0;i<p1.length;i++)if(p1[i]!==p2[i])return!1;return!0},exports.parent=function parent(path){if(path.length<1)throw new Error("NO_PARENT");return path.slice(0,path.length-1)},exports.isValidIndex=function isValidIndex(index){if("number"==typeof index)return!0;const n=Number.parseInt(index,10);return String(n)===index&&n>=0};const r1=/~1/g,r2=/~0/g,r3=/~/g,r4=/\//g;function unescapeComponent(component){return-1===component.indexOf("~")?component:component.replace(r1,"/").replace(r2,"~")}function escapeComponent(component){return-1===component.indexOf("/")&&-1===component.indexOf("~")?component:component.replace(r3,"~0").replace(r4,"~1")}function parseJsonPointer(pointer){return pointer?pointer.slice(1).split("/").map(unescapeComponent):[]}exports.toPath=pointer=>"string"==typeof pointer?parseJsonPointer(pointer):pointer;exports.isRoot=path=>!path.length;exports.isInteger=str=>{const len=str.length;let charCode,i=0;for(;i<len;){if(charCode=str.charCodeAt(i),!(charCode>=48&&charCode<=57))return!1;i++}return!0}},"./node_modules/@jsonjoy.com/json-pointer/lib/validate.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.validatePath=exports.validateJsonPointer=void 0;exports.validateJsonPointer=pointer=>{if("string"==typeof pointer){if(pointer){if("/"!==pointer[0])throw new Error("POINTER_INVALID");if(pointer.length>1024)throw new Error("POINTER_TOO_LONG")}}else(0,exports.validatePath)(pointer)};const{isArray}=Array;exports.validatePath=path=>{if(!isArray(path))throw new Error("Invalid path.");if(path.length>256)throw new Error("Path too long.");for(const step of path)switch(typeof step){case"string":case"number":continue;default:throw new Error("Invalid path step.")}}},"./node_modules/@jsonjoy.com/util/lib/buffers/Reader.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reader=void 0;const decodeUtf8_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeUtf8/index.js");exports.Reader=class Reader{constructor(){this.uint8=new Uint8Array([]),this.view=new DataView(this.uint8.buffer),this.x=0}reset(uint8){this.x=0,this.uint8=uint8,this.view=new DataView(uint8.buffer,uint8.byteOffset,uint8.length)}peak(){return this.view.getUint8(this.x)}skip(length){this.x+=length}buf(size){const end=this.x+size,bin=this.uint8.subarray(this.x,end);return this.x=end,bin}u8(){return this.uint8[this.x++]}i8(){return this.view.getInt8(this.x++)}u16(){let x=this.x;const num=(this.uint8[x++]<<8)+this.uint8[x++];return this.x=x,num}i16(){const num=this.view.getInt16(this.x);return this.x+=2,num}u32(){const num=this.view.getUint32(this.x);return this.x+=4,num}i32(){const num=this.view.getInt32(this.x);return this.x+=4,num}u64(){const num=this.view.getBigUint64(this.x);return this.x+=8,num}i64(){const num=this.view.getBigInt64(this.x);return this.x+=8,num}f32(){const pos=this.x;return this.x+=4,this.view.getFloat32(pos)}f64(){const pos=this.x;return this.x+=8,this.view.getFloat64(pos)}utf8(size){const start=this.x;return this.x+=size,(0,decodeUtf8_1.decodeUtf8)(this.uint8,start,size)}ascii(length){const uint8=this.uint8;let str="";const end=this.x+length;for(let i=this.x;i<end;i++)str+=String.fromCharCode(uint8[i]);return this.x=end,str}}},"./node_modules/@jsonjoy.com/util/lib/buffers/Slice.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Slice=void 0;exports.Slice=class Slice{constructor(uint8,view,start,end){this.uint8=uint8,this.view=view,this.start=start,this.end=end}subarray(){return this.uint8.subarray(this.start,this.end)}}},"./node_modules/@jsonjoy.com/util/lib/buffers/Writer.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Writer=void 0;const Slice_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/Slice.js"),EMPTY_UINT8=new Uint8Array([]),EMPTY_VIEW=new DataView(EMPTY_UINT8.buffer),hasBuffer="function"==typeof Buffer,utf8Write=hasBuffer?Buffer.prototype.utf8Write:null,from=hasBuffer?Buffer.from:null,textEncoder="undefined"!=typeof TextEncoder?new TextEncoder:null;exports.Writer=class Writer{constructor(allocSize=65536){this.allocSize=allocSize,this.view=EMPTY_VIEW,this.x0=0,this.x=0,this.uint8=new Uint8Array(allocSize),this.size=allocSize,this.view=new DataView(this.uint8.buffer)}grow(size){const x0=this.x0,x=this.x,oldUint8=this.uint8,newUint8=new Uint8Array(size),view=new DataView(newUint8.buffer),activeSlice=oldUint8.subarray(x0,x);newUint8.set(activeSlice,0),this.x=x-x0,this.x0=0,this.uint8=newUint8,this.size=size,this.view=view}ensureCapacity(capacity){const byteLength=this.size,remaining=byteLength-this.x;if(remaining<capacity){const totalRequired=byteLength-this.x0+(capacity-remaining);this.grow(totalRequired<=this.allocSize?this.allocSize:2*totalRequired)}}move(capacity){this.ensureCapacity(capacity),this.x+=capacity}reset(){this.x0=this.x}newBuffer(size){const uint8=this.uint8=new Uint8Array(size);this.size=size,this.view=new DataView(uint8.buffer),this.x=this.x0=0}flush(){const result=this.uint8.subarray(this.x0,this.x);return this.x0=this.x,result}flushSlice(){const slice=new Slice_1.Slice(this.uint8,this.view,this.x0,this.x);return this.x0=this.x,slice}u8(char){this.ensureCapacity(1),this.uint8[this.x++]=char}u16(word){this.ensureCapacity(2),this.view.setUint16(this.x,word),this.x+=2}u32(dword){this.ensureCapacity(4),this.view.setUint32(this.x,dword),this.x+=4}i32(dword){this.ensureCapacity(4),this.view.setInt32(this.x,dword),this.x+=4}u64(qword){this.ensureCapacity(8),this.view.setBigUint64(this.x,BigInt(qword)),this.x+=8}f64(float){this.ensureCapacity(8),this.view.setFloat64(this.x,float),this.x+=8}u8u16(u8,u16){this.ensureCapacity(3);let x=this.x;this.uint8[x++]=u8,this.uint8[x++]=u16>>>8,this.uint8[x++]=255&u16,this.x=x}u8u32(u8,u32){this.ensureCapacity(5);let x=this.x;this.uint8[x++]=u8,this.view.setUint32(x,u32),this.x=x+4}u8u64(u8,u64){this.ensureCapacity(9);let x=this.x;this.uint8[x++]=u8,this.view.setBigUint64(x,BigInt(u64)),this.x=x+8}u8f32(u8,f32){this.ensureCapacity(5);let x=this.x;this.uint8[x++]=u8,this.view.setFloat32(x,f32),this.x=x+4}u8f64(u8,f64){this.ensureCapacity(9);let x=this.x;this.uint8[x++]=u8,this.view.setFloat64(x,f64),this.x=x+8}buf(buf,length){this.ensureCapacity(length);const x=this.x;this.uint8.set(buf,x),this.x=x+length}utf8(str){const maxLength=4*str.length;if(maxLength<168)return this.utf8Native(str);if(utf8Write){const writeLength=utf8Write.call(this.uint8,str,this.x,maxLength);return this.x+=writeLength,writeLength}if(from){const uint8=this.uint8,offset=uint8.byteOffset+this.x,writeLength=from(uint8.buffer).subarray(offset,offset+maxLength).write(str,0,maxLength,"utf8");return this.x+=writeLength,writeLength}if(maxLength>1024&&textEncoder){const writeLength=textEncoder.encodeInto(str,this.uint8.subarray(this.x,this.x+maxLength)).written;return this.x+=writeLength,writeLength}return this.utf8Native(str)}utf8Native(str){const length=str.length,uint8=this.uint8;let offset=this.x,pos=0;for(;pos<length;){let value=str.charCodeAt(pos++);if(4294967168&value){if(4294965248&value){if(value>=55296&&value<=56319&&pos<length){const extra=str.charCodeAt(pos);56320==(64512&extra)&&(pos++,value=((1023&value)<<10)+(1023&extra)+65536)}4294901760&value?(uint8[offset++]=value>>18&7|240,uint8[offset++]=value>>12&63|128,uint8[offset++]=value>>6&63|128):(uint8[offset++]=value>>12&15|224,uint8[offset++]=value>>6&63|128)}else uint8[offset++]=value>>6&31|192;uint8[offset++]=63&value|128}else uint8[offset++]=value}const writeLength=offset-this.x;return this.x=offset,writeLength}ascii(str){const length=str.length;this.ensureCapacity(length);const uint8=this.uint8;let x=this.x,pos=0;for(;pos<length;)uint8[x++]=str.charCodeAt(pos++);this.x=x}}},"./node_modules/@jsonjoy.com/util/lib/buffers/cmpUint8Array.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.cmpUint8Array=void 0;exports.cmpUint8Array=(a,b)=>{const length=a.length;if(length!==b.length)return!1;for(let i=0;i<length;i++)if(a[i]!==b[i])return!1;return!0}},"./node_modules/@jsonjoy.com/util/lib/buffers/f16.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeF16=void 0;const pow=Math.pow;exports.decodeF16=binary=>{const exponent=(31744&binary)>>10,fraction=1023&binary;return(binary>>15?-1:1)*(exponent?31===exponent?fraction?NaN:1/0:pow(2,exponent-15)*(1+fraction/1024):fraction/1024*6103515625e-14)}},"./node_modules/@jsonjoy.com/util/lib/buffers/isFloat32.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFloat32=void 0;const view=new DataView(new ArrayBuffer(4));exports.isFloat32=n=>(view.setFloat32(0,n),n===view.getFloat32(0))},"./node_modules/@jsonjoy.com/util/lib/buffers/isUint8Array.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.isUint8Array=void 0,exports.isUint8Array="function"==typeof Buffer?x=>x instanceof Uint8Array||Buffer.isBuffer(x):x=>x instanceof Uint8Array},"./node_modules/@jsonjoy.com/util/lib/buffers/printOctets.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.printOctets=void 0;exports.printOctets=(octets,max=16)=>{let str="";if(!octets.length)return str;octets[0]<16&&(str+="0"),str+=octets[0].toString(16);for(let i=1;i<octets.length&&i<max;i++){const n=octets[i];str+=" ",n<16&&(str+="0"),str+=n.toString(16)}return octets.length>max&&(str+=`â€¦ (${octets.length-max} more)`),str}},"./node_modules/@jsonjoy.com/util/lib/buffers/utf8/CachedUtf8Decoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CachedUtf8Decoder=void 0;const v10_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importDefault(__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeUtf8/v10.js"));let x=1+Math.round(4294967294*Math.random());class CacheItem{constructor(bytes,value){this.bytes=bytes,this.value=value}}exports.CachedUtf8Decoder=class CachedUtf8Decoder{constructor(){this.caches=[];for(let i=0;i<31;i++)this.caches.push([])}get(bytes,offset,size){const records=this.caches[size-1],len=records.length;FIND_CHUNK:for(let i=0;i<len;i++){const record=records[i],recordBytes=record.bytes;for(let j=0;j<size;j++)if(recordBytes[j]!==bytes[offset+j])continue FIND_CHUNK;return record.value}return null}store(bytes,value){const records=this.caches[bytes.length-1],record=new CacheItem(bytes,value);records.length>=16?records[function randomU32(min,max){return x^=x<<13,x^=x>>>17,x^=x<<5,(x>>>0)%(max-min+1)+min}(0,15)]=record:records.push(record)}decode(bytes,offset,size){if(!size)return"";const cachedValue=this.get(bytes,offset,size);if(null!==cachedValue)return cachedValue;const value=(0,v10_1.default)(bytes,offset,size),copy=Uint8Array.prototype.slice.call(bytes,offset,offset+size);return this.store(copy,value),value}}},"./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeAscii.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeAsciiMax15=exports.decodeAscii=void 0;const fromCharCode=String.fromCharCode;exports.decodeAscii=(src,position,length)=>{const bytes=[];for(let i=0;i<length;i++){const byte=src[position++];if(128&byte)return;bytes.push(byte)}return fromCharCode.apply(String,bytes)};exports.decodeAsciiMax15=(src,position,length)=>{if(length<4){if(length<2){if(0===length)return"";{const a=src[position++];return(128&a)>1?void(position-=1):fromCharCode(a)}}{const a=src[position++],b=src[position++];if((128&a)>0||(128&b)>0)return void(position-=2);if(length<3)return fromCharCode(a,b);const c=src[position++];return(128&c)>0?void(position-=3):fromCharCode(a,b,c)}}{const a=src[position++],b=src[position++],c=src[position++],d=src[position++];if((128&a)>0||(128&b)>0||(128&c)>0||(128&d)>0)return void(position-=4);if(length<6){if(4===length)return fromCharCode(a,b,c,d);{const e=src[position++];return(128&e)>0?void(position-=5):fromCharCode(a,b,c,d,e)}}if(length<8){const e=src[position++],f=src[position++];if((128&e)>0||(128&f)>0)return void(position-=6);if(length<7)return fromCharCode(a,b,c,d,e,f);const g=src[position++];return(128&g)>0?void(position-=7):fromCharCode(a,b,c,d,e,f,g)}{const e=src[position++],f=src[position++],g=src[position++],h=src[position++];if((128&e)>0||(128&f)>0||(128&g)>0||(128&h)>0)return void(position-=8);if(length<10){if(8===length)return fromCharCode(a,b,c,d,e,f,g,h);{const i=src[position++];return(128&i)>0?void(position-=9):fromCharCode(a,b,c,d,e,f,g,h,i)}}if(length<12){const i=src[position++],j=src[position++];if((128&i)>0||(128&j)>0)return void(position-=10);if(length<11)return fromCharCode(a,b,c,d,e,f,g,h,i,j);const k=src[position++];return(128&k)>0?void(position-=11):fromCharCode(a,b,c,d,e,f,g,h,i,j,k)}{const i=src[position++],j=src[position++],k=src[position++],l=src[position++];if((128&i)>0||(128&j)>0||(128&k)>0||(128&l)>0)return void(position-=12);if(length<14){if(12===length)return fromCharCode(a,b,c,d,e,f,g,h,i,j,k,l);{const m=src[position++];return(128&m)>0?void(position-=13):fromCharCode(a,b,c,d,e,f,g,h,i,j,k,l,m)}}{const m=src[position++],n=src[position++];if((128&m)>0||(128&n)>0)return void(position-=14);if(length<15)return fromCharCode(a,b,c,d,e,f,g,h,i,j,k,l,m,n);const o=src[position++];return(128&o)>0?void(position-=15):fromCharCode(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o)}}}}}},"./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeUtf8/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeUtf8=void 0;const v16_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importDefault(__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeUtf8/v16.js"));exports.decodeUtf8=v16_1.default},"./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeUtf8/v10.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0});const fromCharCode=String.fromCharCode;exports.default=(buf,start,length)=>{let offset=start;const end=offset+length;let str="";for(;offset<end;){const octet1=buf[offset++];if(!(128&octet1)){str+=fromCharCode(octet1);continue}const octet2=63&buf[offset++];if(192==(224&octet1)){str+=fromCharCode((31&octet1)<<6|octet2);continue}const octet3=63&buf[offset++];if(224!=(240&octet1))if(240==(248&octet1)){let unit=(7&octet1)<<18|octet2<<12|octet3<<6|63&buf[offset++];if(unit>65535){unit-=65536;const unit0=unit>>>10&1023|55296;unit=56320|1023&unit,str+=fromCharCode(unit0,unit)}else str+=fromCharCode(unit)}else str+=fromCharCode(octet1);else str+=fromCharCode((31&octet1)<<12|octet2<<6|octet3)}return str}},"./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeUtf8/v16.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),decodeAscii_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeAscii.js"),v18_1=tslib_1.__importDefault(__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeUtf8/v18.js")),hasBuffer="undefined"!=typeof Buffer,utf8Slice=hasBuffer?Buffer.prototype.utf8Slice:null,from=hasBuffer?Buffer.from:null,longDecoder=utf8Slice?(buf,start,length)=>utf8Slice.call(buf,start,start+length):from?(buf,start,length)=>from(buf).subarray(start,start+length).toString("utf8"):v18_1.default;exports.default=(buf,start,length)=>length<16?((buf,start,length)=>(0,decodeAscii_1.decodeAsciiMax15)(buf,start,length)??(0,v18_1.default)(buf,start,length))(buf,start,length):length<32?((buf,start,length)=>(0,decodeAscii_1.decodeAscii)(buf,start,length)??(0,v18_1.default)(buf,start,length))(buf,start,length):longDecoder(buf,start,length)},"./node_modules/@jsonjoy.com/util/lib/buffers/utf8/decodeUtf8/v18.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0});const fromCharCode=String.fromCharCode;exports.default=(buf,start,length)=>{let offset=start;const end=offset+length,points=[];for(;offset<end;){let code=buf[offset++];if(128&code){const octet2=63&buf[offset++];if(192==(224&code))code=(31&code)<<6|octet2;else{const octet3=63&buf[offset++];if(224==(240&code))code=(31&code)<<12|octet2<<6|octet3;else if(240==(248&code)){let unit=(7&code)<<18|octet2<<12|octet3<<6|63&buf[offset++];if(unit>65535){unit-=65536;const unit0=unit>>>10&1023|55296;code=56320|1023&unit,points.push(unit0)}else code=unit}}}points.push(code)}return fromCharCode.apply(String,points)}},"./node_modules/@jsonjoy.com/util/lib/buffers/utf8/sharedCachedUtf8Decoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const CachedUtf8Decoder_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/utf8/CachedUtf8Decoder.js");exports.default=new CachedUtf8Decoder_1.CachedUtf8Decoder},"./node_modules/@jsonjoy.com/util/lib/hasOwnProperty.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasOwnProperty=void 0;const has=Object.prototype.hasOwnProperty;exports.hasOwnProperty=function hasOwnProperty(obj,key){return has.call(obj,key)}},"./node_modules/@jsonjoy.com/util/lib/json-equal/deepEqual/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__exportStar(__webpack_require__("./node_modules/@jsonjoy.com/util/lib/json-equal/deepEqual/v6.js"),exports)},"./node_modules/@jsonjoy.com/util/lib/json-equal/deepEqual/v6.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepEqual=void 0;const isArray=Array.isArray,OBJ_PROTO=Object.prototype;exports.deepEqual=(a,b)=>{if(a===b)return!0;let length=0,i=0;if(isArray(a)){if(!isArray(b))return!1;if(length=a.length,length!==b.length)return!1;for(i=length;0!==i--;)if(!(0,exports.deepEqual)(a[i],b[i]))return!1;return!0}if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.__proto__!==OBJ_PROTO&&a instanceof Uint8Array){if(!(b instanceof Uint8Array))return!1;const length=a.length;if(length!==b.length)return!1;for(let i=0;i<length;i++)if(a[i]!==b[i])return!1;return!0}const keys=Object.keys(a);if(length=keys.length,length!==Object.keys(b).length)return!1;if(isArray(b))return!1;for(i=length;0!==i--;){const key=keys[i];if(!(0,exports.deepEqual)(a[key],b[key]))return!1}return!0}return!1}},"./node_modules/@jsonjoy.com/util/lib/sort/insertion.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.sort=void 0;exports.sort=arr=>{const length=arr.length;for(let i=1;i<length;i++){const currentValue=arr[i];let position=i;for(;0!==position&&arr[position-1]>currentValue;)arr[position]=arr[position-1],position--;arr[position]=currentValue}return arr}},"./node_modules/collaborative-editor/lib/Selection.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Selection=void 0;exports.Selection=class Selection{constructor(){this.start=null,this.end=null,this.dir=0,this.ts=0,this.tick=0,this.startId=null,this.endId=null}}},"./node_modules/collaborative-editor/lib/StrBinding.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.StrBinding=void 0;const util_1=__webpack_require__("./node_modules/collaborative-editor/lib/util.js"),Selection_1=__webpack_require__("./node_modules/collaborative-editor/lib/Selection.js"),util_2=__webpack_require__("./node_modules/collaborative-editor/lib/util.js"),str_1=__webpack_require__("./node_modules/json-joy/lib/util/diff/str.js");class StrBinding{constructor(str,editor){this.str=str,this.editor=editor,this.race=(0,util_1.invokeFirstOnly)(),this.onModelChange=()=>{this.race(()=>{this.syncFromModel(),this.saveSelection()})},this.onchange=(changes,verify)=>{this.race(()=>{if(changes instanceof Array&&changes.length>0){const str=this.str();if(!str)return;let applyChanges=!0;if(verify){let view=this.view;for(let i=0;i<length;i++){const change=changes[i],[position,remove,insert]=change;view=(0,util_2.applyChange)(view,position,remove,insert)}const editor=this.editor;editor.getLength&&view.length!==editor.getLength()||view!==editor.get()?applyChanges=!1:this.view=view}if(applyChanges){const length=changes.length;try{return str.api.transaction(()=>{let view=this.view;for(let i=0;i<length;i++){const change=changes[i],[position,remove,insert]=change;view=(0,util_2.applyChange)(view,position,remove,insert),remove&&str.del(position,remove),insert&&str.ins(position,insert)}this.view=view}),void this.saveSelection()}catch(_a){}}}this.syncFromEditor()})},this.pollingInterval=1e3,this._p=null,this.pollChanges=()=>{this._p=setTimeout(()=>{this.race(()=>{try{const view=this.view,editor=this.editor;(!!editor.getLength&&view.length!==editor.getLength()||view!==editor.get())&&this.syncFromEditor()}catch(_a){}this._p&&this.pollChanges()})},this.pollingInterval)},this._s=null,this.bind=polling=>{this.syncFromModel();const editor=this.editor;editor.onchange=this.onchange,editor.onselection=()=>this.saveSelection(),polling&&this.pollChanges(),this._s=this.str().api.onChange.listen(this.onModelChange)},this.unbind=()=>{var _a,_b,_c;this.stopPolling(),null===(_a=this._s)||void 0===_a||_a.call(this),null===(_c=(_b=this.editor).dispose)||void 0===_c||_c.call(_b)},this.view=str().view(),editor.selection=this.selection=new Selection_1.Selection}saveSelection(){var _a,_b,_c;const{editor,selection}=this,str=this.str();if(!str)return;const[selectionStart,selectionEnd,selectionDirection]=(null===(_a=editor.getSelection)||void 0===_a?void 0:_a.call(editor))||[-1,-1,0],{start,end}=selection,now=Date.now(),tick=str.api.model.tick;start===selectionStart&&end===selectionEnd&&(tick===selection.tick||now-selection.ts<3e3)||(selection.start=selectionStart,selection.end=selectionEnd,selection.dir=selectionDirection,selection.ts=now,selection.tick=tick,selection.startId="number"==typeof selectionStart&&null!==(_b=str.findId((null!=selectionStart?selectionStart:0)-1))&&void 0!==_b?_b:null,selection.endId="number"==typeof selectionEnd&&null!==(_c=str.findId((null!=selectionEnd?selectionEnd:0)-1))&&void 0!==_c?_c:null)}syncFromModel(){const editor=this.editor,str=this.str();if(!str)return;const view=(this.view=str.view())||"";if(editor.ins&&editor.del){const editorText=editor.get();if(view===editorText)return;const changes=(0,str_1.diff)(editorText,view),changeLen=changes.length;let pos=0;for(let i=0;i<changeLen;i++){const change=changes[i],[type,text]=change,len=text.length;switch(type){case-1:editor.del(pos,len);break;case 0:pos+=len;break;case 1:editor.ins(pos,text),pos+=len}}}else{editor.set(view);const{selection}=this;if(editor.setSelection){const start=selection.startId?str.findPos(selection.startId)+1:-1,end=selection.endId?str.findPos(selection.endId)+1:-1;editor.setSelection(start,end,selection.dir)}}}syncFromEditor(){var _a;let view=this.view;const value=this.editor.get();if(value===view)return;const selection=this.selection,caretPos=selection.start===selection.end&&null!==(_a=selection.start)&&void 0!==_a?_a:void 0,changes=(0,str_1.diffEdit)(view,value,caretPos||0),changeLen=changes.length,str=this.str();str&&(str.api.transaction(()=>{let pos=0;for(let i=0;i<changeLen;i++){const change=changes[i],[type,text]=change;switch(type){case-1:view=(0,util_2.applyChange)(view,pos,text.length,""),str.del(pos,text.length);break;case 0:pos+=text.length;break;case 1:view=(0,util_2.applyChange)(view,pos,0,text),str.ins(pos,text),pos+=text.length}}}),this.view=view,this.saveSelection())}stopPolling(){this._p&&clearTimeout(this._p),this._p=null}}exports.StrBinding=StrBinding,StrBinding.bind=(str,editor,polling)=>{const binding=new StrBinding(str,editor);return binding.syncFromModel(),binding.bind(polling),binding.unbind}},"./node_modules/collaborative-editor/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/collaborative-editor/lib/types.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/collaborative-editor/lib/Selection.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/collaborative-editor/lib/StrBinding.js"),exports)},"./node_modules/collaborative-editor/lib/types.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/collaborative-editor/lib/util.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.invokeFirstOnly=exports.applyChange=void 0;exports.applyChange=(view,position,remove,insert)=>view.slice(0,position)+insert+view.slice(position+remove);exports.invokeFirstOnly=()=>{let invoked=!1;return fn=>{if(!invoked){invoked=!0;try{fn()}finally{invoked=!1}}}}},"./node_modules/json-joy/lib/json-crdt-diff/JsonCrdtDiff.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonCrdtDiff=exports.DiffError=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),deepEqual_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/json-equal/deepEqual/index.js"),cmpUint8Array_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/cmpUint8Array.js"),json_crdt_patch_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/index.js"),nodes_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/index.js"),str=tslib_1.__importStar(__webpack_require__("./node_modules/json-joy/lib/util/diff/str.js")),bin=tslib_1.__importStar(__webpack_require__("./node_modules/json-joy/lib/util/diff/bin.js")),line=tslib_1.__importStar(__webpack_require__("./node_modules/json-joy/lib/util/diff/line.js")),structHashCrdt_1=__webpack_require__("./node_modules/json-joy/lib/json-hash/structHashCrdt.js"),json_hash_1=__webpack_require__("./node_modules/json-joy/lib/json-hash/index.js");class DiffError extends Error{constructor(message="DIFF"){super(message)}}exports.DiffError=DiffError;exports.JsonCrdtDiff=class JsonCrdtDiff{constructor(model){this.model=model,this.builder=new json_crdt_patch_1.PatchBuilder(model.clock.clone())}diffStr(src,dst){const view=src.view();if(view===dst)return;const builder=this.builder;str.apply(str.diff(view,dst),view.length,(pos,txt)=>builder.insStr(src.id,pos?src.find(pos-1):src.id,txt),(pos,len)=>builder.del(src.id,src.findInterval(pos,len)))}diffBin(src,dst){const view=src.view();if((0,cmpUint8Array_1.cmpUint8Array)(view,dst))return;const builder=this.builder;bin.apply(bin.diff(view,dst),view.length,(pos,txt)=>builder.insBin(src.id,pos?src.find(pos-1):src.id,txt),(pos,len)=>builder.del(src.id,src.findInterval(pos,len)))}diffArr(src,dst){const srcLines=[];src.children(node=>{srcLines.push((0,structHashCrdt_1.structHashCrdt)(node))});const dstLines=[],dstLength=dst.length;for(let i=0;i<dstLength;i++)dstLines.push((0,json_hash_1.structHash)(dst[i]));const linePatch=line.diff(srcLines,dstLines);if(!linePatch.length)return;const inserts=[],deletes=[];for(let i=linePatch.length-1;i>=0;i--){const[type,posSrc,posDst]=linePatch[i];switch(type){case 0:break;case 1:{const view=dst[posDst],after=posSrc>=0?src.find(posSrc):src.id;if(!after)throw new DiffError;inserts.push([after,[view]]);break}case-1:{const span=src.findInterval(posSrc,1);if(!span||!span.length)throw new DiffError;deletes.push(...span);break}case 2:{const view=dst[posDst];try{this.diffAny(src.getNode(posSrc),view)}catch(error){if(!(error instanceof DiffError))throw error;{const span=src.findInterval(posSrc,1);deletes.push(...span);const after=posSrc?src.find(posSrc-1):src.id;if(!after)throw new DiffError;inserts.push([after,[view]])}}}}}const builder=this.builder,length=inserts.length;for(let i=0;i<length;i++){const[after,views]=inserts[i];builder.insArr(src.id,after,views.map(view=>builder.json(view)))}deletes.length&&builder.del(src.id,deletes)}diffObj(src,dst){const builder=this.builder,inserts=[],srcKeys=new Set;src.forEach(key=>{srcKeys.add(key);void 0===dst[key]&&inserts.push([key,builder.con(void 0)])});const keys=Object.keys(dst),length=keys.length;for(let i=0;i<length;i++){const key=keys[i],dstValue=dst[key];if(srcKeys.has(key)){const child=src.get(key);if(child)try{this.diffAny(child,dstValue);continue}catch(error){if(!(error instanceof DiffError))throw error}}inserts.push([key,src.get(key)instanceof nodes_1.ConNode?builder.con(dstValue):builder.constOrJson(dstValue)])}inserts.length&&builder.insObj(src.id,inserts)}diffVec(src,dst){const builder=this.builder,edits=[],elements=src.elements,srcLength=elements.length,dstLength=dst.length,index=src.doc.index,min=Math.min(srcLength,dstLength);for(let i=dstLength;i<srcLength;i++){const id=elements[i];if(id){const child=index.get(id);if(!child||child instanceof nodes_1.ConNode&&void 0===child.val)return;edits.push([i,builder.con(void 0)])}}for(let i=0;i<min;i++){const value=dst[i],child=src.get(i);if(child)try{this.diffAny(child,value);continue}catch(error){if(!(error instanceof DiffError))throw error}edits.push([i,builder.constOrJson(value)])}for(let i=srcLength;i<dstLength;i++)edits.push([i,builder.constOrJson(dst[i])]);edits.length&&builder.insVec(src.id,edits)}diffVal(src,dst){try{this.diffAny(src.node(),dst)}catch(error){if(!(error instanceof DiffError))throw error;{const builder=this.builder;builder.setVal(src.id,builder.constOrJson(dst))}}}diffAny(src,dst){if(src instanceof nodes_1.ConNode){if(src.val!==dst&&!(0,deepEqual_1.deepEqual)(src.val,dst))throw new DiffError}else if(src instanceof nodes_1.StrNode){if("string"!=typeof dst)throw new DiffError;this.diffStr(src,dst)}else if(src instanceof nodes_1.ObjNode){if(!dst||"object"!=typeof dst||Array.isArray(dst))throw new DiffError;this.diffObj(src,dst)}else if(src instanceof nodes_1.ValNode)this.diffVal(src,dst);else if(src instanceof nodes_1.ArrNode){if(!Array.isArray(dst))throw new DiffError;this.diffArr(src,dst)}else if(src instanceof nodes_1.VecNode){if(!Array.isArray(dst))throw new DiffError;this.diffVec(src,dst)}else{if(!(src instanceof nodes_1.BinNode))throw new DiffError;if(!(dst instanceof Uint8Array))throw new DiffError;this.diffBin(src,dst)}}diff(src,dst){return this.diffAny(src,dst),this.builder.flush()}}},"./node_modules/json-joy/lib/json-crdt-diff/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.merge=exports.diff=void 0;const JsonCrdtDiff_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-diff/JsonCrdtDiff.js");exports.diff=(src,dst)=>{const patch=new JsonCrdtDiff_1.JsonCrdtDiff(src.api.model).diff(src.node,dst);return patch.ops.length?patch:void 0};exports.merge=(src,dst)=>{const patch=(0,exports.diff)(src,dst);return patch&&src.api.model.applyPatch(patch),patch}},"./node_modules/json-joy/lib/json-crdt-patch/Patch.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Patch=void 0;const operations=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/operations.js")),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),binary_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/binary/index.js");class Patch{constructor(){this.ops=[],this.meta=void 0}static fromBinary(data){return(0,binary_1.decode)(data)}getId(){const op=this.ops[0];if(op)return op.id}span(){let span=0;for(const op of this.ops)span+=op.span();return span}nextTime(){const ops=this.ops,length=ops.length;if(!length)return 0;const lastOp=ops[length-1];return lastOp.id.time+lastOp.span()}rewriteTime(ts){const patch=new Patch,ops=this.ops,length=ops.length,patchOps=patch.ops;for(let i=0;i<length;i++){const op=ops[i];op instanceof operations.DelOp?patchOps.push(new operations.DelOp(ts(op.id),ts(op.obj),op.what)):op instanceof operations.NewConOp?patchOps.push(new operations.NewConOp(ts(op.id),op.val instanceof clock_1.Timestamp?ts(op.val):op.val)):op instanceof operations.NewVecOp?patchOps.push(new operations.NewVecOp(ts(op.id))):op instanceof operations.NewValOp?patchOps.push(new operations.NewValOp(ts(op.id))):op instanceof operations.NewObjOp?patchOps.push(new operations.NewObjOp(ts(op.id))):op instanceof operations.NewStrOp?patchOps.push(new operations.NewStrOp(ts(op.id))):op instanceof operations.NewBinOp?patchOps.push(new operations.NewBinOp(ts(op.id))):op instanceof operations.NewArrOp?patchOps.push(new operations.NewArrOp(ts(op.id))):op instanceof operations.InsArrOp?patchOps.push(new operations.InsArrOp(ts(op.id),ts(op.obj),ts(op.ref),op.data.map(ts))):op instanceof operations.UpdArrOp?patchOps.push(new operations.UpdArrOp(ts(op.id),ts(op.obj),ts(op.ref),ts(op.val))):op instanceof operations.InsStrOp?patchOps.push(new operations.InsStrOp(ts(op.id),ts(op.obj),ts(op.ref),op.data)):op instanceof operations.InsBinOp?patchOps.push(new operations.InsBinOp(ts(op.id),ts(op.obj),ts(op.ref),op.data)):op instanceof operations.InsValOp?patchOps.push(new operations.InsValOp(ts(op.id),ts(op.obj),ts(op.val))):op instanceof operations.InsObjOp?patchOps.push(new operations.InsObjOp(ts(op.id),ts(op.obj),op.data.map(([key,value])=>[key,ts(value)]))):op instanceof operations.InsVecOp?patchOps.push(new operations.InsVecOp(ts(op.id),ts(op.obj),op.data.map(([key,value])=>[key,ts(value)]))):op instanceof operations.NopOp&&patchOps.push(new operations.NopOp(ts(op.id),op.len))}return patch}rebase(newTime,transformAfter){const id=this.getId();if(!id)throw new Error("EMPTY_PATCH");const sid=id.sid,patchStartTime=id.time;if(transformAfter??(transformAfter=patchStartTime),patchStartTime===newTime)return this;const delta=newTime-patchStartTime;return this.rewriteTime(id=>{if(id.sid!==sid)return id;const time=id.time;return time<transformAfter?id:(0,clock_1.ts)(sid,time+delta)})}clone(){return this.rewriteTime(id=>id)}toBinary(){return(0,binary_1.encode)(this)}toString(tab=""){const id=this.getId();return`Patch ${id?(0,clock_1.printTs)(id):"(nil)"}!${this.span()}`+(0,printTree_1.printTree)(tab,this.ops.map(op=>tab=>op.toString(tab)))}}exports.Patch=Patch},"./node_modules/json-joy/lib/json-crdt-patch/PatchBuilder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PatchBuilder=void 0;const operations=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/operations.js")),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),isUint8Array_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/isUint8Array.js"),Patch_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/Patch.js"),constants_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/constants.js"),schema_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/schema.js"),maybeConst=x=>{switch(typeof x){case"number":case"boolean":return!0;default:return null===x}};exports.PatchBuilder=class PatchBuilder{constructor(clock){this.clock=clock,this.patch=new Patch_1.Patch}nextTime(){return this.patch.nextTime()||this.clock.time}flush(){const patch=this.patch;return this.patch=new Patch_1.Patch,patch}obj(){this.pad();const id=this.clock.tick(1);return this.patch.ops.push(new operations.NewObjOp(id)),id}arr(){this.pad();const id=this.clock.tick(1);return this.patch.ops.push(new operations.NewArrOp(id)),id}vec(){this.pad();const id=this.clock.tick(1);return this.patch.ops.push(new operations.NewVecOp(id)),id}str(){this.pad();const id=this.clock.tick(1);return this.patch.ops.push(new operations.NewStrOp(id)),id}bin(){this.pad();const id=this.clock.tick(1);return this.patch.ops.push(new operations.NewBinOp(id)),id}con(value){this.pad();const id=this.clock.tick(1);return this.patch.ops.push(new operations.NewConOp(id,value)),id}val(){this.pad();const id=this.clock.tick(1);return this.patch.ops.push(new operations.NewValOp(id)),id}root(val){return this.setVal(constants_1.ORIGIN,val)}insObj(obj,data){if(!data.length)throw new Error("EMPTY_TUPLES");this.pad();const id=this.clock.tick(1),op=new operations.InsObjOp(id,obj,data),span=op.span();return span>1&&this.clock.tick(span-1),this.patch.ops.push(op),id}insVec(obj,data){if(!data.length)throw new Error("EMPTY_TUPLES");this.pad();const id=this.clock.tick(1),op=new operations.InsVecOp(id,obj,data),span=op.span();return span>1&&this.clock.tick(span-1),this.patch.ops.push(op),id}setVal(obj,val){this.pad();const id=this.clock.tick(1),op=new operations.InsValOp(id,obj,val);return this.patch.ops.push(op),id}insStr(obj,ref,data){if(!data.length)throw new Error("EMPTY_STRING");this.pad();const id=this.clock.tick(1),op=new operations.InsStrOp(id,obj,ref,data),span=op.span();return span>1&&this.clock.tick(span-1),this.patch.ops.push(op),id}insBin(obj,ref,data){if(!data.length)throw new Error("EMPTY_BINARY");this.pad();const id=this.clock.tick(1),op=new operations.InsBinOp(id,obj,ref,data),span=op.span();return span>1&&this.clock.tick(span-1),this.patch.ops.push(op),id}insArr(arr,ref,data){this.pad();const id=this.clock.tick(1),op=new operations.InsArrOp(id,arr,ref,data),span=op.span();return span>1&&this.clock.tick(span-1),this.patch.ops.push(op),id}updArr(arr,ref,val){this.pad();const id=this.clock.tick(1),op=new operations.UpdArrOp(id,arr,ref,val);return this.patch.ops.push(op),id}del(obj,what){this.pad();const id=this.clock.tick(1);return this.patch.ops.push(new operations.DelOp(id,obj,what)),id}nop(span){this.pad();const id=this.clock.tick(span);return this.patch.ops.push(new operations.NopOp(id,span)),id}jsonObj(obj){const id=this.obj(),keys=Object.keys(obj);if(keys.length){const tuples=[];for(const k of keys){const value=obj[k],valueId=value instanceof clock_1.Timestamp?value:maybeConst(value)?this.con(value):this.json(value);tuples.push([k,valueId])}this.insObj(id,tuples)}return id}jsonArr(arr){const id=this.arr();if(arr.length){const values=[];for(const el of arr)values.push(this.json(el));this.insArr(id,id,values)}return id}jsonStr(str){const id=this.str();return str&&this.insStr(id,id,str),id}jsonBin(bin){const id=this.bin();return bin.length&&this.insBin(id,id,bin),id}jsonVal(value){const valId=this.val(),id=this.con(value);return this.setVal(valId,id),valId}json(json){if(json instanceof clock_1.Timestamp)return json;if(void 0===json)return this.con(json);if(json instanceof Array)return this.jsonArr(json);if((0,isUint8Array_1.isUint8Array)(json))return this.jsonBin(json);if(json instanceof schema_1.NodeBuilder)return json.build(this);switch(typeof json){case"object":return null===json?this.jsonVal(json):this.jsonObj(json);case"string":return this.jsonStr(json);case"number":case"boolean":return this.jsonVal(json)}throw new Error("INVALID_JSON")}constOrJson(value){return value instanceof clock_1.Timestamp?value:maybeConst(value)?this.con(value):this.json(value)}maybeConst(value){return value instanceof clock_1.Timestamp?value:this.con(value)}pad(){const nextTime=this.patch.nextTime();if(!nextTime)return;const drift=this.clock.time-nextTime;if(drift>0){const id=(0,clock_1.ts)(this.clock.sid,nextTime),padding=new operations.NopOp(id,drift);this.patch.ops.push(padding)}}}},"./node_modules/json-joy/lib/json-crdt-patch/clock/clock.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServerClockVector=exports.ClockVector=exports.LogicalClock=exports.interval=exports.printTs=exports.containsId=exports.contains=exports.compare=exports.equal=exports.tick=exports.tss=exports.ts=exports.Timespan=exports.Timestamp=void 0;class Timestamp{constructor(sid,time){this.sid=sid,this.time=time}}exports.Timestamp=Timestamp;class Timespan{constructor(sid,time,span){this.sid=sid,this.time=time,this.span=span}}exports.Timespan=Timespan;exports.ts=(sid,time)=>new Timestamp(sid,time);exports.tss=(sid,time,span)=>new Timespan(sid,time,span);exports.tick=(stamp,cycles)=>(0,exports.ts)(stamp.sid,stamp.time+cycles);exports.equal=(ts1,ts2)=>ts1.time===ts2.time&&ts1.sid===ts2.sid;exports.compare=(ts1,ts2)=>{const t1=ts1.time,t2=ts2.time;if(t1>t2)return 1;if(t1<t2)return-1;const s1=ts1.sid,s2=ts2.sid;return s1>s2?1:s1<s2?-1:0};exports.contains=(ts1,span1,ts2,span2)=>{if(ts1.sid!==ts2.sid)return!1;const t1=ts1.time,t2=ts2.time;return!(t1>t2)&&!(t1+span1<t2+span2)};exports.containsId=(ts1,span1,ts2)=>{if(ts1.sid!==ts2.sid)return!1;const t1=ts1.time,t2=ts2.time;return!(t1>t2)&&!(t1+span1<t2+1)};exports.printTs=id=>{if(1===id.sid)return"."+id.time;let session=""+id.sid;return session.length>4&&(session=".."+session.slice(session.length-4)),session+"."+id.time};exports.interval=(ts,tick,span)=>new Timespan(ts.sid,ts.time+tick,span);class LogicalClock extends Timestamp{tick(cycles){const timestamp=new Timestamp(this.sid,this.time);return this.time+=cycles,timestamp}}exports.LogicalClock=LogicalClock;class ClockVector extends LogicalClock{constructor(){super(...arguments),this.peers=new Map}observe(id,span){const edge=id.time+span-1,sid=id.sid;if(sid!==this.sid){const clock=this.peers.get(id.sid);clock?edge>clock.time&&(clock.time=edge):this.peers.set(id.sid,(0,exports.ts)(sid,edge))}edge>=this.time&&(this.time=edge+1)}clone(){return this.fork(this.sid)}fork(sessionId){const clock=new ClockVector(sessionId,this.time);return sessionId!==this.sid&&clock.observe((0,exports.tick)(this,-1),1),this.peers.forEach(peer=>{clock.observe(peer,1)}),clock}toString(tab=""){const last=this.peers.size;let i=1,lines="";return this.peers.forEach(clock=>{lines+=`\n${tab}${i===last?"â””â”€":"â”œâ”€"} ${clock.sid}.${clock.time}`,i++}),`clock ${this.sid}.${this.time}${lines}`}}exports.ClockVector=ClockVector;class ServerClockVector extends LogicalClock{constructor(){super(...arguments),this.peers=new Map}observe(ts,span){if(ts.sid>8)throw new Error("INVALID_SERVER_SESSION");if(this.time<ts.time)throw new Error("TIME_TRAVEL");const time=ts.time+span;time>this.time&&(this.time=time)}clone(){return this.fork()}fork(){return new ServerClockVector(1,this.time)}toString(){return`clock ${this.sid}.${this.time}`}}exports.ServerClockVector=ServerClockVector},"./node_modules/json-joy/lib/json-crdt-patch/clock/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/types.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/clock.js"),exports)},"./node_modules/json-joy/lib/json-crdt-patch/clock/types.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/json-joy/lib/json-crdt-patch/codec/binary/Decoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Decoder=void 0;const CrdtReader_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/util/binary/CrdtReader.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),PatchBuilder_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/PatchBuilder.js"),CborDecoder_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborDecoder.js");class Decoder extends CborDecoder_1.CborDecoder{constructor(reader=new CrdtReader_1.CrdtReader){super(reader)}decode(data){return this.reader.reset(data),this.readPatch()}readPatch(){const reader=this.reader,sid=reader.vu57(),time=reader.vu57(),clock=1===sid?new clock_1.ServerClockVector(1,time):new clock_1.ClockVector(sid,time);this.patchSid=clock.sid;const builder=this.builder=new PatchBuilder_1.PatchBuilder(clock),map=this.val();return map instanceof Array&&(builder.patch.meta=map[0]),this.decodeOperations(),builder.patch}decodeId(){const reader=this.reader,[isSessionDifferent,x]=reader.b1vu56();return isSessionDifferent?new clock_1.Timestamp(reader.vu57(),x):new clock_1.Timestamp(this.patchSid,x)}decodeTss(){const id=this.decodeId(),span=this.reader.vu57();return(0,clock_1.interval)(id,0,span)}decodeOperations(){const length=this.reader.vu57();for(let i=0;i<length;i++)this.decodeOperation()}decodeOperation(){const builder=this.builder,reader=this.reader,octet=reader.u8();switch(octet>>3){case 0:{const length=7&octet;builder.con(length?this.decodeId():this.val());break}case 1:builder.val();break;case 2:builder.obj();break;case 3:builder.vec();break;case 4:builder.str();break;case 5:builder.bin();break;case 6:builder.arr();break;case 9:{const obj=this.decodeId(),val=this.decodeId();builder.setVal(obj,val);break}case 10:{const length=7&octet||reader.vu57(),obj=this.decodeId(),tuples=[];for(let i=0;i<length;i++){const key=this.val();if("string"!=typeof key)continue;const value=this.decodeId();tuples.push([key,value])}builder.insObj(obj,tuples);break}case 11:{const length=7&octet||reader.vu57(),obj=this.decodeId(),tuples=[];for(let i=0;i<length;i++){const index=this.val();if("number"!=typeof index)continue;const value=this.decodeId();tuples.push([index,value])}builder.insVec(obj,tuples);break}case 12:{const length=7&octet||reader.vu57(),obj=this.decodeId(),after=this.decodeId(),str=reader.utf8(length);builder.insStr(obj,after,str);break}case 13:{const length=7&octet||reader.vu57(),obj=this.decodeId(),after=this.decodeId(),buf=reader.buf(length);if(!(buf instanceof Uint8Array))return;builder.insBin(obj,after,buf);break}case 14:{const length=7&octet||reader.vu57(),obj=this.decodeId(),after=this.decodeId(),elements=[];for(let i=0;i<length;i++)elements.push(this.decodeId());builder.insArr(obj,after,elements);break}case 15:{const obj=this.decodeId(),ref=this.decodeId(),val=this.decodeId();builder.updArr(obj,ref,val);break}case 16:{const length=7&octet||reader.vu57(),obj=this.decodeId(),what=[];for(let i=0;i<length;i++)what.push(this.decodeTss());builder.del(obj,what);break}case 17:{const length=7&octet||reader.vu57();builder.nop(length);break}default:throw new Error("UNKNOWN_OP")}}}exports.Decoder=Decoder},"./node_modules/json-joy/lib/json-crdt-patch/codec/binary/Encoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Encoder=void 0;const operations=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/operations.js")),CrdtWriter_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/util/binary/CrdtWriter.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),CborEncoder_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborEncoder.js");class Encoder extends CborEncoder_1.CborEncoder{constructor(writer=new CrdtWriter_1.CrdtWriter){super(writer),this.writer=writer,this.patchSid=0}encode(patch){this.writer.reset();const id=patch.getId(),sid=this.patchSid=id.sid,writer=this.writer;writer.vu57(sid),writer.vu57(id.time);const meta=patch.meta;return void 0===meta?this.writeUndef():this.writeArr([meta]),this.encodeOperations(patch),writer.flush()}encodeOperations(patch){const ops=patch.ops,length=ops.length;this.writer.vu57(length);for(let i=0;i<length;i++)this.encodeOperation(ops[i])}encodeId(id){const sessionId=id.sid,time=id.time,writer=this.writer;sessionId===this.patchSid?writer.b1vu56(0,time):(writer.b1vu56(1,time),writer.vu57(sessionId))}encodeTss(span){this.encodeId(span),this.writer.vu57(span.span)}writeInsStr(length,obj,ref,str){const writer=this.writer;return length<=7?writer.u8(96+length):(writer.u8(96),writer.vu57(length)),this.encodeId(obj),this.encodeId(ref),writer.utf8(str)}encodeOperation(op){const writer=this.writer;switch(op.constructor){case operations.NewConOp:{const val=op.val;val instanceof clock_1.Timestamp?(writer.u8(1),this.encodeId(val)):(writer.u8(0),this.writeAny(val));break}case operations.NewValOp:writer.u8(8);break;case operations.NewObjOp:writer.u8(16);break;case operations.NewVecOp:writer.u8(24);break;case operations.NewStrOp:writer.u8(32);break;case operations.NewBinOp:writer.u8(40);break;case operations.NewArrOp:writer.u8(48);break;case operations.InsValOp:{const operation=op;writer.u8(72),this.encodeId(operation.obj),this.encodeId(operation.val);break}case operations.InsObjOp:{const operation=op,data=operation.data,length=data.length;length<=7?writer.u8(80+length):(writer.u8(80),writer.vu57(length)),this.encodeId(operation.obj);for(let i=0;i<length;i++){const tuple=data[i];this.writeStr(tuple[0]),this.encodeId(tuple[1])}break}case operations.InsVecOp:{const operation=op,data=operation.data,length=data.length;length<=7?writer.u8(88+length):(writer.u8(88),writer.vu57(length)),this.encodeId(operation.obj);for(let i=0;i<length;i++){const tuple=data[i];writer.u8(tuple[0]),this.encodeId(tuple[1])}break}case operations.InsStrOp:{const operation=op,obj=operation.obj,ref=operation.ref,str=operation.data,len1=str.length;writer.ensureCapacity(24+4*len1);const x=writer.x,len2=this.writeInsStr(len1,obj,ref,str);len1!==len2&&(writer.x=x,this.writeInsStr(len2,obj,ref,str));break}case operations.InsBinOp:{const operation=op,buf=operation.data,length=buf.length;length<=7?writer.u8(104+length):(writer.u8(104),writer.vu57(length)),this.encodeId(operation.obj),this.encodeId(operation.ref),writer.buf(buf,length);break}case operations.InsArrOp:{const operation=op,elements=operation.data,length=elements.length;length<=7?writer.u8(112+length):(writer.u8(112),writer.vu57(length)),this.encodeId(operation.obj),this.encodeId(operation.ref);for(let i=0;i<length;i++)this.encodeId(elements[i]);break}case operations.UpdArrOp:{const operation=op;writer.u8(120),this.encodeId(operation.obj),this.encodeId(operation.ref),this.encodeId(operation.val);break}case operations.DelOp:{const operation=op,what=operation.what,length=what.length;length<=7?writer.u8(128+length):(writer.u8(128),writer.vu57(length)),this.encodeId(operation.obj);for(let i=0;i<length;i++)this.encodeTss(what[i]);break}case operations.NopOp:{const length=op.len;length<=7?writer.u8(136+length):(writer.u8(136),writer.vu57(length));break}default:throw new Error("UNKNOWN_OP")}}}exports.Encoder=Encoder},"./node_modules/json-joy/lib/json-crdt-patch/codec/binary/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/binary/Encoder.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/binary/Decoder.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/binary/shared.js"),exports)},"./node_modules/json-joy/lib/json-crdt-patch/codec/binary/shared.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=exports.decoder=exports.encode=exports.encoder=void 0;const Encoder_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/binary/Encoder.js"),Decoder_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/binary/Decoder.js"),writer=new(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/util/binary/CrdtWriter.js").CrdtWriter)(4096);exports.encoder=new Encoder_1.Encoder(writer);exports.encode=patch=>exports.encoder.encode(patch),exports.decoder=new Decoder_1.Decoder;exports.decode=buf=>exports.decoder.decode(buf)},"./node_modules/json-joy/lib/json-crdt-patch/codec/clock/ClockDecoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClockDecoder=void 0;const clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js");class ClockDecoder{static fromArr(arr){const decoder=new ClockDecoder(arr[0],arr[1]),length=arr.length;for(let i=2;i<length;i+=2)decoder.pushTuple(arr[i],arr[i+1]);return decoder}constructor(sid,time){this.table=[],this.clock=new clock_1.ClockVector(sid,time+1),this.table.push((0,clock_1.ts)(sid,time))}pushTuple(sid,time){const id=(0,clock_1.ts)(sid,time);this.clock.observe(id,1),this.table.push(id)}decodeId(sessionIndex,timeDiff){if(!sessionIndex)return(0,clock_1.ts)(0,timeDiff);const clock=this.table[sessionIndex-1];if(!clock)throw new Error("INVALID_CLOCK_TABLE");return(0,clock_1.ts)(clock.sid,clock.time-timeDiff)}}exports.ClockDecoder=ClockDecoder},"./node_modules/json-joy/lib/json-crdt-patch/codec/clock/ClockEncoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClockEncoder=void 0;const clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),RelativeTimestamp_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/clock/RelativeTimestamp.js");class ClockTableEntry{constructor(index,clock){this.index=index,this.clock=clock}}exports.ClockEncoder=class ClockEncoder{constructor(){this.table=new Map,this.index=1,this.clock=null}reset(clock){this.index=1,this.clock=clock;const entry=new ClockTableEntry(this.index++,(0,clock_1.tick)(clock,-1));this.table.clear(),this.table.set(clock.sid,entry)}append(ts){const time=ts.time,sid=ts.sid;let entry=this.table.get(sid);if(!entry){let clock=this.clock.peers.get(sid);clock||(clock=new clock_1.Timestamp(sid,this.clock.time-1)),entry=new ClockTableEntry(this.index++,clock),this.table.set(sid,entry)}const timeDiff=entry.clock.time-time;if(timeDiff<0)throw new Error("TIME_TRAVEL");return new RelativeTimestamp_1.RelativeTimestamp(entry.index,timeDiff)}toJson(){const out=[];return this.table.forEach(entry=>{const clock=entry.clock;out.push(clock.sid,clock.time)}),out}}},"./node_modules/json-joy/lib/json-crdt-patch/codec/clock/RelativeTimestamp.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RelativeTimestamp=void 0;exports.RelativeTimestamp=class RelativeTimestamp{constructor(sessionIndex,timeDiff){this.sessionIndex=sessionIndex,this.timeDiff=timeDiff}}},"./node_modules/json-joy/lib/json-crdt-patch/constants.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ORIGIN=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js");tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/enums.js"),exports),exports.ORIGIN=(0,clock_1.ts)(0,0)},"./node_modules/json-joy/lib/json-crdt-patch/enums.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/json-joy/lib/json-crdt-patch/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/types.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/operations.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/Patch.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/PatchBuilder.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/schema.js"),exports)},"./node_modules/json-joy/lib/json-crdt-patch/operations.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NopOp=exports.DelOp=exports.UpdArrOp=exports.InsArrOp=exports.InsBinOp=exports.InsStrOp=exports.InsVecOp=exports.InsObjOp=exports.InsValOp=exports.NewArrOp=exports.NewBinOp=exports.NewStrOp=exports.NewVecOp=exports.NewObjOp=exports.NewValOp=exports.NewConOp=void 0;const printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js");class Op{constructor(id){this.id=id}span(){return 1}toString(){let str=this.name()+" "+(0,clock_1.printTs)(this.id);const span=this.span();return span>1&&(str+="!"+span),str}}exports.NewConOp=class NewConOp extends Op{constructor(id,val){super(id),this.id=id,this.val=val}name(){return"new_con"}toString(){const val=this.val,valFormatted=val instanceof clock_1.Timestamp?`{ ${(0,clock_1.printTs)(val)} }`:val instanceof Uint8Array?val.length<13?`Uint8Array { ${(""+val).replaceAll(",",", ")} }`:`Uint8Array(${val.length})`:`{ ${JSON.stringify(val)} }`;return super.toString()+" "+valFormatted}};exports.NewValOp=class NewValOp extends Op{name(){return"new_val"}};exports.NewObjOp=class NewObjOp extends Op{name(){return"new_obj"}};exports.NewVecOp=class NewVecOp extends Op{name(){return"new_vec"}};exports.NewStrOp=class NewStrOp extends Op{name(){return"new_str"}};exports.NewBinOp=class NewBinOp extends Op{name(){return"new_bin"}};exports.NewArrOp=class NewArrOp extends Op{name(){return"new_arr"}};exports.InsValOp=class InsValOp extends Op{constructor(id,obj,val){super(id),this.id=id,this.obj=obj,this.val=val}name(){return"ins_val"}toString(){return super.toString()+`, obj = ${(0,clock_1.printTs)(this.obj)}, val = ${(0,clock_1.printTs)(this.val)}`}};exports.InsObjOp=class InsObjOp extends Op{constructor(id,obj,data){super(id),this.id=id,this.obj=obj,this.data=data}name(){return"ins_obj"}toString(tab=""){return super.toString()+`, obj = ${(0,clock_1.printTs)(this.obj)}`+(0,printTree_1.printTree)(tab,this.data.map(item=>tab=>`${JSON.stringify(item[0])}: ${(0,clock_1.printTs)(item[1])}`))}};exports.InsVecOp=class InsVecOp extends Op{constructor(id,obj,data){super(id),this.id=id,this.obj=obj,this.data=data}name(){return"ins_vec"}toString(tab=""){return super.toString()+`, obj = ${(0,clock_1.printTs)(this.obj)}`+(0,printTree_1.printTree)(tab,this.data.map(item=>tab=>`${item[0]}: ${(0,clock_1.printTs)(item[1])}`))}};exports.InsStrOp=class InsStrOp extends Op{constructor(id,obj,ref,data){super(id),this.id=id,this.obj=obj,this.ref=ref,this.data=data}span(){return this.data.length}name(){return"ins_str"}toString(){return super.toString()+`, obj = ${(0,clock_1.printTs)(this.obj)} { ${(0,clock_1.printTs)(this.ref)} â† ${JSON.stringify(this.data)} }`}};exports.InsBinOp=class InsBinOp extends Op{constructor(id,obj,ref,data){super(id),this.id=id,this.obj=obj,this.ref=ref,this.data=data}span(){return this.data.length}name(){return"ins_bin"}toString(){const ref=(0,clock_1.printTs)(this.ref);return super.toString()+`, obj = ${(0,clock_1.printTs)(this.obj)} { ${ref} â† ${this.data} }`}};exports.InsArrOp=class InsArrOp extends Op{constructor(id,obj,ref,data){super(id),this.id=id,this.obj=obj,this.ref=ref,this.data=data}span(){return this.data.length}name(){return"ins_arr"}toString(){const obj=(0,clock_1.printTs)(this.obj),ref=(0,clock_1.printTs)(this.ref),data=this.data.map(clock_1.printTs).join(", ");return super.toString()+", obj = "+obj+" { "+ref+" â† "+data+" }"}};exports.UpdArrOp=class UpdArrOp extends Op{constructor(id,obj,ref,val){super(id),this.id=id,this.obj=obj,this.ref=ref,this.val=val}name(){return"upd_arr"}toString(){const obj=(0,clock_1.printTs)(this.obj),ref=(0,clock_1.printTs)(this.ref),val=(0,clock_1.printTs)(this.val);return super.toString()+", obj = "+obj+" { "+ref+": "+val+" }"}};exports.DelOp=class DelOp extends Op{constructor(id,obj,what){super(id),this.id=id,this.obj=obj,this.what=what}name(){return"del"}toString(){const spans=this.what.map(span=>(0,clock_1.printTs)(span)+"!"+span.span).join(", ");return super.toString()+`, obj = ${(0,clock_1.printTs)(this.obj)} { ${spans} }`}};exports.NopOp=class NopOp extends Op{constructor(id,len){super(id),this.id=id,this.len=len}span(){return this.len}name(){return"nop"}}},"./node_modules/json-joy/lib/json-crdt-patch/schema.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.s=exports.schema=exports.nodes=exports.NodeBuilder=void 0;const isUint8Array_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/isUint8Array.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js");class NodeBuilder{constructor(build){this.build=build}}var nodes;exports.NodeBuilder=NodeBuilder,function(nodes){nodes.con=class con extends NodeBuilder{constructor(raw){super(builder=>builder.con(raw)),this.raw=raw,this.type="con"}};nodes.str=class str extends NodeBuilder{constructor(raw){super(builder=>builder.json(raw)),this.raw=raw,this.type="str"}};nodes.bin=class bin extends NodeBuilder{constructor(raw){super(builder=>builder.json(raw)),this.raw=raw,this.type="bin"}};nodes.val=class val extends NodeBuilder{constructor(value){super(builder=>{const valId=builder.val(),valueId=value.build(builder);return builder.setVal(valId,valueId),valId}),this.value=value,this.type="val"}};nodes.vec=class vec extends NodeBuilder{constructor(value){super(builder=>{const vecId=builder.vec(),length=value.length;if(length){const elementPairs=[];for(let i=0;i<length;i++){const elementId=value[i].build(builder);elementPairs.push([i,elementId])}builder.insVec(vecId,elementPairs)}return vecId}),this.value=value,this.type="vec"}};nodes.obj=class obj extends NodeBuilder{constructor(obj,opt){super(builder=>{const objId=builder.obj(),keyValuePairs=[],merged={...obj,...opt},keys=Object.keys(merged),length=keys.length;if(length){for(let i=0;i<length;i++){const key=keys[i],valueId=merged[key].build(builder);keyValuePairs.push([key,valueId])}builder.insObj(objId,keyValuePairs)}return objId}),this.obj=obj,this.opt=opt,this.type="obj"}optional(){return this}};nodes.arr=class arr extends NodeBuilder{constructor(arr){super(builder=>{const arrId=builder.arr(),length=arr.length;if(length){const valueIds=[];for(let i=0;i<length;i++)valueIds.push(arr[i].build(builder));builder.insArr(arrId,arrId,valueIds)}return arrId}),this.arr=arr,this.type="arr"}};nodes.ext=class ext extends NodeBuilder{constructor(id,data){super(builder=>{const buf=new Uint8Array([id,0,0]),tupleId=builder.vec();return buf[1]=tupleId.sid%256,buf[2]=tupleId.time%256,builder.insVec(tupleId,[[0,builder.constOrJson(exports.s.con(buf))],[1,data.build(builder)]]),tupleId}),this.id=id,this.data=data,this.type="ext"}}}(nodes||(exports.nodes=nodes={})),exports.schema={con:raw=>new nodes.con(raw),str:str=>new nodes.str(str||""),bin:bin=>new nodes.bin(bin),val:val=>new nodes.val(val),vec:(...vec)=>new nodes.vec(vec),obj:(obj,opt)=>new nodes.obj(obj,opt),map:obj=>exports.schema.obj(obj),arr:arr=>new nodes.arr(arr),json:value=>{switch(typeof value){case"object":if(!value)return exports.s.val(exports.s.con(value));if(value instanceof NodeBuilder)return value;if(Array.isArray(value))return exports.s.arr(value.map(v=>exports.s.json(v)));if((0,isUint8Array_1.isUint8Array)(value))return exports.s.bin(value);if(value instanceof clock_1.Timestamp)return exports.s.val(exports.s.con(value));{const obj={},keys=Object.keys(value);for(const key of keys)obj[key]=exports.s.jsonCon(value[key]);return exports.s.obj(obj)}case"string":return exports.s.str(value);default:return exports.s.val(exports.s.con(value))}},jsonCon:value=>(x=>{switch(typeof x){case"number":case"boolean":case"undefined":return!0;case"object":return null===x||x instanceof clock_1.Timestamp;default:return!1}})(value)?exports.s.con(value):exports.s.json(value),ext:(id,data)=>new nodes.ext(id,data)},exports.s=exports.schema},"./node_modules/json-joy/lib/json-crdt-patch/types.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/json-joy/lib/json-crdt-patch/util/binary/CrdtReader.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CrdtReader=void 0;const Reader_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/Reader.js");class CrdtReader extends Reader_1.Reader{id(){const byte=this.u8();return byte<=127?[byte>>>4,15&byte]:(this.x--,[this.b1vu56()[1],this.vu57()])}idSkip(){this.u8()<=127||(this.x--,this.b1vu56(),this.vu57Skip())}vu57(){const o1=this.u8();if(o1<=127)return o1;const o2=this.u8();if(o2<=127)return o2<<7|127&o1;const o3=this.u8();if(o3<=127)return o3<<14|(127&o2)<<7|127&o1;const o4=this.u8();if(o4<=127)return o4<<21|(127&o3)<<14|(127&o2)<<7|127&o1;const o5=this.u8();if(o5<=127)return 268435456*o5+((127&o4)<<21|(127&o3)<<14|(127&o2)<<7|127&o1);const o6=this.u8();if(o6<=127)return 34359738368*o6+(268435456*(127&o5)+((127&o4)<<21|(127&o3)<<14|(127&o2)<<7|127&o1));const o7=this.u8();if(o7<=127)return 4398046511104*o7+(34359738368*(127&o6)+(268435456*(127&o5)+((127&o4)<<21|(127&o3)<<14|(127&o2)<<7|127&o1)));return 562949953421312*this.u8()+(4398046511104*(127&o7)+(34359738368*(127&o6)+(268435456*(127&o5)+((127&o4)<<21|(127&o3)<<14|(127&o2)<<7|127&o1))))}vu57Skip(){if(this.u8()<=127)return;if(this.u8()<=127)return;if(this.u8()<=127)return;if(this.u8()<=127)return;if(this.u8()<=127)return;if(this.u8()<=127)return;this.u8()<=127||this.x++}b1vu56(){const byte=this.u8(),flag=128&byte?1:0,o1=127&byte;if(o1<=63)return[flag,o1];const o2=this.u8();if(o2<=127)return[flag,o2<<6|63&o1];const o3=this.u8();if(o3<=127)return[flag,o3<<13|(127&o2)<<6|63&o1];const o4=this.u8();if(o4<=127)return[flag,o4<<20|(127&o3)<<13|(127&o2)<<6|63&o1];const o5=this.u8();if(o5<=127)return[flag,134217728*o5+((127&o4)<<20|(127&o3)<<13|(127&o2)<<6|63&o1)];const o6=this.u8();if(o6<=127)return[flag,17179869184*o6+(134217728*(127&o5)+((127&o4)<<20|(127&o3)<<13|(127&o2)<<6|63&o1))];const o7=this.u8();if(o7<=127)return[flag,2199023255552*o7+(17179869184*(127&o6)+(134217728*(127&o5)+((127&o4)<<20|(127&o3)<<13|(127&o2)<<6|63&o1)))];return[flag,281474976710656*this.u8()+(2199023255552*(127&o7)+(17179869184*(127&o6)+(134217728*(127&o5)+((127&o4)<<20|(127&o3)<<13|(127&o2)<<6|63&o1))))]}}exports.CrdtReader=CrdtReader},"./node_modules/json-joy/lib/json-crdt-patch/util/binary/CrdtWriter.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CrdtWriter=void 0;const Writer_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/Writer.js");class CrdtWriter extends Writer_1.Writer{id(x,y){x<=7&&y<=15?this.u8(x<<4|y):(this.b1vu56(1,x),this.vu57(y))}vu57(num){if(num<=127)this.u8(num);else if(num<=16383){this.ensureCapacity(2);const uint8=this.uint8;uint8[this.x++]=128|127&num,uint8[this.x++]=num>>>7}else if(num<=2097151){this.ensureCapacity(3);const uint8=this.uint8;uint8[this.x++]=128|127&num,uint8[this.x++]=128|num>>>7&127,uint8[this.x++]=num>>>14}else if(num<=268435455){this.ensureCapacity(4);const uint8=this.uint8;uint8[this.x++]=128|127&num,uint8[this.x++]=128|num>>>7&127,uint8[this.x++]=128|num>>>14&127,uint8[this.x++]=num>>>21}else{let lo32=0|num;lo32<0&&(lo32+=4294967296);const hi32=(num-lo32)/4294967296;if(num<=34359738367){this.ensureCapacity(5);const uint8=this.uint8;uint8[this.x++]=128|127&num,uint8[this.x++]=128|num>>>7&127,uint8[this.x++]=128|num>>>14&127,uint8[this.x++]=128|num>>>21&127,uint8[this.x++]=hi32<<4|num>>>28}else if(num<=4398046511103){this.ensureCapacity(6);const uint8=this.uint8;uint8[this.x++]=128|127&num,uint8[this.x++]=128|num>>>7&127,uint8[this.x++]=128|num>>>14&127,uint8[this.x++]=128|num>>>21&127,uint8[this.x++]=128|(7&hi32)<<4|num>>>28,uint8[this.x++]=hi32>>>3}else if(num<=562949953421311){this.ensureCapacity(7);const uint8=this.uint8;uint8[this.x++]=128|127&num,uint8[this.x++]=128|num>>>7&127,uint8[this.x++]=128|num>>>14&127,uint8[this.x++]=128|num>>>21&127,uint8[this.x++]=128|(7&hi32)<<4|num>>>28,uint8[this.x++]=128|(1016&hi32)>>>3,uint8[this.x++]=hi32>>>10}else{this.ensureCapacity(8);const uint8=this.uint8;uint8[this.x++]=128|127&num,uint8[this.x++]=128|num>>>7&127,uint8[this.x++]=128|num>>>14&127,uint8[this.x++]=128|num>>>21&127,uint8[this.x++]=128|(7&hi32)<<4|num>>>28,uint8[this.x++]=128|(1016&hi32)>>>3,uint8[this.x++]=128|(130048&hi32)>>>10,uint8[this.x++]=hi32>>>17}}}b1vu56(flag,num){if(num<=63)this.u8(flag<<7|num);else{const firstByteMask=flag<<7|64;if(num<=8191){this.ensureCapacity(2);const uint8=this.uint8;uint8[this.x++]=firstByteMask|63&num,uint8[this.x++]=num>>>6}else if(num<=1048575){this.ensureCapacity(3);const uint8=this.uint8;uint8[this.x++]=firstByteMask|63&num,uint8[this.x++]=128|num>>>6&127,uint8[this.x++]=num>>>13}else if(num<=134217727){this.ensureCapacity(4);const uint8=this.uint8;uint8[this.x++]=firstByteMask|63&num,uint8[this.x++]=128|num>>>6&127,uint8[this.x++]=128|num>>>13&127,uint8[this.x++]=num>>>20}else{let lo32=0|num;lo32<0&&(lo32+=4294967296);const hi32=(num-lo32)/4294967296;if(num<=17179869183){this.ensureCapacity(5);const uint8=this.uint8;uint8[this.x++]=firstByteMask|63&num,uint8[this.x++]=128|num>>>6&127,uint8[this.x++]=128|num>>>13&127,uint8[this.x++]=128|num>>>20&127,uint8[this.x++]=hi32<<5|num>>>27}else if(num<=2199023255551){this.ensureCapacity(6);const uint8=this.uint8;uint8[this.x++]=firstByteMask|63&num,uint8[this.x++]=128|num>>>6&127,uint8[this.x++]=128|num>>>13&127,uint8[this.x++]=128|num>>>20&127,uint8[this.x++]=128|(3&hi32)<<5|num>>>27,uint8[this.x++]=hi32>>>2}else if(num<=0xffffffffffff){this.ensureCapacity(7);const uint8=this.uint8;uint8[this.x++]=firstByteMask|63&num,uint8[this.x++]=128|num>>>6&127,uint8[this.x++]=128|num>>>13&127,uint8[this.x++]=128|num>>>20&127,uint8[this.x++]=128|(3&hi32)<<5|num>>>27,uint8[this.x++]=128|(508&hi32)>>>2,uint8[this.x++]=hi32>>>9}else{this.ensureCapacity(8);const uint8=this.uint8;uint8[this.x++]=firstByteMask|63&num,uint8[this.x++]=128|num>>>6&127,uint8[this.x++]=128|num>>>13&127,uint8[this.x++]=128|num>>>20&127,uint8[this.x++]=128|(3&hi32)<<5|num>>>27,uint8[this.x++]=128|(508&hi32)>>>2,uint8[this.x++]=128|(65024&hi32)>>>9,uint8[this.x++]=hi32>>>16}}}}}exports.CrdtWriter=CrdtWriter},"./node_modules/json-joy/lib/json-crdt/codec/structural/binary/Decoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Decoder=void 0;const nodes=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/index.js")),ClockDecoder_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/clock/ClockDecoder.js"),CrdtReader_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/util/binary/CrdtReader.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),Model_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/Model.js"),CborDecoderBase_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborDecoderBase.js"),constants_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/codec/structural/binary/constants.js");class Decoder extends CborDecoderBase_1.CborDecoderBase{constructor(){super(new CrdtReader_1.CrdtReader),this.clockDecoder=void 0,this.time=-1,this.cStrChunk=()=>{const id=this.ts(),val=this.val();return"string"==typeof val?new nodes.StrChunk(id,val.length,val):new nodes.StrChunk(id,~~val,"")},this.cBinChunk=()=>{const id=this.ts(),reader=this.reader,[deleted,length]=reader.b1vu56();return deleted?new nodes.BinChunk(id,length,void 0):new nodes.BinChunk(id,length,reader.buf(length))},this.cArrChunk=()=>{const id=this.ts(),[deleted,length]=this.reader.b1vu56();if(deleted)return new nodes.ArrChunk(id,length,void 0);const ids=[];for(let i=0;i<length;i++)ids.push(this.cNode().id);return new nodes.ArrChunk(id,length,ids)}}decode(data,model){this.clockDecoder=void 0,this.time=-1;const reader=this.reader;reader.reset(data);if(128&reader.peak()){reader.x++;const time=this.time=reader.vu57();model||(model=Model_1.Model.withServerClock(void 0,time))}else if(this.decodeClockTable(),!model){const clock=this.clockDecoder.clock;model=Model_1.Model.create(void 0,clock)}return this.doc=model,model.root=new nodes.RootNode(this.doc,this.cRoot().id),this.clockDecoder=void 0,model}decodeClockTable(){const reader=this.reader,clockTableOffset=reader.u32(),offset=reader.x;reader.x+=clockTableOffset;const length=reader.vu57(),sessionId=reader.vu57(),time=reader.vu57();this.clockDecoder=new ClockDecoder_1.ClockDecoder(sessionId,time);for(let i=1;i<length;i++){const sid=reader.vu57(),time=reader.vu57();this.clockDecoder.pushTuple(sid,time)}reader.x=offset}ts(){if(this.time<0){const[sessionIndex,timeDiff]=this.reader.id();return this.clockDecoder.decodeId(sessionIndex,timeDiff)}return new clock_1.Timestamp(1,this.reader.vu57())}cRoot(){const reader=this.reader;return reader.uint8[reader.x]?this.cNode():Model_1.UNDEFINED}cNode(){const reader=this.reader,id=this.ts(),octet=reader.u8(),minor=31&octet;switch(octet>>5){case constants_1.CRDT_MAJOR.CON:return this.cCon(id,minor);case constants_1.CRDT_MAJOR.VAL:return this.cVal(id);case constants_1.CRDT_MAJOR.OBJ:return this.cObj(id,31!==minor?minor:reader.vu57());case constants_1.CRDT_MAJOR.VEC:return this.cVec(id,31!==minor?minor:reader.vu57());case constants_1.CRDT_MAJOR.STR:return this.cStr(id,31!==minor?minor:reader.vu57());case constants_1.CRDT_MAJOR.BIN:return this.cBin(id,31!==minor?minor:reader.vu57());case constants_1.CRDT_MAJOR.ARR:return this.cArr(id,31!==minor?minor:reader.vu57())}throw new Error("UNKNOWN_NODE")}cCon(id,length){const doc=this.doc,data=length?this.ts():this.val(),node=new nodes.ConNode(id,data);return doc.index.set(id,node),node}cVal(id){const child=this.cNode(),doc=this.doc,node=new nodes.ValNode(doc,id,child.id);return doc.index.set(id,node),node}cObj(id,length){const obj=new nodes.ObjNode(this.doc,id);for(let i=0;i<length;i++)this.cObjChunk(obj);return this.doc.index.set(id,obj),obj}cObjChunk(obj){const key=this.key();obj.keys.set(key,this.cNode().id)}cVec(id,length){const reader=this.reader,obj=new nodes.VecNode(this.doc,id),elements=obj.elements;for(let i=0;i<length;i++){reader.peak()?elements.push(this.cNode().id):(reader.x++,elements.push(void 0))}return this.doc.index.set(id,obj),obj}cStr(id,length){const node=new nodes.StrNode(id);return length&&node.ingest(length,this.cStrChunk),this.doc.index.set(id,node),node}cBin(id,length){const node=new nodes.BinNode(id);return length&&node.ingest(length,this.cBinChunk),this.doc.index.set(id,node),node}cArr(id,length){const obj=new nodes.ArrNode(this.doc,id);return length&&obj.ingest(length,this.cArrChunk),this.doc.index.set(id,obj),obj}}exports.Decoder=Decoder},"./node_modules/json-joy/lib/json-crdt/codec/structural/binary/Encoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Encoder=void 0;const nodes=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/index.js")),ClockEncoder_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/codec/clock/ClockEncoder.js"),CrdtWriter_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/util/binary/CrdtWriter.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),CborEncoder_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pack/lib/cbor/CborEncoder.js"),constants_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/codec/structural/binary/constants.js");class Encoder extends CborEncoder_1.CborEncoder{constructor(writer){super(writer||new CrdtWriter_1.CrdtWriter),this.clockEncoder=new ClockEncoder_1.ClockEncoder,this.time=0,this.cTableEntry=entry=>{const clock=entry.clock,writer=this.writer;writer.vu57(clock.sid),writer.vu57(clock.time)},this.tsLogical=ts=>{const relativeId=this.clockEncoder.append(ts);this.writer.id(relativeId.sessionIndex,relativeId.timeDiff)},this.tsServer=ts=>{this.writer.vu57(ts.time)},this.ts=this.tsLogical,this.cKey=(val,key)=>{this.writeStr(key),this.cNode(this.doc.index.get(val))}}encode(doc){this.doc=doc;const writer=this.writer;return writer.reset(),1===doc.clock.sid?this.encodeServer(doc):this.encodeLogical(doc),writer.flush()}encodeLogical(model){const writer=this.writer;this.ts=this.tsLogical,this.clockEncoder.reset(model.clock),writer.ensureCapacity(4);const x0=writer.x0,x=writer.x;writer.x+=4,this.cRoot(model.root),this.encodeClockTable(x0,x)}encodeServer(model){this.ts=this.tsServer;const writer=this.writer;writer.u8(128),writer.vu57(this.time=model.clock.time),this.cRoot(model.root)}encodeClockTable(x0,x){const writer=this.writer,shift=writer.x0-x0;writer.view.setUint32(writer.x0+(x-x0),writer.x-x-shift-4);const table=this.clockEncoder.table,length=table.size;writer.vu57(length),table.forEach(this.cTableEntry)}cRoot(root){0===root.val.sid?this.writer.u8(0):this.cNode(root.node())}writeTL(majorOverlay,length){const writer=this.writer;length<31?writer.u8(majorOverlay|length):(writer.u8(31|majorOverlay),writer.vu57(length))}cNode(node){node instanceof nodes.ConNode?this.cCon(node):node instanceof nodes.ValNode?this.cVal(node):node instanceof nodes.StrNode?this.cStr(node):node instanceof nodes.ObjNode?this.cObj(node):node instanceof nodes.VecNode?this.cVec(node):node instanceof nodes.ArrNode?this.cArr(node):node instanceof nodes.BinNode&&this.cBin(node)}cCon(node){const val=node.val;this.ts(node.id),val instanceof clock_1.Timestamp?(this.writer.u8(1),this.ts(val)):(this.writer.u8(0),this.writeAny(val))}cVal(node){this.ts(node.id),this.writer.u8(32),this.cNode(node.node())}cObj(node){this.ts(node.id);const keys=node.keys;this.writeTL(constants_1.CRDT_MAJOR_OVERLAY.OBJ,keys.size),keys.forEach(this.cKey)}cVec(node){const elements=node.elements,length=elements.length;this.ts(node.id),this.writeTL(constants_1.CRDT_MAJOR_OVERLAY.VEC,length);const index=this.doc.index;for(let i=0;i<length;i++){const elementId=elements[i];elementId?this.cNode(index.get(elementId)):this.writer.u8(0)}}cStr(node){const ts=this.ts;ts(node.id),this.writeTL(constants_1.CRDT_MAJOR_OVERLAY.STR,node.count);for(let chunk=node.first();chunk;chunk=node.next(chunk))ts(chunk.id),chunk.del?this.writeUInteger(chunk.span):this.writeStr(chunk.data)}cBin(node){const ts=this.ts,writer=this.writer;ts(node.id),this.writeTL(constants_1.CRDT_MAJOR_OVERLAY.BIN,node.count);for(let chunk=node.first();chunk;chunk=node.next(chunk)){ts(chunk.id);const length=chunk.span,deleted=chunk.del;writer.b1vu56(~~deleted,length),deleted||writer.buf(chunk.data,length)}}cArr(node){const ts=this.ts,writer=this.writer;ts(node.id),this.writeTL(constants_1.CRDT_MAJOR_OVERLAY.ARR,node.count);const index=this.doc.index;for(let chunk=node.first();chunk;chunk=node.next(chunk)){ts(chunk.id);const span=chunk.span,deleted=chunk.del;if(writer.b1vu56(~~deleted,span),deleted)continue;const nodes=chunk.data;for(let i=0;i<span;i++)this.cNode(index.get(nodes[i]))}}}exports.Encoder=Encoder},"./node_modules/json-joy/lib/json-crdt/codec/structural/binary/constants.js":(__unused_webpack_module,exports)=>{var CRDT_MAJOR,CRDT_MAJOR_OVERLAY;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CRDT_MAJOR_OVERLAY=exports.CRDT_MAJOR=void 0,function(CRDT_MAJOR){CRDT_MAJOR[CRDT_MAJOR.CON=0]="CON",CRDT_MAJOR[CRDT_MAJOR.VAL=1]="VAL",CRDT_MAJOR[CRDT_MAJOR.OBJ=2]="OBJ",CRDT_MAJOR[CRDT_MAJOR.VEC=3]="VEC",CRDT_MAJOR[CRDT_MAJOR.STR=4]="STR",CRDT_MAJOR[CRDT_MAJOR.BIN=5]="BIN",CRDT_MAJOR[CRDT_MAJOR.ARR=6]="ARR"}(CRDT_MAJOR||(exports.CRDT_MAJOR=CRDT_MAJOR={})),function(CRDT_MAJOR_OVERLAY){CRDT_MAJOR_OVERLAY[CRDT_MAJOR_OVERLAY.CON=0]="CON",CRDT_MAJOR_OVERLAY[CRDT_MAJOR_OVERLAY.VAL=32]="VAL",CRDT_MAJOR_OVERLAY[CRDT_MAJOR_OVERLAY.VEC=96]="VEC",CRDT_MAJOR_OVERLAY[CRDT_MAJOR_OVERLAY.OBJ=64]="OBJ",CRDT_MAJOR_OVERLAY[CRDT_MAJOR_OVERLAY.STR=128]="STR",CRDT_MAJOR_OVERLAY[CRDT_MAJOR_OVERLAY.BIN=160]="BIN",CRDT_MAJOR_OVERLAY[CRDT_MAJOR_OVERLAY.ARR=192]="ARR"}(CRDT_MAJOR_OVERLAY||(exports.CRDT_MAJOR_OVERLAY=CRDT_MAJOR_OVERLAY={}))},"./node_modules/json-joy/lib/json-crdt/codec/structural/binary/shared.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.decoder=exports.encoder=void 0;const Encoder_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/codec/structural/binary/Encoder.js"),Decoder_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/codec/structural/binary/Decoder.js");exports.encoder=new Encoder_1.Encoder,exports.decoder=new Decoder_1.Decoder},"./node_modules/json-joy/lib/json-crdt/constants.js":(__unused_webpack_module,exports)=>{var CRDT_CONSTANTS;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CRDT_CONSTANTS=void 0,function(CRDT_CONSTANTS){CRDT_CONSTANTS[CRDT_CONSTANTS.MAX_TUPLE_LENGTH=255]="MAX_TUPLE_LENGTH"}(CRDT_CONSTANTS||(exports.CRDT_CONSTANTS=CRDT_CONSTANTS={}))},"./node_modules/json-joy/lib/json-crdt/extensions/ExtNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExtNode=void 0;const clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js");exports.ExtNode=class ExtNode{constructor(data){this.data=data,this.api=void 0,this.id=data.id}children(callback){}child(){return this.data}container(){return this.data.container()}toString(tab,parentId){return this.name()+(parentId?" "+(0,clock_1.printTs)(parentId):"")+" "+this.data.toString(tab)}}},"./node_modules/json-joy/lib/json-crdt/extensions/Extensions.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Extensions=void 0;const printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js");class Extensions{constructor(){this.ext={}}register(extension){this.ext[extension.id]=extension}get(id){return this.ext[id]}size(){return Object.keys(this.ext).length}clone(){const clone=new Extensions;for(const ext of Object.values(this.ext))clone.register(ext);return clone}toString(tab=""){const keys=Object.keys(this.ext).map(k=>+k).sort();return"extensions"+(0,printTree_1.printTree)(tab,keys.map(k=>tab=>`${k}: ${this.ext[k].name}`))}}exports.Extensions=Extensions},"./node_modules/json-joy/lib/json-crdt/extensions/types.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/json-joy/lib/json-crdt/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/index.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/extensions/types.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/index.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/index.js"),exports)},"./node_modules/json-joy/lib/json-crdt/model/Model.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Model=exports.UNDEFINED=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),operations=tslib_1.__importStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/operations.js")),clock=tslib_1.__importStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js")),shared_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/codec/structural/binary/shared.js"),api_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/api/index.js"),constants_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/constants.js"),util_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/util.js"),nodes_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/index.js"),ConNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/const/ConNode.js"),printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),Extensions_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/extensions/Extensions.js"),AvlMap_1=__webpack_require__("./node_modules/sonic-forest/lib/avl/AvlMap.js"),json_crdt_patch_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/index.js");exports.UNDEFINED=new ConNode_1.ConNode(constants_1.ORIGIN,void 0);class Model{rndSid(){const clock=this.clock,sid=clock.sid,peers=clock.peers;for(;;){const candidate=(0,util_1.randomSessionId)();if(sid!==candidate&&!peers.has(candidate))return candidate}}static fromPatches(patches){if(!patches.length)throw new Error("NO_PATCHES");const sid=patches[0].getId().sid;if(!sid)throw new Error("NO_SID");const model=Model.create(void 0,sid);return model.applyBatch(patches),model}constructor(clockVector){this.root=new nodes_1.RootNode(this,constants_1.ORIGIN),this.index=new AvlMap_1.AvlMap(clock.compare),this.ext=new Extensions_1.Extensions,this.tick=0,this.onbeforepatch=void 0,this.onpatch=void 0,this.onbeforereset=void 0,this.onreset=void 0,this.clock=clockVector,clockVector.time||(clockVector.time=1)}get api(){return this._api||(this._api=new api_1.ModelApi(this)),this._api}get s(){return this.api.s._}get $(){return this.api.$}applyBatch(patches){const length=patches.length;for(let i=0;i<length;i++)this.applyPatch(patches[i])}applyLocalPatch(patch){const id=patch.getId();if(id){const clock=this.clock;if(clock.sid===id.sid){const time=clock.time;time>id.time&&(patch=patch.rebase(time))}}this.applyPatch(patch)}applyPatch(patch){this.onbeforepatch?.(patch);const ops=patch.ops,{length}=ops;for(let i=0;i<length;i++)this.applyOperation(ops[i]);this.tick++,this.onpatch?.(patch)}applyOperation(op){this.clock.observe(op.id,op.span());const index=this.index;if(op instanceof operations.InsStrOp){const node=index.get(op.obj);node instanceof nodes_1.StrNode&&node.ins(op.ref,op.id,op.data)}else if(op instanceof operations.NewObjOp){const id=op.id;index.get(id)||index.set(id,new nodes_1.ObjNode(this,id))}else if(op instanceof operations.NewArrOp){const id=op.id;index.get(id)||index.set(id,new nodes_1.ArrNode(this,id))}else if(op instanceof operations.NewStrOp){const id=op.id;index.get(id)||index.set(id,new nodes_1.StrNode(id))}else if(op instanceof operations.NewValOp){const id=op.id;index.get(id)||index.set(id,new nodes_1.ValNode(this,id,constants_1.ORIGIN))}else if(op instanceof operations.NewConOp){const id=op.id;index.get(id)||index.set(id,new ConNode_1.ConNode(id,op.val))}else if(op instanceof operations.InsObjOp){const node=index.get(op.obj),tuples=op.data,length=tuples.length;if(node instanceof nodes_1.ObjNode)for(let i=0;i<length;i++){const tuple=tuples[i],valueNode=index.get(tuple[1]);if(!valueNode)continue;if(node.id.time>=tuple[1].time)continue;const old=node.put(tuple[0]+"",valueNode.id);old&&this._gcTree(old)}}else if(op instanceof operations.InsVecOp){const node=index.get(op.obj),tuples=op.data,length=tuples.length;if(node instanceof nodes_1.VecNode)for(let i=0;i<length;i++){const tuple=tuples[i],valueNode=index.get(tuple[1]);if(!valueNode)continue;if(node.id.time>=tuple[1].time)continue;const old=node.put(Number(tuple[0]),valueNode.id);old&&this._gcTree(old)}}else if(op instanceof operations.InsValOp){const obj=op.obj,node=0===obj.sid&&0===obj.time?this.root:index.get(obj);if(node instanceof nodes_1.ValNode){if(index.get(op.val)){const old=node.set(op.val);old&&this._gcTree(old)}}}else if(op instanceof operations.InsArrOp){const node=index.get(op.obj);if(node instanceof nodes_1.ArrNode){const nodes=[],data=op.data,length=data.length;for(let i=0;i<length;i++){const stamp=data[i];index.get(stamp)&&(node.id.time>=stamp.time||nodes.push(stamp))}nodes.length&&node.ins(op.ref,op.id,nodes)}}else if(op instanceof operations.UpdArrOp){const node=index.get(op.obj);if(node instanceof nodes_1.ArrNode){const val=op.val;if(index.get(val)){const old=node.upd(op.ref,val);old&&this._gcTree(old)}}}else if(op instanceof operations.DelOp){const node=index.get(op.obj);if(node instanceof nodes_1.ArrNode){const length=op.what.length;for(let i=0;i<length;i++){const span=op.what[i];for(let j=0;j<span.span;j++){const id=node.getById(new clock.Timestamp(span.sid,span.time+j));id&&this._gcTree(id)}}node.delete(op.what)}else(node instanceof nodes_1.StrNode||node instanceof nodes_1.BinNode)&&node.delete(op.what)}else if(op instanceof operations.NewBinOp){const id=op.id;index.get(id)||index.set(id,new nodes_1.BinNode(id))}else if(op instanceof operations.InsBinOp){const node=index.get(op.obj);node instanceof nodes_1.BinNode&&node.ins(op.ref,op.id,op.data)}else if(op instanceof operations.NewVecOp){const id=op.id;index.get(id)||index.set(id,new nodes_1.VecNode(this,id))}}_gcTree(value){if(0===value.sid)return;const node=this.index.get(value);if(!node)return;const api=node.api;api&&api.events.handleDelete(),node.children(child=>this._gcTree(child.id)),this.index.del(value)}fork(sessionId=this.rndSid()){const copy=Model.fromBinary(this.toBinary());return copy.clock.sid!==sessionId&&copy.clock instanceof clock.ClockVector&&(copy.clock=copy.clock.fork(sessionId)),copy.ext=this.ext,copy}clone(){return this.fork(this.clock.sid)}reset(to){this.onbeforereset?.();const index=this.index;this.index=new AvlMap_1.AvlMap(clock.compare);const blob=to.toBinary();shared_1.decoder.decode(blob,this),this.clock=to.clock.clone(),this.ext=to.ext.clone();const api=this._api;api&&(api.flush(),api.builder.clock=this.clock,api.node=this.root),index.forEach(({v:node})=>{const api=node.api;if(!api)return;const newNode=this.index.get(node.id);newNode?(api.node=newNode,newNode.api=api):api.events.handleDelete()}),this.tick++,this.onreset?.()}view(){return this.root.view()}toBinary(){return shared_1.encoder.encode(this)}setSchema(schema,useGlobalSession=!0){const c=this.clock;if(1===c.time){const oldSid=c.sid;useGlobalSession&&(c.sid=2),this.api.set(schema),useGlobalSession&&this.setSid(oldSid)}return this}setSid(sid){const cl=this.clock,oldSid=cl.sid;oldSid!==sid&&(cl.sid=sid,cl.observe(new clock.Timestamp(oldSid,cl.time-1),1))}toString(tab=""){const nl=()=>"",hasExtensions=this.ext.size()>0;return"model"+(0,printTree_1.printTree)(tab,[tab=>this.root.toString(tab),nl,tab=>{const nodes=[];return this.index.forEach(item=>nodes.push(item.v)),`index (${nodes.length} nodes)`+(nodes.length?(0,printTree_1.printTree)(tab,nodes.map(node=>tab=>`${node.name()} ${clock.printTs(node.id)}`)):"")},nl,tab=>`view${(0,printTree_1.printTree)(tab,[tab=>String(JSON.stringify(this.view(),null,2)).replace(/\n/g,"\n"+tab)])}`,nl,tab=>this.clock.toString(tab),hasExtensions?nl:null,hasExtensions?tab=>this.ext.toString(tab):null])}}exports.Model=Model,Model.sid=util_1.randomSessionId,Model.create=(schema,sidOrClock=Model.sid())=>{const cl="number"==typeof sidOrClock?1===sidOrClock?new clock.ServerClockVector(1,1):new clock.ClockVector(sidOrClock,1):sidOrClock,model=new Model(cl);return void 0!==schema&&model.setSchema(schema instanceof json_crdt_patch_1.NodeBuilder?schema:json_crdt_patch_1.s.json(schema),!0),model},Model.withServerClock=(schema,time=1)=>Model.create(schema,new clock.ServerClockVector(1,time)),Model.fromBinary=data=>shared_1.decoder.decode(data),Model.load=(data,sid,schema)=>{const model=shared_1.decoder.decode(data);return schema&&model.setSchema(schema,!0),"number"==typeof sid&&model.setSid(sid),model}},"./node_modules/json-joy/lib/json-crdt/model/api/NodeEvents.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeEvents=void 0;const fanout_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/api/fanout.js");exports.NodeEvents=class NodeEvents{constructor(api){this.api=api,this.subscribe=callback=>this.onViewChanges.listen(()=>callback()),this.getSnapshot=()=>this.api.view(),this.onChanges=new fanout_1.MapFanOut(this.api.api.onChanges,this.getSnapshot),this.onViewChanges=new fanout_1.OnNewFanOut(this.onChanges,this.api.view())}handleDelete(){this.onViewChanges.clear(),this.onChanges.clear()}}},"./node_modules/json-joy/lib/json-crdt/model/api/fanout.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnNewFanOut=exports.MapFanOut=exports.MicrotaskBufferFanOut=exports.MergeFanOut=void 0;const fanout_1=__webpack_require__("./node_modules/json-joy/node_modules/thingies/lib/fanout.js");class MergeFanOut extends fanout_1.FanOut{constructor(fanouts){super(),this.fanouts=fanouts,this.unsubs=[]}listen(listener){this.listeners.size||(this.unsubs=this.fanouts.map(fanout=>fanout.listen(data=>this.emit(data))));const unsub=super.listen(listener);return()=>{if(unsub(),!this.listeners.size){for(const unsub of this.unsubs)unsub();this.unsubs=[]}}}}exports.MergeFanOut=MergeFanOut;class MicrotaskBufferFanOut extends fanout_1.FanOut{constructor(source){super(),this.source=source,this.buffer=[],this.unsub=void 0}listen(listener){this.unsub||(this.unsub=this.source.listen(data=>{const buffer=this.buffer;buffer.length||queueMicrotask(()=>{this.emit(buffer),this.buffer=[]}),buffer.push(data)}));const unsub=super.listen(listener);return()=>{unsub(),this.listeners.size||this.clear()}}clear(){this.listeners.clear(),this.buffer=[],this.unsub?.(),this.unsub=void 0}}exports.MicrotaskBufferFanOut=MicrotaskBufferFanOut;class MapFanOut extends fanout_1.FanOut{constructor(source,mapper){super(),this.source=source,this.mapper=mapper,this.unsub=void 0}listen(listener){this.unsub||(this.unsub=this.source.listen(data=>this.emit(this.mapper(data))));const unsub=super.listen(listener);return()=>{unsub(),this.listeners.size||this.clear()}}clear(){this.listeners.clear(),this.unsub?.(),this.unsub=void 0}}exports.MapFanOut=MapFanOut;class OnNewFanOut extends fanout_1.FanOut{constructor(source,last=void 0){super(),this.source=source,this.last=last,this.unsub=void 0}listen(listener){this.unsub||(this.unsub=this.source.listen(data=>{this.last!==data&&this.emit(this.last=data)}));const unsub=super.listen(listener);return()=>{unsub(),this.listeners.size||this.clear()}}clear(){this.listeners.clear(),this.last=void 0,this.unsub?.(),this.unsub=void 0}}exports.OnNewFanOut=OnNewFanOut},"./node_modules/json-joy/lib/json-crdt/model/api/find.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.find=void 0;const json_pointer_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/index.js"),nodes_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/index.js");exports.find=(startNode,path)=>{const steps=(0,json_pointer_1.toPath)(path);let node=startNode;const length=steps.length;if(!length)return node;let i=0;for(;i<length&&node;){const step=steps[i++];if(node=node.container(),!node)throw new Error("NOT_CONTAINER");if(node instanceof nodes_1.ObjNode){const nextNode=node.get(String(step));if(!nextNode)throw new Error("NOT_FOUND");node=nextNode}else if(node instanceof nodes_1.ArrNode){const nextNode=node.getNode(Number(step));if(!nextNode)throw new Error("NOT_FOUND");node=nextNode}else if(node instanceof nodes_1.VecNode){const nextNode=node.get(Number(step));if(!nextNode)throw new Error("NOT_FOUND");node=nextNode}}return node}},"./node_modules/json-joy/lib/json-crdt/model/api/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/api/nodes.js"),exports)},"./node_modules/json-joy/lib/json-crdt/model/api/nodes.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModelApi=exports.ArrApi=exports.BinApi=exports.StrApi=exports.ObjApi=exports.VecApi=exports.ValApi=exports.ConApi=exports.NodeApi=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),get_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/get.js"),util_1=__webpack_require__("./node_modules/@jsonjoy.com/json-pointer/lib/util.js"),find_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/api/find.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),nodes_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/index.js"),NodeEvents_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/api/NodeEvents.js"),fanout_1=__webpack_require__("./node_modules/json-joy/node_modules/thingies/lib/fanout.js"),PatchBuilder_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/PatchBuilder.js"),fanout_2=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/api/fanout.js"),ExtNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/extensions/ExtNode.js"),diff=tslib_1.__importStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt-diff/index.js")),proxy_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/api/proxy.js"),breakPath=path=>{if(!path)return[void 0,""];if("number"==typeof path)return[void 0,path];switch("string"==typeof path&&(path=(0,util_1.toPath)(path)),path.length){case 0:return[void 0,""];case 1:return[void 0,path[0]];default:{const key=path[path.length-1];return[path.slice(0,-1),key]}}};class NodeApi{constructor(node,api){this.node=node,this.api=api,this.ev=void 0}get events(){return this.ev||(this.ev=new NodeEvents_1.NodeEvents(this))}find(path){let node=this.node;if(void 0===path){if("function"==typeof node.child){const child=node.child();if(!child){if(node instanceof nodes_1.RootNode)return node;throw new Error("NO_CHILD")}return child}throw new Error("CANNOT_IN")}for("string"==typeof path&&path&&"/"!==path[0]&&(path="/"+path),"number"==typeof path&&(path=[path]);node instanceof nodes_1.ValNode;)node=node.child();return(0,find_1.find)(node,path)}in(path){const node=this.find(path);return this.api.wrap(node)}asVal(){if(this.node instanceof nodes_1.ValNode)return this.api.wrap(this.node);throw new Error("NOT_VAL")}asStr(){if(this.node instanceof nodes_1.StrNode)return this.api.wrap(this.node);throw new Error("NOT_STR")}asBin(){if(this.node instanceof nodes_1.BinNode)return this.api.wrap(this.node);throw new Error("NOT_BIN")}asArr(){if(this.node instanceof nodes_1.ArrNode)return this.api.wrap(this.node);throw new Error("NOT_ARR")}asVec(){if(this.node instanceof nodes_1.VecNode)return this.api.wrap(this.node);throw new Error("NOT_VEC")}asObj(){if(this.node instanceof nodes_1.ObjNode)return this.api.wrap(this.node);throw new Error("NOT_OBJ")}asCon(){if(this.node instanceof nodes_1.ConNode)return this.api.wrap(this.node);throw new Error("NOT_CON")}asExt(ext){let extNode;const node=this.node;if(node instanceof ExtNode_1.ExtNode&&(extNode=node),node instanceof nodes_1.VecNode&&(extNode=node.ext()),!extNode)throw new Error("NOT_EXT");const api=this.api.wrap(extNode);if(!ext)return api;if(api instanceof ext.Api)return api;throw new Error("NOT_EXT")}val(path){return this.in(path).asVal()}str(path){return this.in(path).asStr()}bin(path){return this.in(path).asBin()}arr(path){return this.in(path).asArr()}vec(path){return this.in(path).asVec()}obj(path){return this.in(path).asObj()}con(path){return this.in(path).asCon()}view(){return this.node.view()}select(path,leaf){try{let node=void 0!==path?this.find(path):this.node;if(leaf)for(;node instanceof nodes_1.ValNode;)node=node.child();return this.api.wrap(node)}catch(e){return}}read(path){const view=this.view();if(Array.isArray(path))return(0,get_1.get)(view,path);if(!path)return view;let path2=path+"";return path&&"/"!==path2[0]&&(path2="/"+path2),(0,get_1.get)(view,(0,util_1.toPath)(path2))}add(path,value){const[parent,key]=breakPath(path);ADD:try{const node=this.select(parent,!0);if(node instanceof ObjApi)node.set({[key]:value});else if(node instanceof ArrApi||node instanceof StrApi||node instanceof BinApi){const length=node.length();let index=0;if("number"==typeof key)index=key;else if("-"===key)index=length;else if(index=~~key,index+""!==key)break ADD;if(index!=index)break ADD;if(index<0&&(index=0),index>length&&(index=length),node instanceof ArrApi)node.ins(index,Array.isArray(value)?value:[value]);else if(node instanceof StrApi)node.ins(index,value+"");else if(node instanceof BinApi){if(!(value instanceof Uint8Array))break ADD;node.ins(index,value)}}else{if(!(node instanceof VecApi))break ADD;node.set([[~~key,value]])}return!0}catch{}return!1}replace(path,value){const[parent,key]=breakPath(path);REPLACE:try{const node=this.select(parent,!0);if(node instanceof ObjApi){const keyStr=key+"";if(!node.has(keyStr))break REPLACE;node.set({[key]:value})}else if(node instanceof ArrApi){const length=node.length();let index=0;if("number"==typeof key)index=key;else if(index=~~key,index+""!==key)break REPLACE;if(index!=index||index<0||index>length)break REPLACE;index===length?node.ins(index,[value]):node.upd(index,value)}else{if(!(node instanceof VecApi))break REPLACE;node.set([[~~key,value]])}return!0}catch{}return!1}remove(path,length=1){const[parent,key]=breakPath(path);REMOVE:try{const node=this.select(parent,!0);if(node instanceof ObjApi){const keyStr=key+"";if(!node.has(keyStr))break REMOVE;node.del([keyStr])}else if(node instanceof ArrApi||node instanceof StrApi||node instanceof BinApi){const len=node.length();let index=0;if("number"==typeof key)index=key;else if("-"===key)index=length;else if(index=~~key,index+""!==key)break REMOVE;if(index!=index||index<0||index>len)break REMOVE;node.del(index,Math.min(length,len-index))}else{if(!(node instanceof VecApi))break REMOVE;node.set([[~~key,void 0]])}return!0}catch{}return!1}diff(value){return diff.diff(this,value)}merge(value){return diff.merge(this,value)}op(operation){if(!Array.isArray(operation))return!1;const[type,path,value]=operation;switch(type){case"add":return this.add(path,value);case"replace":return this.replace(path,value);case"merge":return!!this.select(path)?.merge(value);case"remove":return this.remove(path,value)}}get s(){return{$:this}}get $(){return(0,proxy_1.proxy$)(path=>{try{return this.api.wrap(this.find(path))}catch{return}},"$")}toString(tab=""){return"api("+(this.constructor===NodeApi?"*":this.node.name())+")"+(0,printTree_1.printTree)(tab,[tab=>this.node.toString(tab)])}}exports.NodeApi=NodeApi;class ConApi extends NodeApi{get s(){return{$:this}}}exports.ConApi=ConApi;class ValApi extends NodeApi{get(){return this.in()}set(json){const{api,node}=this,val=api.builder.constOrJson(json);api.builder.setVal(node.id,val),api.apply()}get s(){const self=this;return{$:this,get _(){const childNode=self.node.node();return self.api.wrap(childNode).s}}}}exports.ValApi=ValApi;class VecApi extends NodeApi{get(key){return this.in(key)}set(entries){const{api,node}=this,{builder}=api;builder.insVec(node.id,entries.map(([index,json])=>[index,builder.constOrJson(json)])),api.apply()}push(...values){const length=this.length();this.set(values.map((value,index)=>[length+index,value]))}length(){return this.node.elements.length}get s(){return new Proxy({},{get:(target,prop,receiver)=>{if("$"===prop)return this;if("toExt"===prop)return()=>this.asExt();const index=Number(prop);if(Number.isNaN(index))throw new Error("INVALID_INDEX");const child=this.node.get(index);if(!child)throw new Error("OUT_OF_BOUNDS");return this.api.wrap(child).s}})}}exports.VecApi=VecApi;class ObjApi extends NodeApi{get(key){return this.in(key)}set(entries){const{api,node}=this,{builder}=api;builder.insObj(node.id,Object.entries(entries).map(([key,json])=>[key,builder.constOrJson(json)])),api.apply()}del(keys){const{api,node}=this,{builder}=api;api.builder.insObj(node.id,keys.map(key=>[key,builder.con(void 0)])),api.apply()}has(key){return this.node.keys.has(key)}get s(){return new Proxy({},{get:(target,prop,receiver)=>{if("$"===prop)return this;const key=String(prop),child=this.node.get(key);if(!child)throw new Error("NO_SUCH_KEY");return this.api.wrap(child).s}})}}exports.ObjApi=ObjApi;class StrApi extends NodeApi{ins(index,text){const{api,node}=this;api.onBeforeLocalChange.emit(api.next);const builder=api.builder;builder.pad();const nextTime=api.builder.nextTime(),id=new clock_1.Timestamp(builder.clock.sid,nextTime),after=node.insAt(index,id,text);if(!after)throw new Error("OUT_OF_BOUNDS");builder.insStr(node.id,after,text),api.advance()}del(index,length){const{api,node}=this;api.onBeforeLocalChange.emit(api.next);const builder=api.builder;builder.pad();const spans=node.findInterval(index,length);if(!spans)throw new Error("OUT_OF_BOUNDS");node.delete(spans),builder.del(node.id,spans),api.advance()}findId(index){const node=this.node,max=node.length()-1;if(index>max&&(index=max),index<0)return node.id;return node.find(index)||node.id}findPos(id){const node=this.node,nodeId=node.id;if(nodeId.sid===id.sid&&nodeId.time===id.time)return-1;const chunk=node.findById(id);if(!chunk)return-1;return node.pos(chunk)+(chunk.del?0:id.time-chunk.id.time)}length(){return this.node.length()}get s(){return{$:this}}}exports.StrApi=StrApi;class BinApi extends NodeApi{ins(index,data){const{api,node}=this,after=index?node.find(index-1):node.id;if(!after)throw new Error("OUT_OF_BOUNDS");api.builder.insBin(node.id,after,data),api.apply()}del(index,length){const{api,node}=this,spans=node.findInterval(index,length);if(!spans)throw new Error("OUT_OF_BOUNDS");api.builder.del(node.id,spans),api.apply()}length(){return this.node.length()}get s(){return{$:this}}}exports.BinApi=BinApi;class ArrApi extends NodeApi{get(index){return this.in(index)}ins(index,values){const{api,node}=this,{builder}=api,after=index?node.find(index-1):node.id;if(!after)throw new Error("OUT_OF_BOUNDS");const valueIds=[];for(let i=0;i<values.length;i++)valueIds.push(builder.json(values[i]));builder.insArr(node.id,after,valueIds),api.apply()}push(...values){const length=this.length();this.ins(length,values)}upd(index,value){const{api,node}=this,ref=node.getId(index);if(!ref)throw new Error("OUT_OF_BOUNDS");const{builder}=api;builder.updArr(node.id,ref,builder.constOrJson(value)),api.apply()}del(index,length){const{api,node}=this,spans=node.findInterval(index,length);if(!spans)throw new Error("OUT_OF_BOUNDS");api.builder.del(node.id,spans),api.apply()}length(){return this.node.length()}get s(){return new Proxy({},{get:(target,prop,receiver)=>{if("$"===prop)return this;const index=Number(prop);if(Number.isNaN(index))throw new Error("INVALID_INDEX");const child=this.node.getNode(index);if(!child)throw new Error("OUT_OF_BOUNDS");return this.api.wrap(child).s}})}}exports.ArrApi=ArrApi;exports.ModelApi=class ModelApi extends ValApi{constructor(model){super(model.root,void 0),this.model=model,this.next=0,this.onBeforeReset=new fanout_1.FanOut,this.onReset=new fanout_1.FanOut,this.onBeforePatch=new fanout_1.FanOut,this.onPatch=new fanout_1.FanOut,this.onBeforeLocalChange=new fanout_1.FanOut,this.onLocalChange=new fanout_1.FanOut,this.onLocalChanges=new fanout_2.MicrotaskBufferFanOut(this.onLocalChange),this.onBeforeTransaction=new fanout_1.FanOut,this.onTransaction=new fanout_1.FanOut,this.onChange=new fanout_2.MergeFanOut([this.onReset,this.onPatch,this.onLocalChange]),this.onChanges=new fanout_2.MicrotaskBufferFanOut(this.onChange),this.onFlush=new fanout_1.FanOut,this.inTx=!1,this.stopAutoFlush=void 0,this.subscribe=callback=>this.onChanges.listen(()=>callback()),this.getSnapshot=()=>this.view(),this.api=this,this.builder=new PatchBuilder_1.PatchBuilder(model.clock),model.onbeforereset=()=>this.onBeforeReset.emit(),model.onreset=()=>this.onReset.emit(),model.onbeforepatch=patch=>this.onBeforePatch.emit(patch),model.onpatch=patch=>this.onPatch.emit(patch)}wrap(node){if(node instanceof nodes_1.ValNode)return node.api||(node.api=new ValApi(node,this));if(node instanceof nodes_1.StrNode)return node.api||(node.api=new StrApi(node,this));if(node instanceof nodes_1.BinNode)return node.api||(node.api=new BinApi(node,this));if(node instanceof nodes_1.ArrNode)return node.api||(node.api=new ArrApi(node,this));if(node instanceof nodes_1.ObjNode)return node.api||(node.api=new ObjApi(node,this));if(node instanceof nodes_1.ConNode)return node.api||(node.api=new ConApi(node,this));if(node instanceof nodes_1.VecNode)return node.api||(node.api=new VecApi(node,this));if(node instanceof ExtNode_1.ExtNode){if(node.api)return node.api;const extension=this.model.ext.get(node.extId);return node.api=new extension.Api(node,this)}throw new Error("UNKNOWN_NODE")}root(json){return this.set(json)}set(json){return super.set(json),this}apply(){const ops=this.builder.patch.ops,length=ops.length,model=this.model,from=this.next;this.onBeforeLocalChange.emit(from);for(let i=this.next;i<length;i++)model.applyOperation(ops[i]);this.next=length,model.tick++,this.onLocalChange.emit(from)}advance(){const from=this.next;this.next=this.builder.patch.ops.length,this.model.tick++,this.onLocalChange.emit(from)}transaction(callback){if(this.inTx)callback();else{this.inTx=!0;try{this.onBeforeTransaction.emit(),callback(),this.onTransaction.emit()}finally{this.inTx=!1}}}flush(){const patch=this.builder.flush();return this.next=0,patch.ops.length&&this.onFlush.emit(patch),patch}autoFlush(drainNow=!1){const drain=()=>this.builder.patch.ops.length&&this.flush(),onLocalChangesUnsubscribe=this.onLocalChanges.listen(drain),onBeforeTransactionUnsubscribe=this.onBeforeTransaction.listen(drain),onTransactionUnsubscribe=this.onTransaction.listen(drain);return drainNow&&drain(),this.stopAutoFlush=()=>{this.stopAutoFlush=void 0,onLocalChangesUnsubscribe(),onBeforeTransactionUnsubscribe(),onTransactionUnsubscribe()}}}},"./node_modules/json-joy/lib/json-crdt/model/api/proxy.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.proxy$=exports.proxy=void 0;exports.proxy=(fn,path=[])=>new Proxy(()=>{},{get:(target,prop,receiver)=>(path.push(String(prop)),(0,exports.proxy)(fn,path)),apply:(target,thisArg,args)=>fn(path,...args)});exports.proxy$=(fn,sentinel,path=[])=>new Proxy({},{get:(t,prop,r)=>prop===sentinel?fn(path):(path.push(String(prop)),(0,exports.proxy$)(fn,sentinel,path))})},"./node_modules/json-joy/lib/json-crdt/model/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Model=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var Model_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/Model.js");Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return Model_1.Model}}),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/api/index.js"),exports)},"./node_modules/json-joy/lib/json-crdt/model/util.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomSessionId=void 0;exports.randomSessionId=()=>Math.floor(9007199254675456*Math.random()+65535)},"./node_modules/json-joy/lib/json-crdt/nodes/arr/ArrNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArrNode=exports.ArrChunk=void 0;const AbstractRga_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/rga/AbstractRga.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),printBinary_1=__webpack_require__("./node_modules/tree-dump/lib/printBinary.js"),printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js");class ArrChunk{constructor(id,span,data){this.id=id,this.span=span,this.len=data?span:0,this.del=!data,this.p=void 0,this.l=void 0,this.r=void 0,this.s=void 0,this.data=data}merge(data){this.data.push(...data),this.span=this.data.length}split(ticks){const span=this.span;if(this.span=ticks,!this.del){const rightData=this.data.splice(ticks);return new ArrChunk((0,clock_1.tick)(this.id,ticks),span-ticks,rightData)}return new ArrChunk((0,clock_1.tick)(this.id,ticks),span-ticks,void 0)}delete(){this.del=!0,this.data=void 0}clone(){return new ArrChunk(this.id,this.span,this.data?[...this.data]:void 0)}view(){return this.data?[...this.data]:[]}}exports.ArrChunk=ArrChunk;class ArrNode extends AbstractRga_1.AbstractRga{constructor(doc,id){super(id),this.doc=doc,this._tick=0,this._view=[],this.api=void 0}get(position){const pair=this.findChunk(position);if(pair)return pair[0].data[pair[1]]}getNode(position){const id=this.get(position);if(id)return this.doc.index.get(id)}getId(position){const pair=this.findChunk(position);if(!pair)return;const[chunk,offset]=pair,id=chunk.id;return offset?(0,clock_1.tick)(id,offset):id}getById(id){const chunk=this.findById(id);if(!chunk||chunk.del)return;const offset=id.time-chunk.id.time;return chunk.data[offset]}upd(ref,val){const chunk=this.findById(ref);if(!chunk)return;const data=chunk.data;if(!data)return;const offset=ref.time-chunk.id.time,currentVal=data[offset];return currentVal&&(0,clock_1.compare)(currentVal,val)>=0?void 0:(data[offset]=val,this.onChange(),currentVal)}createChunk(id,data){return new ArrChunk(id,data?data.length:0,data)}onChange(){}toStringName(){return this.name()}child(){}container(){return this}view(){const doc=this.doc,tick=doc.clock.time+doc.tick,_view=this._view;if(this._tick===tick)return _view;const view=[],index=doc.index;let useCache=!0;for(let chunk=this.first();chunk;chunk=this.next(chunk))if(!chunk.del)for(const node of chunk.data){const elementNode=index.get(node);if(!elementNode){useCache=!1;continue}const element=elementNode.view();_view[view.length]!==element&&(useCache=!1),view.push(element)}_view.length!==view.length&&(useCache=!1);return useCache?_view:(this._tick=tick,this._view=view)}children(callback){const index=this.doc.index;for(let chunk=this.first();chunk;chunk=this.next(chunk)){const data=chunk.data;if(!data)continue;const length=data.length;for(let i=0;i<length;i++)callback(index.get(data[i]))}}name(){return"arr"}printChunk(tab,chunk){const pos=this.pos(chunk);let valueTree="";if(!chunk.del){const index=this.doc.index;valueTree=(0,printTree_1.printTree)(tab,chunk.data.map(id=>index.get(id)).filter(node=>!!node).map((node,i)=>tab=>`[${pos+i}]: ${node.toString(tab+"    "+" ".repeat(String(i).length))}`))}return this.formatChunk(chunk)+valueTree+(0,printBinary_1.printBinary)(tab,[chunk.l?tab=>this.printChunk(tab,chunk.l):null,chunk.r?tab=>this.printChunk(tab,chunk.r):null])}}exports.ArrNode=ArrNode},"./node_modules/json-joy/lib/json-crdt/nodes/bin/BinNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.BinNode=exports.BinChunk=void 0;const clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),AbstractRga_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/rga/AbstractRga.js");class BinChunk{constructor(id,span,buf){this.id=id,this.span=span,this.len=buf?span:0,this.del=!buf,this.p=void 0,this.l=void 0,this.r=void 0,this.s=void 0,this.data=buf}merge(data){const length=this.data.length,combined=new Uint8Array(length+data.length);combined.set(this.data),combined.set(data,length),this.data=combined,this.span=combined.length}split(ticks){if(!this.del){const data=this.data,rightBuffer=data.subarray(ticks),chunk=new BinChunk((0,clock_1.tick)(this.id,ticks),this.span-ticks,rightBuffer);return this.data=data.subarray(0,ticks),this.span=ticks,chunk}const chunk=new BinChunk((0,clock_1.tick)(this.id,ticks),this.span-ticks,void 0);return this.span=ticks,chunk}delete(){this.del=!0,this.data=void 0}clone(){return new BinChunk(this.id,this.span,this.data)}view(){return this.data||new Uint8Array(0)}}exports.BinChunk=BinChunk;class BinNode extends AbstractRga_1.AbstractRga{constructor(){super(...arguments),this._view=null,this.api=void 0}view(){if(this._view)return this._view;const res=new Uint8Array(this.length());let offset=0,chunk=this.first();for(;chunk;){if(!chunk.del){const buf=chunk.data;res.set(buf,offset),offset+=buf.length}chunk=this.next(chunk)}return this._view=res}children(){}child(){}container(){}name(){return"bin"}createChunk(id,buf){return new BinChunk(id,buf?buf.length:0,buf)}onChange(){this._view=null}toStringName(){return this.name()}}exports.BinNode=BinNode},"./node_modules/json-joy/lib/json-crdt/nodes/const/ConNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConNode=void 0;const clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js");exports.ConNode=class ConNode{constructor(id,val){this.id=id,this.val=val,this.api=void 0}children(){}child(){}container(){}view(){return this.val}name(){return"con"}toString(tab){const val=this.val,valFormatted=val instanceof Uint8Array?`Uint8Array { ${(""+val).replaceAll(",",", ")} }`:`{ ${val instanceof clock_1.Timestamp?(0,clock_1.printTs)(val):JSON.stringify(val)} }`;return`${this.name()} ${(0,clock_1.printTs)(this.id)} ${valFormatted}`}}},"./node_modules/json-joy/lib/json-crdt/nodes/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/types.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/nodes.js"),exports)},"./node_modules/json-joy/lib/json-crdt/nodes/nodes.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.StrChunk=exports.StrNode=exports.BinChunk=exports.BinNode=exports.ArrChunk=exports.ArrNode=exports.ObjNode=exports.VecNode=exports.RootNode=exports.ValNode=exports.ConNode=void 0;var ConNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/const/ConNode.js");Object.defineProperty(exports,"ConNode",{enumerable:!0,get:function(){return ConNode_1.ConNode}});var ValNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/val/ValNode.js");Object.defineProperty(exports,"ValNode",{enumerable:!0,get:function(){return ValNode_1.ValNode}});var RootNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/root/RootNode.js");Object.defineProperty(exports,"RootNode",{enumerable:!0,get:function(){return RootNode_1.RootNode}});var VecNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/vec/VecNode.js");Object.defineProperty(exports,"VecNode",{enumerable:!0,get:function(){return VecNode_1.VecNode}});var ObjNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/obj/ObjNode.js");Object.defineProperty(exports,"ObjNode",{enumerable:!0,get:function(){return ObjNode_1.ObjNode}});var ArrNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/arr/ArrNode.js");Object.defineProperty(exports,"ArrNode",{enumerable:!0,get:function(){return ArrNode_1.ArrNode}}),Object.defineProperty(exports,"ArrChunk",{enumerable:!0,get:function(){return ArrNode_1.ArrChunk}});var BinNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/bin/BinNode.js");Object.defineProperty(exports,"BinNode",{enumerable:!0,get:function(){return BinNode_1.BinNode}}),Object.defineProperty(exports,"BinChunk",{enumerable:!0,get:function(){return BinNode_1.BinChunk}});var StrNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/str/StrNode.js");Object.defineProperty(exports,"StrNode",{enumerable:!0,get:function(){return StrNode_1.StrNode}}),Object.defineProperty(exports,"StrChunk",{enumerable:!0,get:function(){return StrNode_1.StrChunk}})},"./node_modules/json-joy/lib/json-crdt/nodes/obj/ObjNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObjNode=void 0;const printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),ConNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/const/ConNode.js");exports.ObjNode=class ObjNode{constructor(doc,id){this.doc=doc,this.id=id,this.keys=new Map,this._tick=0,this._view={},this.api=void 0}get(key){const id=this.keys.get(key);if(id)return this.doc.index.get(id)}put(key,id){const currentId=this.keys.get(key);if(!(currentId&&(0,clock_1.compare)(currentId,id)>=0))return this.keys.set(key,id),currentId}nodes(callback){const index=this.doc.index;this.keys.forEach((id,key)=>callback(index.get(id),key))}forEach(callback){const index=this.doc.index;this.keys.forEach((id,key)=>{const value=index.get(id);!value||value instanceof ConNode_1.ConNode&&void 0===value.val||callback(key,value)})}children(callback){const index=this.doc.index;this.keys.forEach((id,key)=>callback(index.get(id)))}child(){}container(){return this}view(){const doc=this.doc,tick=doc.clock.time+doc.tick,_view=this._view;if(this._tick===tick)return _view;const view={},index=doc.index;let useCache=!0;return this.keys.forEach((id,key)=>{const valueNode=index.get(id);if(!valueNode)return void(useCache=!1);const value=valueNode.view();void 0!==value?(_view[key]!==value&&(useCache=!1),view[key]=value):void 0!==_view[key]&&(useCache=!1)}),useCache?_view:(this._tick=tick,this._view=view)}name(){return"obj"}toString(tab=""){return this.name()+" "+(0,clock_1.printTs)(this.id)+(0,printTree_1.printTree)(tab,[...this.keys.entries()].filter(([,id])=>!!this.doc.index.get(id)).map(([key,id])=>tab=>JSON.stringify(key)+(0,printTree_1.printTree)(tab+" ",[tab=>this.doc.index.get(id).toString(tab)])))}}},"./node_modules/json-joy/lib/json-crdt/nodes/rga/AbstractRga.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractRga=void 0;const clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),isUint8Array_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/isUint8Array.js"),util_1=__webpack_require__("./node_modules/sonic-forest/lib/splay/util.js"),util2_1=__webpack_require__("./node_modules/sonic-forest/lib/splay/util2.js"),util2_2=__webpack_require__("./node_modules/sonic-forest/lib/util2.js"),constants_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/constants.js"),printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),printBinary_1=__webpack_require__("./node_modules/tree-dump/lib/printBinary.js"),printOctets_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/buffers/printOctets.js"),compareById=(c1,c2)=>{const ts1=c1.id,ts2=c2.id;return ts1.sid-ts2.sid||ts1.time-ts2.time},updateLenOne=chunk=>{const l=chunk.l,r=chunk.r;chunk.len=(chunk.del?0:chunk.span)+(l?l.len:0)+(r?r.len:0)},updateLenOneLive=chunk=>{const l=chunk.l,r=chunk.r;chunk.len=chunk.span+(l?l.len:0)+(r?r.len:0)},dLen=(chunk,delta)=>{for(;chunk;)chunk.len+=delta,chunk=chunk.p},next=curr=>{const r=curr.r;if(r){let tmp;for(curr=r;tmp=curr.l;)curr=tmp;return curr}let p=curr.p;for(;p&&p.r===curr;)curr=p,p=p.p;return p},prev=curr=>{const l=curr.l;if(l){let tmp;for(curr=l;tmp=curr.r;)curr=tmp;return curr}let p=curr.p;for(;p&&p.l===curr;)curr=p,p=p.p;return p};exports.AbstractRga=class AbstractRga{constructor(id){this.id=id,this.root=void 0,this.ids=void 0,this.count=0}ins(after,id,content){const rootId=this.id,afterTime=after.time,afterSid=after.sid;if(rootId.time===afterTime&&rootId.sid===afterSid)return void this.insAfterRoot(after,id,content);let curr=this.ids,chunk=curr;for(;curr;){const currId=curr.id,currIdSid=currId.sid;if(currIdSid>afterSid)curr=curr.l2;else if(currIdSid<afterSid)chunk=curr,curr=curr.r2;else{const currIdTime=currId.time;if(currIdTime>afterTime)curr=curr.l2;else{if(!(currIdTime<afterTime)){chunk=curr;break}chunk=curr,curr=curr.r2}}}if(!chunk)return;const atId=chunk.id,atIdTime=atId.time,atIdSid=atId.sid,atSpan=chunk.span;if(atIdSid!==afterSid)return;if(afterTime-atIdTime>=atSpan)return;const offsetInInsertAtChunk=afterTime-atIdTime;this.insAfterChunk(after,chunk,offsetInInsertAtChunk,id,content)}insAt(position,id,content){if(!position){const rootId=this.id;return this.insAfterRoot(rootId,id,content),rootId}const found=this.findChunk(position-1);if(!found)return;const[at,offset]=found,atId=at.id,after=0===offset?atId:new clock_1.Timestamp(atId.sid,atId.time+offset);return this.insAfterChunk(after,at,offset,id,content),after}insAfterRoot(after,id,content){const chunk=this.createChunk(id,content),first=this.first();if(first)if((0,clock_1.compare)(first.id,id)<0)this.insertBefore(chunk,first);else{if((0,clock_1.containsId)(first.id,first.span,id))return;this.insertAfterRef(chunk,after,first)}else this.setRoot(chunk)}insAfterChunk(after,chunk,chunkOffset,id,content){const atId=chunk.id,atIdTime=atId.time,atIdSid=atId.sid,atSpan=chunk.span,newChunk=this.createChunk(id,content);if(chunkOffset+1<atSpan){const idSid=id.sid,idTime=id.time;if(atIdSid===idSid&&atIdTime<=idTime&&atIdTime+atSpan-1>=idTime)return;if(idTime>after.time+1||idSid>after.sid)return this.insertInside(newChunk,chunk,chunkOffset+1),void this.splay(newChunk)}this.insertAfterRef(newChunk,after,chunk),this.splay(newChunk)}delete(spans){const length=spans.length;for(let i=0;i<length;i++)this.deleteSpan(spans[i]);this.onChange()}deleteSpan(span){const len=span.span,t1=span.time,t2=t1+len-1,start=this.findById(span);if(!start)return;let chunk=start,last=chunk;for(;chunk;){last=chunk;const id=chunk.id,chunkSpan=chunk.span,c1=id.time,c2=c1+chunkSpan-1;if(chunk.del){if(c2>=t2)break;chunk=chunk.s;continue}const deleteStartsInTheMiddle=t1<=c2;if(t1<=c1){if(!(t2>=c2)){const range=t2-c1+1,newChunk=this.split(chunk,range);chunk.delete(),updateLenOne(newChunk),dLen(chunk,-chunk.span);break}if(chunk.delete(),dLen(chunk,-chunk.span),t2<=c2)break}else if(deleteStartsInTheMiddle){if(!(t2>=c2)){const right=this.split(chunk,t2-c1+1),mid=this.split(chunk,t1-c1);mid.delete(),updateLenOne(right),updateLenOne(mid),dLen(chunk,-mid.span);break}{const offset=t1-c1,newChunk=this.split(chunk,offset);if(newChunk.delete(),newChunk.len=newChunk.r?newChunk.r.len:0,dLen(chunk,-newChunk.span),t2<=c2)break}}chunk=chunk.s}last&&this.mergeTombstones2(start,last)}find(position){let curr=this.root;for(;curr;){const l=curr.l,leftLength=l?l.len:0;let span;if(position<leftLength)curr=l;else if(curr.del)position-=leftLength,curr=curr.r;else{if(position<leftLength+(span=curr.span)){const ticks=position-leftLength,id=curr.id;return ticks?new clock_1.Timestamp(id.sid,id.time+ticks):id}position-=leftLength+span,curr=curr.r}}}findChunk(position){let curr=this.root;for(;curr;){const l=curr.l,leftLength=l?l.len:0;let span;if(position<leftLength)curr=l;else if(curr.del)position-=leftLength,curr=curr.r;else{if(position<leftLength+(span=curr.span))return[curr,position-leftLength];position-=leftLength+span,curr=curr.r}}}findInterval(position,length){const ranges=[];if(!length)return ranges;let curr=this.root,offset=0;for(;curr;){const leftLength=curr.l?curr.l.len:0;if(position<leftLength)curr=curr.l;else if(curr.del)position-=leftLength,curr=curr.r;else{if(position<leftLength+curr.span){offset=position-leftLength;break}position-=leftLength+curr.span,curr=curr.r}}if(!curr)return ranges;if(curr.span>=length+offset){const id=curr.id;return ranges.push((0,clock_1.tss)(id.sid,id.time+offset,length)),ranges}const len=curr.span-offset,id=curr.id;if(ranges.push((0,clock_1.tss)(id.sid,id.time+offset,len)),length-=len,curr=next(curr),!curr)return ranges;do{if(curr.del)continue;const id=curr.id,span=curr.span;if(length<=span)return ranges.push((0,clock_1.tss)(id.sid,id.time,length)),ranges;ranges.push((0,clock_1.tss)(id.sid,id.time,span)),length-=span}while((curr=next(curr))&&length>0);return ranges}findInterval2(from,to){const ranges=[];return this.range0(void 0,from,to,(chunk,off,len)=>{const id=chunk.id;ranges.push((0,clock_1.tss)(id.sid,id.time+off,len))}),ranges}range0(startChunk,from,to,callback){let chunk=startChunk||this.findById(from);if(startChunk)for(;chunk&&!(0,clock_1.containsId)(chunk.id,chunk.span,from);)chunk=next(chunk);if(chunk){if(chunk.del){if((0,clock_1.containsId)(chunk.id,chunk.span,to))return}else{const off=from.time-chunk.id.time;if((0,clock_1.containsId)(chunk.id,chunk.span,to)){return callback(chunk,off,to.time-from.time+1),chunk}if(callback(chunk,off,chunk.span-off))return chunk}for(chunk=next(chunk);chunk;){if((0,clock_1.containsId)(chunk.id,chunk.span,to))return!chunk.del&&callback(chunk,0,to.time-chunk.id.time+1),chunk;if(!chunk.del&&callback(chunk,0,chunk.span))return chunk;chunk=next(chunk)}return chunk}}first(){let curr=this.root;for(;curr;){const l=curr.l;if(!l)return curr;curr=l}return curr}last(){let curr=this.root;for(;curr;){const r=curr.r;if(!r)return curr;curr=r}return curr}lastId(){const chunk=this.last();if(!chunk)return;const id=chunk.id,span=chunk.span;return 1===span?id:new clock_1.Timestamp(id.sid,id.time+span-1)}next(curr){return next(curr)}prev(curr){return prev(curr)}length(){const root=this.root;return root?root.len:0}size(){return this.count}pos(chunk){const p=chunk.p,l=chunk.l;if(!p)return l?l.len:0;const parentPos=this.pos(p);if(p.r===chunk)return parentPos+(p.del?0:p.span)+(l?l.len:0);const r=chunk.r;return parentPos-(chunk.del?0:chunk.span)-(r?r.len:0)}setRoot(chunk){this.root=chunk,this.insertId(chunk),this.onChange()}insertBefore(chunk,before){const l=before.l;before.l=chunk,chunk.l=l,chunk.p=before;let lLen=0;l&&(l.p=chunk,lLen=l.len),chunk.len=chunk.span+lLen,dLen(before,chunk.span),this.insertId(chunk),this.onChange()}insertAfter(chunk,after){const r=after.r;after.r=chunk,chunk.r=r,chunk.p=after;let rLen=0;r&&(r.p=chunk,rLen=r.len),chunk.len=chunk.span+rLen,dLen(after,chunk.span),this.insertId(chunk),this.onChange()}insertAfterRef(chunk,ref,left){const id=chunk.id,sid=id.sid,time=id.time;let isSplit=!1;for(;;){const leftId=left.id,leftNextTick=leftId.time+left.span;left.s||(isSplit=leftId.sid===sid&&leftNextTick===time&&leftNextTick-1===ref.time,isSplit&&(left.s=chunk));const right=next(left);if(!right)break;const rightId=right.id,rightIdTime=rightId.time,rightIdSid=rightId.sid;if(rightIdTime<time)break;if(rightIdTime===time){if(rightIdSid===sid)return;if(rightIdSid<sid)break}left=right}isSplit&&!left.del?(this.mergeContent(left,chunk.data),left.s=void 0):this.insertAfter(chunk,left)}mergeContent(chunk,content){const span1=chunk.span;chunk.merge(content),dLen(chunk,chunk.span-span1),this.onChange()}insertInside(chunk,at,offset){const p=at.p,l=at.l,r=at.r,s=at.s,len=at.len,at2=at.split(offset);if(at.s=at2,at2.s=s,at.l=at.r=at2.l=at2.r=void 0,at2.l=void 0,chunk.p=p,l){chunk.l=l,l.p=chunk;const a=l.r;l.r=at,at.p=l,at.l=a,a&&(a.p=at)}else chunk.l=at,at.p=chunk;if(r){chunk.r=r,r.p=chunk;const b=r.l;r.l=at2,at2.p=r,at2.r=b,b&&(b.p=at2)}else chunk.r=at2,at2.p=chunk;p?p.l===at?p.l=chunk:p.r=chunk:this.root=chunk,updateLenOne(at),updateLenOne(at2),l&&(l.len=(l.l?l.l.len:0)+at.len+(l.del?0:l.span)),r&&(r.len=(r.r?r.r.len:0)+at2.len+(r.del?0:r.span)),chunk.len=len+chunk.span;const span=chunk.span;let curr=chunk.p;for(;curr;)curr.len+=span,curr=curr.p;this.insertId(at2),this.insertIdFast(chunk),this.onChange()}split(chunk,ticks){const s=chunk.s,newChunk=chunk.split(ticks),r=chunk.r;return chunk.s=newChunk,newChunk.r=r,newChunk.s=s,chunk.r=newChunk,newChunk.p=chunk,this.insertId(newChunk),r&&(r.p=newChunk),newChunk}mergeTombstones(ch1,ch2){if(!ch1.del||!ch2.del)return!1;const id1=ch1.id,id2=ch2.id;return id1.sid===id2.sid&&(id1.time+ch1.span===id2.time&&(ch1.s=ch2.s,ch1.span+=ch2.span,this.deleteChunk(ch2),!0))}mergeTombstones2(start,end){let curr=start;for(;curr;){const nextCurr=next(curr);if(!nextCurr)break;if(!this.mergeTombstones(curr,nextCurr)){if(nextCurr===end){if(nextCurr){const n=next(nextCurr);n&&this.mergeTombstones(nextCurr,n)}break}curr=curr.s}}const left=prev(start);left&&this.mergeTombstones(left,start)}removeTombstones(){let curr=this.first();const list=[];for(;curr;)curr.del&&list.push(curr),curr=next(curr);for(let i=0;i<list.length;i++)this.deleteChunk(list[i])}deleteChunk(chunk){this.deleteId(chunk);const p=chunk.p,l=chunk.l,r=chunk.r;if(chunk.id=constants_1.ORIGIN,l||r)if(l&&r){let mostRightChildFromLeft=l;for(;mostRightChildFromLeft.r;)mostRightChildFromLeft=mostRightChildFromLeft.r;mostRightChildFromLeft.r=r,r.p=mostRightChildFromLeft;const rLen=r.len;let curr;for(curr=mostRightChildFromLeft,p?(p.l===chunk?p.l=l:p.r=l,l.p=p):(this.root=l,l.p=void 0);curr&&curr!==p;)curr.len+=rLen,curr=curr.p}else{const child=l||r;child.p=p,p?p.l===chunk?p.l=child:p.r=child:this.root=child}else p?p.l===chunk?p.l=void 0:p.r=void 0:this.root=void 0}insertId(chunk){this.ids=(0,util2_2.insert2)(this.ids,chunk,compareById),this.count++,this.ids=(0,util2_1.splay2)(this.ids,chunk)}insertIdFast(chunk){this.ids=(0,util2_2.insert2)(this.ids,chunk,compareById),this.count++}deleteId(chunk){this.ids=(0,util2_2.remove2)(this.ids,chunk),this.count--}findById(after){const afterSid=after.sid,afterTime=after.time;let curr=this.ids,chunk=curr;for(;curr;){const currId=curr.id,currIdSid=currId.sid;if(currIdSid>afterSid)curr=curr.l2;else if(currIdSid<afterSid)chunk=curr,curr=curr.r2;else{const currIdTime=currId.time;if(currIdTime>afterTime)curr=curr.l2;else{if(!(currIdTime<afterTime)){chunk=curr;break}chunk=curr,curr=curr.r2}}}if(!chunk)return;const atId=chunk.id,atIdTime=atId.time,atIdSid=atId.sid,atSpan=chunk.span;if(atIdSid!==afterSid)return;if(afterTime<atIdTime)return;return afterTime-atIdTime>=atSpan?void 0:chunk}prevId(id){let chunk=this.findById(id);if(!chunk)return;const time=id.time;if(chunk.id.time<time)return new clock_1.Timestamp(id.sid,time-1);if(chunk=prev(chunk),!chunk)return;const prevId=chunk.id;return chunk.span>1?new clock_1.Timestamp(prevId.sid,prevId.time+chunk.span-1):prevId}spanView(span){const view=[];let remaining=span.span;const time=span.time;let chunk=this.findById(span);if(!chunk)return view;if(!chunk.del){if(chunk.span>=remaining+time-chunk.id.time){const offset=time-chunk.id.time,end=offset+remaining,viewChunk=chunk.view().slice(offset,end);return view.push(viewChunk),view}{const offset=time-chunk.id.time,viewChunk=chunk.view().slice(offset,span.span);remaining-=chunk.span-offset,view.push(viewChunk)}}for(;chunk=chunk.s;){const chunkSpan=chunk.span;if(!chunk.del){if(chunkSpan>remaining){const viewChunk=chunk.view().slice(0,remaining);view.push(viewChunk);break}view.push(chunk.data)}if(remaining-=chunkSpan,remaining<=0)break}return view}splay(chunk){const p=chunk.p;if(!p)return;const pp=p.p,l2=p.l===chunk;if(!pp)return l2?(0,util_1.rSplay)(chunk,p):(0,util_1.lSplay)(chunk,p),this.root=chunk,updateLenOne(p),void updateLenOneLive(chunk);const l1=pp.l===p;this.root=l1?l2?(0,util_1.llSplay)(this.root,chunk,p,pp):(0,util_1.lrSplay)(this.root,chunk,p,pp):l2?(0,util_1.rlSplay)(this.root,chunk,p,pp):(0,util_1.rrSplay)(this.root,chunk,p,pp),updateLenOne(pp),updateLenOne(p),updateLenOneLive(chunk),this.splay(chunk)}iterator(){let curr=this.first();return()=>{const res=curr;return curr&&(curr=next(curr)),res}}ingest(size,next){if(size<1)return;const splitLeftChunks=new Map;this.root=this._ingest(size,()=>{const chunk=next(),id=chunk.id,key=id.sid+"."+id.time,split=splitLeftChunks.get(key);split&&(split.s=chunk,splitLeftChunks.delete(key));const nextStampAfterSpan=(0,clock_1.tick)(id,chunk.span);return splitLeftChunks.set(nextStampAfterSpan.sid+"."+nextStampAfterSpan.time,chunk),chunk})}_ingest(size,next){const leftSize=size>>1,rightSize=size-leftSize-1,c1=leftSize>0?this._ingest(leftSize,next):void 0,c2=next();c1&&(c2.l=c1,c1.p=c2);const c3=rightSize>0?this._ingest(rightSize,next):void 0;return c3&&(c2.r=c3,c3.p=c2),updateLenOne(c2),this.insertId(c2),c2}toStringName(){return"AbstractRga"}toString(tab=""){const view=this.view();let value="";(0,isUint8Array_1.isUint8Array)(view)?value+=` { ${(0,printOctets_1.printOctets)(view)||"âˆ…"} }`:"string"==typeof view&&(value+=`{ ${view.length>32?JSON.stringify(view.substring(0,32))+" â€¦":JSON.stringify(view)} }`);return`${this.toStringName()} ${(0,clock_1.printTs)(this.id)} ${value}`+(0,printTree_1.printTree)(tab,[tab=>this.root?this.printChunk(tab,this.root):"âˆ…"])}printChunk(tab,chunk){return this.formatChunk(chunk)+(0,printBinary_1.printBinary)(tab,[chunk.l?tab=>this.printChunk(tab,chunk.l):null,chunk.r?tab=>this.printChunk(tab,chunk.r):null])}formatChunk(chunk){let str=`chunk ${(0,clock_1.printTs)(chunk.id)}:${chunk.span} .${chunk.len}.`;if(chunk.del)str+=` [${chunk.span}]`;else if((0,isUint8Array_1.isUint8Array)(chunk.data))str+=` { ${(0,printOctets_1.printOctets)(chunk.data)||"âˆ…"} }`;else if("string"==typeof chunk.data){str+=` { ${chunk.data.length>32?JSON.stringify(chunk.data.substring(0,32))+" â€¦":JSON.stringify(chunk.data)} }`}return str}}},"./node_modules/json-joy/lib/json-crdt/nodes/root/RootNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RootNode=void 0;const constants_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/constants.js"),ValNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/val/ValNode.js");class RootNode extends ValNode_1.ValNode{constructor(doc,val){super(doc,constants_1.ORIGIN,val)}name(){return"root"}}exports.RootNode=RootNode},"./node_modules/json-joy/lib/json-crdt/nodes/str/StrNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.StrNode=exports.StrChunk=void 0;const clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),AbstractRga_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/rga/AbstractRga.js"),util_1=__webpack_require__("./node_modules/sonic-forest/lib/util/index.js");class StrChunk{constructor(id,span,str){this.id=id,this.span=span,this.len=str?span:0,this.del=!str,this.p=void 0,this.l=void 0,this.r=void 0,this.p2=void 0,this.l2=void 0,this.r2=void 0,this.s=void 0,this.data=str}merge(str){this.data+=str,this.span=this.data.length}split(ticks){if(!this.del){const chunk=new StrChunk((0,clock_1.tick)(this.id,ticks),this.span-ticks,this.data.slice(ticks));return this.data=this.data.slice(0,ticks),this.span=ticks,chunk}const chunk=new StrChunk((0,clock_1.tick)(this.id,ticks),this.span-ticks,"");return this.span=ticks,chunk}delete(){this.del=!0,this.data=""}clone(){return new StrChunk(this.id,this.span,this.data)}view(){return this.data}}exports.StrChunk=StrChunk;class StrNode extends AbstractRga_1.AbstractRga{constructor(){super(...arguments),this._view="",this.api=void 0}children(){}child(){}container(){}view(){if(this._view)return this._view;let str="";for(let chunk=this.first();chunk;chunk=(0,util_1.next)(chunk))str+=chunk.data;return this._view=str}name(){return"str"}createChunk(id,str){return new StrChunk(id,str?str.length:0,str||"")}onChange(){this._view=""}toStringName(){return this.name()}}exports.StrNode=StrNode},"./node_modules/json-joy/lib/json-crdt/nodes/types.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/json-joy/lib/json-crdt/nodes/val/ValNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValNode=void 0;const clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js"),printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),Model_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/model/Model.js");exports.ValNode=class ValNode{constructor(doc,id,val){this.doc=doc,this.id=id,this.val=val,this.api=void 0}set(val){if((0,clock_1.compare)(val,this.val)<=0&&0!==this.val.sid)return;if((0,clock_1.compare)(val,this.id)<=0)return;const oldVal=this.val;return this.val=val,oldVal}node(){return 0===this.val.sid?Model_1.UNDEFINED:this.child()}view(){return this.node()?.view()}children(callback){callback(this.node())}child(){return this.doc.index.get(this.val)}container(){const child=this.node();return child?child.container():void 0}name(){return"val"}toString(tab=""){const node=this.node();return this.name()+" "+(0,clock_1.printTs)(this.id)+(0,printTree_1.printTree)(tab,[tab=>node?node.toString(tab):(0,clock_1.printTs)(this.val)])}}},"./node_modules/json-joy/lib/json-crdt/nodes/vec/VecNode.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.VecNode=void 0;const ConNode_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/nodes/const/ConNode.js"),constants_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/constants.js"),printTree_1=__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),clock_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/clock/index.js");exports.VecNode=class VecNode{constructor(doc,id){this.doc=doc,this.id=id,this.elements=[],this.__extNode=void 0,this._view=[],this.api=void 0}length(){return this.elements.length}val(index){return this.elements[index]}get(index){const id=this.elements[index];if(id)return this.doc.index.get(id)}put(index,id){if(index>constants_1.CRDT_CONSTANTS.MAX_TUPLE_LENGTH)throw new Error("OUT_OF_BOUNDS");const currentId=this.val(index);if(!(currentId&&(0,clock_1.compare)(currentId,id)>=0)){if(index>this.elements.length)for(let i=this.elements.length;i<index;i++)this.elements.push(void 0);return index<this.elements.length?this.elements[index]=id:this.elements.push(id),currentId}}ext(){if(this.__extNode)return this.__extNode;const extensionId=this.getExtId();if(!(extensionId>=0))return;const extension=this.doc.ext.get(extensionId);return extension?(this.__extNode=new extension.Node(this.get(1)),this.__extNode):void 0}isExt(){return!!this.ext()}getExtId(){if(2!==this.elements.length)return-1;const type=this.get(0);if(!(type instanceof ConNode_1.ConNode))return-1;const buf=type.val,id=this.id;return buf instanceof Uint8Array&&3===buf.length&&buf[1]===id.sid%256&&buf[2]===id.time%256?buf[0]:-1}child(){return this.ext()}container(){return this}children(callback){const elements=this.elements,length=elements.length,index=this.doc.index;for(let i=0;i<length;i++){const id=elements[i];if(!id)continue;const node=index.get(id);node&&callback(node)}}view(){const extNode=this.ext();if(extNode)return extNode.view();let useCache=!0;const _view=this._view,arr=[],index=this.doc.index,elements=this.elements,length=elements.length;for(let i=0;i<length;i++){const id=elements[i],node=id?index.get(id):void 0,value=node?node.view():void 0;_view[i]!==value&&(useCache=!1),arr.push(value)}return useCache?_view:this._view=arr}name(){return"vec"}toString(tab=""){const extNode=this.ext(),header=this.name()+" "+(0,clock_1.printTs)(this.id)+(extNode?` { extension = ${this.getExtId()} }`:"");if(extNode)return this.child().toString(tab,this.id);const index=this.doc.index;return header+(0,printTree_1.printTree)(tab,[...this.elements.map((id,i)=>tab=>`${i}: ${id&&index.get(id)?index.get(id).toString(tab+"  "+" ".repeat((""+i).length)):"nil"}`),...extNode?[tab=>`${this.child().toString(tab)}`]:[]])}}},"./node_modules/json-joy/lib/json-hash/hash.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.hash=exports.updateJson=exports.updateBin=exports.updateStr=exports.updateNum=exports.CONST=void 0;const insertion_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/sort/insertion.js");var CONST;!function(CONST){CONST[CONST.START_STATE=5381]="START_STATE",CONST[CONST.NULL=982452847]="NULL",CONST[CONST.TRUE=982453247]="TRUE",CONST[CONST.FALSE=982454243]="FALSE",CONST[CONST.ARRAY=982452259]="ARRAY",CONST[CONST.STRING=982453601]="STRING",CONST[CONST.OBJECT=982454533]="OBJECT",CONST[CONST.BINARY=982454837]="BINARY"}(CONST||(exports.CONST=CONST={}));exports.updateNum=(state,num)=>(state<<5)+state+num;exports.updateStr=(state,str)=>{const length=str.length;state=(0,exports.updateNum)(state,CONST.STRING),state=(0,exports.updateNum)(state,length);let i=length;for(;i;)state=(state<<5)+state+str.charCodeAt(--i);return state};exports.updateBin=(state,bin)=>{const length=bin.length;state=(0,exports.updateNum)(state,CONST.BINARY),state=(0,exports.updateNum)(state,length);let i=length;for(;i;)state=(state<<5)+state+bin[--i];return state};exports.updateJson=(state,json)=>{switch(typeof json){case"number":return(0,exports.updateNum)(state,json);case"string":return state=(0,exports.updateNum)(state,CONST.STRING),(0,exports.updateStr)(state,json);case"object":{if(null===json)return(0,exports.updateNum)(state,CONST.NULL);if(Array.isArray(json)){const length=json.length;state=(0,exports.updateNum)(state,CONST.ARRAY);for(let i=0;i<length;i++)state=(0,exports.updateJson)(state,json[i]);return state}if(json instanceof Uint8Array)return(0,exports.updateBin)(state,json);state=(0,exports.updateNum)(state,CONST.OBJECT);const keys=(0,insertion_1.sort)(Object.keys(json)),length=keys.length;for(let i=0;i<length;i++){const key=keys[i];state=(0,exports.updateStr)(state,key),state=(0,exports.updateJson)(state,json[key])}return state}case"boolean":return(0,exports.updateNum)(state,json?CONST.TRUE:CONST.FALSE)}return state};exports.hash=json=>(0,exports.updateJson)(CONST.START_STATE,json)>>>0},"./node_modules/json-joy/lib/json-hash/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-hash/hash.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/json-joy/lib/json-hash/structHash.js"),exports)},"./node_modules/json-joy/lib/json-hash/structHash.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.structHash=void 0;const insertion_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/sort/insertion.js"),hash_1=__webpack_require__("./node_modules/json-joy/lib/json-hash/hash.js");exports.structHash=val=>{switch(typeof val){case"string":return(0,hash_1.hash)(val).toString(36);case"number":case"bigint":return val.toString(36);case"boolean":return val?"T":"F";case"object":if(null===val)return"N";if(Array.isArray(val)){const length=val.length;let res="[";for(let i=0;i<length;i++)res+=(0,exports.structHash)(val[i])+",";return res+"]"}if(val instanceof Uint8Array)return(0,hash_1.hash)(val).toString(36);{const keys=Object.keys(val);(0,insertion_1.sort)(keys);let res="{";const length=keys.length;for(let i=0;i<length;i++){const key=keys[i];res+=(0,hash_1.hash)(key).toString(36)+":"+(0,exports.structHash)(val[key])+","}return res+"}"}default:return"U"}}},"./node_modules/json-joy/lib/json-hash/structHashCrdt.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.structHashCrdt=void 0;const insertion_1=__webpack_require__("./node_modules/@jsonjoy.com/util/lib/sort/insertion.js"),json_crdt_1=__webpack_require__("./node_modules/json-joy/lib/json-crdt/index.js"),hash_1=__webpack_require__("./node_modules/json-joy/lib/json-hash/hash.js"),structHash_1=__webpack_require__("./node_modules/json-joy/lib/json-hash/structHash.js");exports.structHashCrdt=node=>{if(node instanceof json_crdt_1.ConNode)return(0,structHash_1.structHash)(node.val);if(node instanceof json_crdt_1.ValNode)return(0,exports.structHashCrdt)(node.node());if(node instanceof json_crdt_1.StrNode)return(0,hash_1.hash)(node.view()).toString(36);if(node instanceof json_crdt_1.ObjNode){let res="{";const keys=Array.from(node.keys.keys());(0,insertion_1.sort)(keys);const length=keys.length;for(let i=0;i<length;i++){const key=keys[i],value=node.get(key);res+=(0,hash_1.hash)(key).toString(36)+":"+(0,exports.structHashCrdt)(value)+","}return res+"}"}if(node instanceof json_crdt_1.ArrNode||node instanceof json_crdt_1.VecNode){let res="[";return node.children(child=>{res+=(0,exports.structHashCrdt)(child)+","}),res+"]"}return node instanceof json_crdt_1.BinNode?(0,hash_1.hash)(node.view()).toString(36):"U"}},"./node_modules/json-joy/lib/util/diff/bin.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.dst=exports.src=exports.apply=exports.diff=exports.toBin=exports.toStr=void 0;const str=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importStar(__webpack_require__("./node_modules/json-joy/lib/util/diff/str.js"));exports.toStr=buf=>{let hex="";const length=buf.length;for(let i=0;i<length;i++)hex+=String.fromCharCode(buf[i]);return hex};exports.toBin=hex=>{const length=hex.length,buf=new Uint8Array(length);for(let i=0;i<length;i++)buf[i]=hex.charCodeAt(i);return buf};exports.diff=(src,dst)=>{const txtSrc=(0,exports.toStr)(src),txtDst=(0,exports.toStr)(dst);return str.diff(txtSrc,txtDst)};exports.apply=(patch,srcLen,onInsert,onDelete)=>str.apply(patch,srcLen,(pos,str)=>onInsert(pos,(0,exports.toBin)(str)),onDelete);exports.src=patch=>(0,exports.toBin)(str.src(patch));exports.dst=patch=>(0,exports.toBin)(str.dst(patch))},"./node_modules/json-joy/lib/util/diff/line.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.diff=exports.agg=void 0;const str=__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__importStar(__webpack_require__("./node_modules/json-joy/lib/util/diff/str.js"));exports.agg=patch=>{const lines=[],length=patch.length;let line=[];const push=(type,str)=>{if(!str.length)return;const length=line.length;if(length){const lastOp=line[length-1];if(lastOp[0]===type)return void(lastOp[1]+=str)}line.push([type,str])};LINES:for(let i=0;i<length;i++){const op=patch[i],type=op[0],str=op[1],index=str.indexOf("\n");if(index<0){push(type,str);continue LINES}push(type,str.slice(0,index+1)),line.length&&lines.push(line),line=[];let prevIndex=index;const strLen=str.length;LINE:for(;prevIndex<strLen;){const nextIndex=str.indexOf("\n",prevIndex+1);if(nextIndex<0){push(type,str.slice(prevIndex+1));break LINE}lines.push([[type,str.slice(prevIndex+1,nextIndex+1)]]),prevIndex=nextIndex}}line.length&&lines.push(line);{const length=lines.length;for(let i=0;i<length;i++){const line=lines[i];let lineLength=line.length;NORMALIZE_LINE_START:{if(lineLength<2)break NORMALIZE_LINE_START;const firstOp=line[0],secondOp=line[1],secondOpType=secondOp[0];if(0===firstOp[0]&&(-1===secondOpType||1===secondOpType)){for(let j=2;j<lineLength;j++)if(line[j][0]!==secondOpType)break NORMALIZE_LINE_START;for(let j=i+1;j<length;j++){const targetLine=lines[j],targetLineLength=targetLine.length,pfx=firstOp[1];let targetLineFirstOp,targetLineSecondOp;if(targetLine.length>1&&(targetLineFirstOp=targetLine[0])[0]===secondOpType&&0===(targetLineSecondOp=targetLine[1])[0]&&pfx===targetLineFirstOp[1])line.splice(0,1),secondOp[1]=pfx+secondOp[1],targetLineSecondOp[1]=pfx+targetLineSecondOp[1],targetLine.splice(0,1);else for(let k=0;k<targetLineLength;k++)if(targetLine[k][0]!==secondOpType)break NORMALIZE_LINE_START}}}lineLength=line.length;NORMALIZE_LINE_END:{if(lineLength<2)break NORMALIZE_LINE_END;const lastOp=line[line.length-1],lastOpStr=lastOp[1],secondLastOp=line[line.length-2];if(-1===lastOp[0])for(let j=i+1;j<length;j++){const targetLine=lines[j],targetLineLength=targetLine.length;if(targetLineLength<=1){if(-1!==targetLine[0][0])break NORMALIZE_LINE_END}else{const targetLineLastOp=targetLine[targetLine.length-1];if(0!==targetLineLastOp[0])break NORMALIZE_LINE_END;for(let k=0;k<targetLine.length-1;k++)if(-1!==targetLine[k][0])break NORMALIZE_LINE_END;let keepStr=targetLineLastOp[1];const keepStrEndsWithNl=keepStr.endsWith("\n");if(keepStrEndsWithNl||(keepStr+="\n"),keepStr.length>lastOpStr.length)break NORMALIZE_LINE_END;if(!lastOpStr.endsWith(keepStr))break NORMALIZE_LINE_END;const index=lastOpStr.length-keepStr.length;index<0?(lastOp[0]=0,0===secondLastOp[0]&&(secondLastOp[1]+=lastOpStr,line.splice(lineLength-1,1))):0===index?(line.splice(lineLength-1,1),0===secondLastOp[0]?secondLastOp[1]+=keepStr:line.push([0,keepStr])):(lastOp[1]=lastOpStr.slice(0,index),line.push([0,keepStr]));const targetLineSecondLastOp=targetLine[targetLine.length-2];-1===targetLineSecondLastOp[0]?(targetLineSecondLastOp[1]+=keepStrEndsWithNl?keepStr:keepStr.slice(0,-1),targetLine.splice(targetLineLength-1,1)):targetLineLastOp[0]=-1}}}}}return lines};exports.diff=(src,dst)=>{const srcTxt=src.join("\n")+"\n",dstTxt=dst.join("\n")+"\n";if(srcTxt===dstTxt)return[];const strPatch=str.diff(srcTxt,dstTxt),lines=(0,exports.agg)(strPatch),length=lines.length,patch=[];let srcIdx=-1,dstIdx=-1;const srcLength=src.length,dstLength=dst.length;for(let i=0;i<length;i++){const line=lines[i];let lineLength=line.length;if(!lineLength)continue;const lastOp=line[lineLength-1],lastOpType=lastOp[0],txt=lastOp[1];if("\n"===txt)line.splice(lineLength-1,1);else{const strLength=txt.length;"\n"===txt[strLength-1]&&(1===strLength?line.splice(lineLength-1,1):lastOp[1]=txt.slice(0,strLength-1))}let lineType=0;if(lineLength=line.length,i+1===length)srcIdx+1<srcLength?dstIdx+1<dstLength?(lineType=1===lineLength&&0===line[0][0]?0:2,srcIdx++,dstIdx++):(lineType=-1,srcIdx++):(lineType=1,dstIdx++);else{const type=line[0][0];1===lineLength&&type===lastOpType&&0===type?(srcIdx++,dstIdx++):0===lastOpType?(lineType=2,srcIdx++,dstIdx++):1===lastOpType?(lineType=1,dstIdx++):-1===lastOpType&&(lineType=-1,srcIdx++)}patch.push([lineType,srcIdx,dstIdx,line])}return patch}},"./node_modules/json-joy/lib/util/diff/str.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.apply=exports.invert=exports.dst=exports.src=exports.diffEdit=exports.diff=exports.sfx=exports.pfx=void 0;const startsWithPairEnd=str=>{const code=str.charCodeAt(0);return code>=56320&&code<=57343},endsWithPairStart=str=>{const code=str.charCodeAt(str.length-1);return code>=55296&&code<=56319},cleanupMerge=(diff,fixUnicode)=>{diff.push([0,""]);let pointer=0,delCnt=0,insCnt=0,delTxt="",insTxt="",commonLength=0;for(;pointer<diff.length;){if(pointer<diff.length-1&&!diff[pointer][1]){diff.splice(pointer,1);continue}const d1=diff[pointer];switch(d1[0]){case 1:insCnt++,pointer++,insTxt+=d1[1];break;case-1:delCnt++,pointer++,delTxt+=d1[1];break;case 0:{let prevEq=pointer-insCnt-delCnt-1;if(fixUnicode){const d=diff[prevEq];if(prevEq>=0){let str=d[1];if(endsWithPairStart(str)){const stray=str.slice(-1);if(d[1]=str=str.slice(0,-1),delTxt=stray+delTxt,insTxt=stray+insTxt,!str){diff.splice(prevEq,1),pointer--;let k=prevEq-1;const dk=diff[k];if(dk){const type=dk[0];1===type?(insCnt++,k--,insTxt=dk[1]+insTxt):-1===type&&(delCnt++,k--,delTxt=dk[1]+delTxt)}prevEq=k}}}const d1=diff[pointer],str1=d1[1];if(startsWithPairEnd(str1)){const stray=str1.charAt(0);d1[1]=str1.slice(1),delTxt+=stray,insTxt+=stray}}if(pointer<diff.length-1&&!diff[pointer][1]){diff.splice(pointer,1);break}const hasDelTxt=delTxt.length>0,hasInsTxt=insTxt.length>0;if(hasDelTxt||hasInsTxt){hasDelTxt&&hasInsTxt&&(commonLength=(0,exports.pfx)(insTxt,delTxt),0!==commonLength&&(prevEq>=0?diff[prevEq][1]+=insTxt.slice(0,commonLength):(diff.splice(0,0,[0,insTxt.slice(0,commonLength)]),pointer++),insTxt=insTxt.slice(commonLength),delTxt=delTxt.slice(commonLength)),commonLength=(0,exports.sfx)(insTxt,delTxt),0!==commonLength&&(diff[pointer][1]=insTxt.slice(insTxt.length-commonLength)+diff[pointer][1],insTxt=insTxt.slice(0,insTxt.length-commonLength),delTxt=delTxt.slice(0,delTxt.length-commonLength)));const n=insCnt+delCnt,delTxtLen=delTxt.length,insTxtLen=insTxt.length;0===delTxtLen&&0===insTxtLen?(diff.splice(pointer-n,n),pointer-=n):0===delTxtLen?(diff.splice(pointer-n,n,[1,insTxt]),pointer=pointer-n+1):0===insTxtLen?(diff.splice(pointer-n,n,[-1,delTxt]),pointer=pointer-n+1):(diff.splice(pointer-n,n,[-1,delTxt],[1,insTxt]),pointer=pointer-n+2)}const d0=diff[pointer-1];0!==pointer&&0===d0[0]?(d0[1]+=diff[pointer][1],diff.splice(pointer,1)):pointer++,insCnt=0,delCnt=0,delTxt="",insTxt="";break}}}""===diff[diff.length-1][1]&&diff.pop();let changes=!1;for(pointer=1;pointer<diff.length-1;){const d0=diff[pointer-1],d2=diff[pointer+1];if(0===d0[0]&&0===d2[0]){const str0=d0[1],d1=diff[pointer],str1=d1[1],str2=d2[1];str1.slice(str1.length-str0.length)===str0?(diff[pointer][1]=str0+str1.slice(0,str1.length-str0.length),d2[1]=str0+str2,diff.splice(pointer-1,1),changes=!0):str1.slice(0,str2.length)===str2&&(d0[1]+=d2[1],d1[1]=str1.slice(str2.length)+str2,diff.splice(pointer+1,1),changes=!0)}pointer++}changes&&cleanupMerge(diff,fixUnicode)},bisectSplit=(text1,text2,x,y)=>{const diffsA=diff_(text1.slice(0,x),text2.slice(0,y),!1),diffsB=diff_(text1.slice(x),text2.slice(y),!1);return diffsA.concat(diffsB)},diffNoCommonAffix=(src,dst)=>{if(!src)return[[1,dst]];if(!dst)return[[-1,src]];const text1Length=src.length,text2Length=dst.length,long=text1Length>text2Length?src:dst,short=text1Length>text2Length?dst:src,shortTextLength=short.length,indexOfContainedShort=long.indexOf(short);if(indexOfContainedShort>=0){const start=long.slice(0,indexOfContainedShort),end=long.slice(indexOfContainedShort+shortTextLength);return text1Length>text2Length?[[-1,start],[0,short],[-1,end]]:[[1,start],[0,short],[1,end]]}return 1===shortTextLength?[[-1,src],[1,dst]]:((text1,text2)=>{const text1Length=text1.length,text2Length=text2.length,maxD=Math.ceil((text1Length+text2Length)/2),vOffset=maxD,vLength=2*maxD,v1=new Array(vLength),v2=new Array(vLength);for(let x=0;x<vLength;x++)v1[x]=-1,v2[x]=-1;v1[vOffset+1]=0,v2[vOffset+1]=0;const delta=text1Length-text2Length,front=delta%2!=0;let k1start=0,k1end=0,k2start=0,k2end=0;for(let d=0;d<maxD;d++){for(let k1=-d+k1start;k1<=d-k1end;k1+=2){const k1_offset=vOffset+k1;let x1=0;const v10=v1[k1_offset-1],v11=v1[k1_offset+1];x1=k1===-d||k1!==d&&v10<v11?v11:v10+1;let y1=x1-k1;for(;x1<text1Length&&y1<text2Length&&text1.charAt(x1)===text2.charAt(y1);)x1++,y1++;if(v1[k1_offset]=x1,x1>text1Length)k1end+=2;else if(y1>text2Length)k1start+=2;else if(front){const k2Offset=vOffset+delta-k1,v2Offset=v2[k2Offset];if(k2Offset>=0&&k2Offset<vLength&&-1!==v2Offset&&x1>=text1Length-v2Offset)return bisectSplit(text1,text2,x1,y1)}}for(let k2=-d+k2start;k2<=d-k2end;k2+=2){const k2_offset=vOffset+k2;let x2=k2===-d||k2!==d&&v2[k2_offset-1]<v2[k2_offset+1]?v2[k2_offset+1]:v2[k2_offset-1]+1,y2=x2-k2;for(;x2<text1Length&&y2<text2Length&&text1.charAt(text1Length-x2-1)===text2.charAt(text2Length-y2-1);)x2++,y2++;if(v2[k2_offset]=x2,x2>text1Length)k2end+=2;else if(y2>text2Length)k2start+=2;else if(!front){const k1_offset=vOffset+delta-k2,x1=v1[k1_offset];if(k1_offset>=0&&k1_offset<vLength&&-1!==x1&&(x2=text1Length-x2,x1>=x2))return bisectSplit(text1,text2,x1,vOffset+x1-k1_offset)}}}return[[-1,text1],[1,text2]]})(src,dst)};exports.pfx=(txt1,txt2)=>{if(!txt1||!txt2||txt1.charAt(0)!==txt2.charAt(0))return 0;let min=0,max=Math.min(txt1.length,txt2.length),mid=max,start=0;for(;min<mid;)txt1.slice(start,mid)===txt2.slice(start,mid)?(min=mid,start=min):max=mid,mid=Math.floor((max-min)/2+min);const code=txt1.charCodeAt(mid-1);return code>=55296&&code<=56319&&mid--,mid};exports.sfx=(txt1,txt2)=>{if(!txt1||!txt2||txt1.slice(-1)!==txt2.slice(-1))return 0;let min=0,max=Math.min(txt1.length,txt2.length),mid=max,end=0;for(;min<mid;)txt1.slice(txt1.length-mid,txt1.length-end)===txt2.slice(txt2.length-mid,txt2.length-end)?(min=mid,end=min):max=mid,mid=Math.floor((max-min)/2+min);const code=txt1.charCodeAt(txt1.length-mid);return code>=55296&&code<=56319&&mid--,mid};const diff_=(src,dst,fixUnicode)=>{if(src===dst)return src?[[0,src]]:[];const prefixLength=(0,exports.pfx)(src,dst),prefix=src.slice(0,prefixLength);src=src.slice(prefixLength),dst=dst.slice(prefixLength);const suffixLength=(0,exports.sfx)(src,dst),suffix=src.slice(src.length-suffixLength);src=src.slice(0,src.length-suffixLength),dst=dst.slice(0,dst.length-suffixLength);const diff=diffNoCommonAffix(src,dst);return prefix&&diff.unshift([0,prefix]),suffix&&diff.push([0,suffix]),cleanupMerge(diff,fixUnicode),diff};exports.diff=(src,dst)=>diff_(src,dst,!0);exports.diffEdit=(src,dst,caret)=>{edit:{if(caret<0)break edit;const srcLen=src.length,dstLen=dst.length;if(srcLen===dstLen)break edit;const dstSfx=dst.slice(caret),sfxLen=dstSfx.length;if(sfxLen>srcLen)break edit;if(src.slice(srcLen-sfxLen)!==dstSfx)break edit;if(dstLen>srcLen){const pfxLen=srcLen-sfxLen,srcPfx=src.slice(0,pfxLen);if(srcPfx!==dst.slice(0,pfxLen))break edit;const insert=dst.slice(pfxLen,caret),patch=[];return srcPfx&&patch.push([0,srcPfx]),insert&&patch.push([1,insert]),dstSfx&&patch.push([0,dstSfx]),patch}{const pfxLen=dstLen-sfxLen,dstPfx=dst.slice(0,pfxLen),srcPfx=src.slice(0,pfxLen);if(srcPfx!==dstPfx)break edit;const del=src.slice(pfxLen,srcLen-sfxLen),patch=[];return srcPfx&&patch.push([0,srcPfx]),del&&patch.push([-1,del]),dstSfx&&patch.push([0,dstSfx]),patch}}return(0,exports.diff)(src,dst)};exports.src=patch=>{let txt="";const length=patch.length;for(let i=0;i<length;i++){const op=patch[i];1!==op[0]&&(txt+=op[1])}return txt};exports.dst=patch=>{let txt="";const length=patch.length;for(let i=0;i<length;i++){const op=patch[i];-1!==op[0]&&(txt+=op[1])}return txt};const invertOp=op=>{const type=op[0];return 0===type?op:1===type?[-1,op[1]]:[1,op[1]]};exports.invert=patch=>patch.map(invertOp);exports.apply=(patch,srcLen,onInsert,onDelete)=>{let pos=srcLen;for(let i=patch.length-1;i>=0;i--){const[type,str]=patch[i];if(0===type)pos-=str.length;else if(1===type)onInsert(pos,str);else{const len=str.length;pos-=len,onDelete(pos,len,str)}}}},"./node_modules/json-joy/node_modules/thingies/lib/fanout.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.FanOut=void 0;exports.FanOut=class FanOut{constructor(){this.listeners=new Set}emit(data){this.listeners.forEach(listener=>listener(data))}listen(listener){const listeners=this.listeners;return listeners.add(listener),()=>listeners.delete(listener)}}},"./node_modules/sonic-forest/lib/avl/AvlMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvlMap=exports.AvlNode=void 0;const util_1=__webpack_require__("./node_modules/sonic-forest/lib/avl/util.js"),map_1=__webpack_require__("./node_modules/sonic-forest/lib/data-types/map.js");class AvlNode{constructor(k,v){this.k=k,this.v=v,this.p=void 0,this.l=void 0,this.r=void 0,this.bf=0}}exports.AvlNode=AvlNode,exports.AvlMap=(0,map_1.createMap)(AvlNode,util_1.insert,util_1.insertLeft,util_1.insertRight,util_1.remove,util_1.print)},"./node_modules/sonic-forest/lib/avl/util.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.print=exports.remove=exports.insert=exports.insertLeft=exports.insertRight=void 0;const printBinary_1=__webpack_require__("./node_modules/sonic-forest/lib/print/printBinary.js"),stringify=JSON.stringify,rebalanceAfterInsert=(root,node,child)=>{const p=node.p;if(!p)return root;const isLeft=node===p.l;let bf=0|p.bf;switch(p.bf=isLeft?++bf:--bf,bf){case 0:return root;case 1:case-1:return rebalanceAfterInsert(root,p,node);default:{const isChildLeft=child===node.l;return isLeft?isChildLeft?(llRotate(p,node),node.p?root:node):(lrRotate(p,node,child),child.p?root:child):isChildLeft?(rlRotate(p,node,child),child.p?root:child):(rrRotate(p,node),node.p?root:node)}}},llRotate=(n,nl)=>{const p=n.p,nlr=nl.r;nl.p=p,nl.r=n,n.p=nl,n.l=nlr,nlr&&(nlr.p=n),p&&(p.l===n?p.l=nl:p.r=nl);let nbf=n.bf,nlbf=nl.bf;nbf+=-1-(nlbf>0?nlbf:0),nlbf+=-1+(nbf<0?nbf:0),n.bf=nbf,nl.bf=nlbf},rrRotate=(n,nr)=>{const p=n.p,nrl=nr.l;nr.p=p,nr.l=n,n.p=nr,n.r=nrl,nrl&&(nrl.p=n),p&&(p.l===n?p.l=nr:p.r=nr);let nbf=n.bf,nrbf=nr.bf;nbf+=1-(nrbf<0?nrbf:0),nrbf+=1+(nbf>0?nbf:0),n.bf=nbf,nr.bf=nrbf},lrRotate=(n,nl,nlr)=>{rrRotate(nl,nlr),llRotate(n,nlr)},rlRotate=(n,nr,nrl)=>{llRotate(nr,nrl),rrRotate(n,nrl)};exports.insertRight=(root,n,p)=>(p.r=n,n.p=p,p.bf--,p.l?root:rebalanceAfterInsert(root,p,n));exports.insertLeft=(root,n,p)=>(p.l=n,n.p=p,p.bf++,p.r?root:rebalanceAfterInsert(root,p,n));exports.insert=(root,node,comparator)=>{if(!root)return node;const key=node.k;let next,curr=root,cmp=0;for(;next=(cmp=comparator(key,curr.k))<0?curr.l:curr.r;)curr=next;return cmp<0?(0,exports.insertLeft)(root,node,curr):(0,exports.insertRight)(root,node,curr)};exports.remove=(root,n)=>{if(!root)return n;const p=n.p,l=n.l,r=n.r;if(n.p=n.l=n.r=void 0,l&&r){if(l.r){let v=l,tmp=v;for(;tmp=v.r;)v=tmp;const vl=v.l,vp=v.p,vc=vl;return p&&(p.l===n?p.l=v:p.r=v),v.p=p,v.r=r,v.bf=n.bf,l!==v&&(v.l=l,l.p=v),r.p=v,vp&&(vp.l===v?vp.l=vc:vp.r=vc),vc&&(vc.p=vp),rRebalance(p?root:v,vp,1)}{p&&(p.l===n?p.l=l:p.r=l),l.p=p,l.r=r,r.p=l;const nbf=n.bf;if(p)return l.bf=nbf,lRebalance(root,l,1);const lbf=nbf-1;if(l.bf=lbf,lbf>=-1)return l;const rl=r.l;return r.bf>0?(rlRotate(l,r,rl),rl):(rrRotate(l,r),r)}}const c=l||r;return c&&(c.p=p),p?p.l===n?(p.l=c,lRebalance(root,p,1)):(p.r=c,rRebalance(root,p,1)):c};const lRebalance=(root,n,d)=>{let bf=0|n.bf;bf-=d,n.bf=bf;let nextD=d;if(-1===bf)return root;if(bf<-1){const u=n.r;if(u.bf<=0)u.l&&0===u.bf&&(nextD=0),rrRotate(n,u),n=u;else{const ul=u.l;rlRotate(n,u,ul),n=ul}}const p=n.p;return p?p.l===n?lRebalance(root,p,nextD):rRebalance(root,p,nextD):n},rRebalance=(root,n,d)=>{let bf=0|n.bf;bf+=d,n.bf=bf;let nextD=d;if(1===bf)return root;if(bf>1){const u=n.l;if(u.bf>=0)u.r&&0===u.bf&&(nextD=0),llRotate(n,u),n=u;else{const ur=u.r;lrRotate(n,u,ur),n=ur}}const p=n.p;return p?p.l===n?lRebalance(root,p,nextD):rRebalance(root,p,nextD):n};exports.print=(node,tab="")=>{if(!node)return"âˆ…";const{bf,l,r,k,v}=node,vFormatted=v&&"object"==typeof v&&v.constructor===Object?stringify(v):v&&"object"==typeof v?v.toString(tab):stringify(v),content=void 0!==k?` { ${stringify(k)} = ${vFormatted} }`:"",bfFormatted=bf?` [${bf}]`:"";return node.constructor.name+`${bfFormatted}`+content+(0,printBinary_1.printBinary)(tab,[l?tab=>(0,exports.print)(l,tab):null,r?tab=>(0,exports.print)(r,tab):null])}},"./node_modules/sonic-forest/lib/data-types/map.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMap=void 0;const util_1=__webpack_require__("./node_modules/sonic-forest/lib/util/index.js"),printTree_1=__webpack_require__("./node_modules/sonic-forest/lib/print/printTree.js"),defaultComparator=(a,b)=>a===b?0:a<b?-1:1;exports.createMap=(Node,insert,insertLeft,insertRight,remove,print)=>class SonicMapImpl{constructor(comparator){this.min=void 0,this.root=void 0,this.max=void 0,this._size=0,this.next=util_1.next,this.comparator=comparator||defaultComparator}set(k,v){const root=this.root;if(void 0===root){this._size=1;const node=new Node(k,v);return this.root=this.min=this.max=insert(void 0,node,this.comparator)}const comparator=this.comparator;let cmp;const max=this.max;if(cmp=comparator(k,max.k),0===cmp)return max.v=v,max;if(cmp>0){const node=this.max=new Node(k,v);return this.root=insertRight(root,node,max),this._size++,node}const min=this.min;if(cmp=comparator(k,min.k),0===cmp)return min.v=v,min;if(cmp<0){const node=this.min=new Node(k,v);return this.root=insertLeft(root,node,min),this._size++,node}let curr=root;for(;;){if(cmp=comparator(k,curr.k),0===cmp)return curr.v=v,curr;if(cmp>0){const r=curr.r;if(void 0===r){const node=new Node(k,v);return this.root=insertRight(root,node,curr),this._size++,node}curr=r}else if(cmp<0){const l=curr.l;if(void 0===l){const node=new Node(k,v);return this.root=insertLeft(root,node,curr),this._size++,node}curr=l}}}find(k){const comparator=this.comparator;let curr=this.root;for(;curr;){const cmp=+comparator(k,curr.k);if(0===cmp)return curr;curr=cmp<0?curr.l:curr.r}}get(k){return this.find(k)?.v}del(k){const node=this.find(k);return!!node&&(node===this.max&&(this.max=(0,util_1.prev)(node)),node===this.min&&(this.min=(0,util_1.next)(node)),this.root=remove(this.root,node),this._size--,!0)}clear(){this._size=0,this.root=this.min=this.max=void 0}has(k){return!!this.find(k)}size(){return this._size}isEmpty(){return!this.min}getOrNextLower(k){return(0,util_1.findOrNextLower)(this.root,k,this.comparator)||void 0}forEach(fn){let curr=this.first();if(curr)do{fn(curr)}while(curr=(0,util_1.next)(curr))}first(){return this.min}last(){return this.max}iterator0(){let curr=this.first();return()=>{if(!curr)return;const value=curr;return curr=(0,util_1.next)(curr),value}}iterator(){const iterator=this.iterator0();return{next:()=>{const value=iterator();return{value,done:!value}}}}entries(){return{[Symbol.iterator]:()=>this.iterator()}}toString(tab){return this.constructor.name+(0,printTree_1.printTree)(tab,[tab=>print(this.root,tab)])}}},"./node_modules/sonic-forest/lib/print/printBinary.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__exportStar(__webpack_require__("./node_modules/tree-dump/lib/printBinary.js"),exports)},"./node_modules/sonic-forest/lib/print/printTree.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.mjs").__exportStar(__webpack_require__("./node_modules/tree-dump/lib/printTree.js"),exports)},"./node_modules/sonic-forest/lib/splay/util.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.rlSplay=exports.lrSplay=exports.llSplay=exports.rrSplay=exports.lSplay=exports.rSplay=exports.splay=void 0;exports.splay=(root,node,repeat)=>{const p=node.p;if(!p)return root;const pp=p.p,l2=p.l===node;if(!pp)return l2?(0,exports.rSplay)(node,p):(0,exports.lSplay)(node,p),node;return root=pp.l===p?l2?(0,exports.llSplay)(root,node,p,pp):(0,exports.lrSplay)(root,node,p,pp):l2?(0,exports.rlSplay)(root,node,p,pp):(0,exports.rrSplay)(root,node,p,pp),repeat>1?(0,exports.splay)(root,node,repeat-1):root};exports.rSplay=(c2,c1)=>{const b=c2.r;c2.p=void 0,c2.r=c1,c1.p=c2,c1.l=b,b&&(b.p=c1)};exports.lSplay=(c2,c1)=>{const b=c2.l;c2.p=void 0,c2.l=c1,c1.p=c2,c1.r=b,b&&(b.p=c1)};exports.rrSplay=(root,c3,c2,c1)=>{const b=c2.l,c=c3.l,p=c1.p;return c3.p=p,c3.l=c2,c2.p=c3,c2.l=c1,c2.r=c,c1.p=c2,c1.r=b,b&&(b.p=c1),c&&(c.p=c2),p?p.l===c1?p.l=c3:p.r=c3:root=c3,root};exports.llSplay=(root,c3,c2,c1)=>{const b=c2.r,c=c3.r,p=c1.p;return c3.p=p,c3.r=c2,c2.p=c3,c2.l=c,c2.r=c1,c1.p=c2,c1.l=b,b&&(b.p=c1),c&&(c.p=c2),p?p.l===c1?p.l=c3:p.r=c3:root=c3,root};exports.lrSplay=(root,c3,c2,c1)=>{const c=c3.l,d=c3.r,p=c1.p;return c3.p=p,c3.l=c2,c3.r=c1,c2.p=c3,c2.r=c,c1.p=c3,c1.l=d,c&&(c.p=c2),d&&(d.p=c1),p?p.l===c1?p.l=c3:p.r=c3:root=c3,root};exports.rlSplay=(root,c3,c2,c1)=>{const c=c3.r,d=c3.l,p=c1.p;return c3.p=p,c3.l=c1,c3.r=c2,c2.p=c3,c2.l=c,c1.p=c3,c1.r=d,c&&(c.p=c2),d&&(d.p=c1),p?p.l===c1?p.l=c3:p.r=c3:root=c3,root}},"./node_modules/sonic-forest/lib/splay/util2.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.splay2=void 0;exports.splay2=(root,node)=>{const p=node.p2;if(!p)return root;const pp=p.p2,l2=p.l2===node;if(!pp)return l2?rSplay2(node,p):lSplay2(node,p),node;return root=pp.l2===p?l2?llSplay2(root,node,p,pp):lrSplay2(root,node,p,pp):l2?rlSplay2(root,node,p,pp):rrSplay2(root,node,p,pp),(0,exports.splay2)(root,node)};const rSplay2=(c2,c1)=>{const b=c2.r2;c2.p2=void 0,c2.r2=c1,c1.p2=c2,c1.l2=b,b&&(b.p2=c1)},lSplay2=(c2,c1)=>{const b=c2.l2;c2.p2=void 0,c2.l2=c1,c1.p2=c2,c1.r2=b,b&&(b.p2=c1)},rrSplay2=(root,c3,c2,c1)=>{const b=c2.l2,c=c3.l2,p=c1.p2;return c3.p2=p,c3.l2=c2,c2.p2=c3,c2.l2=c1,c2.r2=c,c1.p2=c2,c1.r2=b,b&&(b.p2=c1),c&&(c.p2=c2),p?p.l2===c1?p.l2=c3:p.r2=c3:root=c3,root},llSplay2=(root,c3,c2,c1)=>{const b=c2.r2,c=c3.r2,p=c1.p2;return c3.p2=p,c3.r2=c2,c2.p2=c3,c2.l2=c,c2.r2=c1,c1.p2=c2,c1.l2=b,b&&(b.p2=c1),c&&(c.p2=c2),p?p.l2===c1?p.l2=c3:p.r2=c3:root=c3,root},lrSplay2=(root,c3,c2,c1)=>{const c=c3.l2,d=c3.r2,p=c1.p2;return c3.p2=p,c3.l2=c2,c3.r2=c1,c2.p2=c3,c2.r2=c,c1.p2=c3,c1.l2=d,c&&(c.p2=c2),d&&(d.p2=c1),p?p.l2===c1?p.l2=c3:p.r2=c3:root=c3,root},rlSplay2=(root,c3,c2,c1)=>{const c=c3.r2,d=c3.l2,p=c1.p2;return c3.p2=p,c3.l2=c1,c3.r2=c2,c2.p2=c3,c2.l2=c,c1.p2=c3,c1.r2=d,c&&(c.p2=c2),d&&(d.p2=c1),p?p.l2===c1?p.l2=c3:p.r2=c3:root=c3,root}},"./node_modules/sonic-forest/lib/util/first.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.first=void 0;exports.first=root=>{let curr=root;for(;curr;){if(!curr.l)return curr;curr=curr.l}return curr}},"./node_modules/sonic-forest/lib/util/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.remove=exports.insert=exports.insertLeft=exports.insertRight=exports.findOrNextLower=exports.find=exports.size=exports.prev=exports.last=exports.next=exports.first=void 0;const first_1=__webpack_require__("./node_modules/sonic-forest/lib/util/first.js");Object.defineProperty(exports,"first",{enumerable:!0,get:function(){return first_1.first}});const next_1=__webpack_require__("./node_modules/sonic-forest/lib/util/next.js");Object.defineProperty(exports,"next",{enumerable:!0,get:function(){return next_1.next}});exports.last=root=>{let curr=root;for(;curr;){if(!curr.r)return curr;curr=curr.r}return curr};exports.prev=curr=>{if(curr.l){for(curr=curr.l;curr.r;)curr=curr.r;return curr}let p=curr.p;for(;p&&p.l===curr;)curr=p,p=p.p;return p};const size_=root=>{const l=root.l,r=root.r;return 1+(l?size_(l):0)+(r?size_(r):0)};exports.size=root=>root?size_(root):0;exports.find=(root,key,comparator)=>{let curr=root;for(;curr;){const cmp=comparator(key,curr.k);if(0===cmp)return curr;curr=cmp<0?curr.l:curr.r}return curr};exports.findOrNextLower=(root,key,comparator)=>{let result,curr=root;for(;curr;){const cmp=comparator(curr.k,key);if(0===cmp)return curr;if(cmp>0)curr=curr.l;else{const next=curr.r;if(result=curr,!next)return result;curr=next}}return result};exports.insertRight=(node,p)=>{const r=node.r=p.r;p.r=node,node.p=p,r&&(r.p=node)};exports.insertLeft=(node,p)=>{const l=node.l=p.l;p.l=node,node.p=p,l&&(l.p=node)};exports.insert=(root,node,comparator)=>{if(!root)return node;const key=node.k;let curr=root;for(;curr;){const cmp=comparator(key,curr.k),next=cmp<0?curr.l:curr.r;if(!next){cmp<0?(0,exports.insertLeft)(node,curr):(0,exports.insertRight)(node,curr);break}curr=next}return root};exports.remove=(root,node)=>{const p=node.p,l=node.l,r=node.r;if(node.p=node.l=node.r=void 0,!l&&!r){if(!p)return;return p.l===node?p.l=void 0:p.r=void 0,root}if(l&&r){let mostRightChildFromLeft=l;for(;mostRightChildFromLeft.r;)mostRightChildFromLeft=mostRightChildFromLeft.r;return mostRightChildFromLeft.r=r,r.p=mostRightChildFromLeft,p?(p.l===node?p.l=l:p.r=l,l.p=p,root):(l.p=void 0,l)}const child=l||r;return child.p=p,p?(p.l===node?p.l=child:p.r=child,root):child}},"./node_modules/sonic-forest/lib/util/next.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.next=void 0;const first_1=__webpack_require__("./node_modules/sonic-forest/lib/util/first.js");exports.next=curr=>{const r=curr.r;if(r)return(0,first_1.first)(r);let p=curr.p;for(;p&&p.r===curr;)curr=p,p=p.p;return p}},"./node_modules/sonic-forest/lib/util2.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.remove2=exports.insert2=exports.prev2=exports.next2=exports.last2=exports.first2=void 0;exports.first2=root=>{let curr=root;for(;curr;){if(!curr.l2)return curr;curr=curr.l2}return curr};exports.last2=root=>{let curr=root;for(;curr;){if(!curr.r2)return curr;curr=curr.r2}return curr};exports.next2=curr=>{if(curr.r2){for(curr=curr.r2;curr.l2;)curr=curr.l2;return curr}let p=curr.p2;for(;p&&p.r2===curr;)curr=p,p=p.p2;return p};exports.prev2=curr=>{if(curr.l2){for(curr=curr.l2;curr.r2;)curr=curr.r2;return curr}let p=curr.p2;for(;p&&p.l2===curr;)curr=p,p=p.p2;return p};const insertRight2=(node,p)=>{const r=node.r2=p.r2;p.r2=node,node.p2=p,r&&(r.p2=node)},insertLeft2=(node,p)=>{const l=node.l2=p.l2;p.l2=node,node.p2=p,l&&(l.p2=node)};exports.insert2=(root,node,comparator)=>{if(!root)return node;let curr=root;for(;curr;){const cmp=comparator(node,curr),next=cmp<0?curr.l2:curr.r2;if(!next){cmp<0?insertLeft2(node,curr):insertRight2(node,curr);break}curr=next}return root};exports.remove2=(root,node)=>{const p=node.p2,l=node.l2,r=node.r2;if(node.p2=node.l2=node.r2=void 0,!l&&!r){if(!p)return;return p.l2===node?p.l2=void 0:p.r2=void 0,root}if(l&&r){let mostRightChildFromLeft=l;for(;mostRightChildFromLeft.r2;)mostRightChildFromLeft=mostRightChildFromLeft.r2;return mostRightChildFromLeft.r2=r,r.p2=mostRightChildFromLeft,p?(p.l2===node?p.l2=l:p.r2=l,l.p2=p,root):(l.p2=void 0,l)}const child=l||r;return child.p2=p,p?(p.l2===node?p.l2=child:p.r2=child,root):child}},"./node_modules/tree-dump/lib/printBinary.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.printBinary=void 0;exports.printBinary=(tab="",children)=>{const left=children[0],right=children[1];let str="";return left&&(str+="\n"+tab+"â† "+left(tab+"  ")),right&&(str+="\n"+tab+"â†’ "+right(tab+"  ")),str}},"./node_modules/tree-dump/lib/printTree.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.printTree=void 0;exports.printTree=(tab="",children)=>{let str="",last=children.length-1;for(;last>=0&&!children[last];last--);for(let i=0;i<=last;i++){const fn=children[i];if(!fn)continue;const isLast=i===last,child=fn(tab+(isLast?" ":"â”‚")+"  ");str+="\n"+tab+(child?isLast?"â””â”€":"â”œâ”€":"â”‚")+(child?" "+child:"")}return str}},"./node_modules/tslib/tslib.es6.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__addDisposableResource:()=>__addDisposableResource,__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldIn:()=>__classPrivateFieldIn,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__disposeResources:()=>__disposeResources,__esDecorate:()=>__esDecorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__propKey:()=>__propKey,__read:()=>__read,__rest:()=>__rest,__rewriteRelativeImportExtension:()=>__rewriteRelativeImportExtension,__runInitializers:()=>__runInitializers,__setFunctionName:()=>__setFunctionName,__spread:()=>__spread,__spreadArray:()=>__spreadArray,__spreadArrays:()=>__spreadArrays,__values:()=>__values,default:()=>__WEBPACK_DEFAULT_EXPORT__});var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __esDecorate(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0}function __runInitializers(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0}function __propKey(x){return"symbol"==typeof x?x:"".concat(x)}function __setFunctionName(f,name,prefix){return"symbol"==typeof name&&(name=name.description?"[".concat(name.description,"]"):""),Object.defineProperty(f,"name",{configurable:!0,value:prefix?"".concat(prefix," ",name):name})}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var __createBinding=Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]};function __exportStar(m,o){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(o,p)||__createBinding(o,m,p)}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),verb("next"),verb("throw"),verb("return",function awaitReturn(f){return function(v){return Promise.resolve(v).then(f,reject)}}),i[Symbol.asyncIterator]=function(){return this},i;function verb(n,f){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})},f&&(i[n]=f(i[n])))}function resume(n,v){try{!function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:!1}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){(function settle(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)})(resolve,reject,(v=o[n](v)).done,v.value)})}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}var __setModuleDefault=Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v},ownKeys=function(o){return ownKeys=Object.getOwnPropertyNames||function(o){var ar=[];for(var k in o)Object.prototype.hasOwnProperty.call(o,k)&&(ar[ar.length]=k);return ar},ownKeys(o)};function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k=ownKeys(mod),i=0;i<k.length;i++)"default"!==k[i]&&__createBinding(result,mod,k[i]);return __setModuleDefault(result,mod),result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)}function __classPrivateFieldSet(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value}function __classPrivateFieldIn(state,receiver){if(null===receiver||"object"!=typeof receiver&&"function"!=typeof receiver)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof state?receiver===state:state.has(receiver)}function __addDisposableResource(env,value,async){if(null!=value){if("object"!=typeof value&&"function"!=typeof value)throw new TypeError("Object expected.");var dispose,inner;if(async){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");dispose=value[Symbol.asyncDispose]}if(void 0===dispose){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");dispose=value[Symbol.dispose],async&&(inner=dispose)}if("function"!=typeof dispose)throw new TypeError("Object not disposable.");inner&&(dispose=function(){try{inner.call(this)}catch(e){return Promise.reject(e)}}),env.stack.push({value,dispose,async})}else async&&env.stack.push({async:!0});return value}var _SuppressedError="function"==typeof SuppressedError?SuppressedError:function(error,suppressed,message){var e=new Error(message);return e.name="SuppressedError",e.error=error,e.suppressed=suppressed,e};function __disposeResources(env){function fail(e){env.error=env.hasError?new _SuppressedError(e,env.error,"An error was suppressed during disposal."):e,env.hasError=!0}var r,s=0;return function next(){for(;r=env.stack.pop();)try{if(!r.async&&1===s)return s=0,env.stack.push(r),Promise.resolve().then(next);if(r.dispose){var result=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(result).then(next,function(e){return fail(e),next()})}else s|=1}catch(e){fail(e)}if(1===s)return env.hasError?Promise.reject(env.error):Promise.resolve();if(env.hasError)throw env.error}()}function __rewriteRelativeImportExtension(path,preserveJsx){return"string"==typeof path&&/^\.\.?\//.test(path)?path.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(m,tsx,d,ext,cm){return tsx?preserveJsx?".jsx":".js":!d||ext&&cm?d+ext+"."+cm.toLowerCase()+"js":m}):path}const __WEBPACK_DEFAULT_EXPORT__={__extends,__assign,__rest,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources,__rewriteRelativeImportExtension}}}]);